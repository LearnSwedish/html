<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>"Värre" or "sämre"?</title>
    
    <!-- Font Awesome CDN for Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
   
    <style>
    /* Reset and Base Styles */
    *,
    *::before,
    *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }

    body {
        font-family: Arial, sans-serif;
        /* Changed to Arial */
        background-color: #f9fafb;
        color: #2d3748;
        line-height: 1.6;
        font-size: 16px;
        display: flex;
        flex-direction: column;
        /* Changed to column to stack elements vertically */
        justify-content: flex-start;
        /* Align items to the start vertically */
        align-items: center;
        /* Center items horizontally */
        min-height: 100vh;
        padding: 20px;
        overflow-y: auto;
        /* Allow background scrolling */
        position: relative;
        /* For fixed elements */
        transition: background-color 0.3s, color 0.3s;
    }

    /* Title Styles */
    .page-title {
        text-align: center;
        color: #333333;
        font-size: 28px;
        /* Increased font size for prominence */
        margin-bottom: 20px;
        line-height: 1.4;
        padding-top: 10px;
        position: relative;
        z-index: 1;
        transition: color 0.3s ease, background-color 0.3s ease;
    }

    body.dark-mode .page-title {
        color: #ffffff;
    }

    /* Dark mode styles */
    body.dark-mode {
        background-color: #121212;
        color: #e2e8f0;
    }

    /* Score, Start Over, and Dark Mode Toggle container */
    .score-container {
        position: fixed;
        top: 20px;
        right: 40px;
        /* Position for desktop */
        display: flex;
        flex-direction: column;
        align-items: stretch;
        width: 150px;
        /* Adjusted width for better spacing */
        z-index: 1001;
        gap: 10px;
        /* Increased gap for better spacing */
        transition: background-color 0.3s ease, box-shadow 0.3s ease;
    }

    /* Unified Button Styling */
    .score,
    .dark-mode-toggle,
    .start-over {
        width: 100%;
        height: 40px;
        /* Fixed height for uniformity */
        padding: 0 10px;
        /* Adjusted horizontal padding */
        box-sizing: border-box;
        /* Ensures padding/border don't affect width */
        font-size: 16px;
        text-align: center;
        background-color: #fff;
        color: #333;
        border-radius: 5px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background-color 0.3s, color 0.3s;
        cursor: pointer;
        /* Add cursor pointer for buttons */
        border: none;
        /* Remove default border */
    }

    /* Start Over Button Specific Styling */
    .start-over {
        background-color: #007BFF;
        color: white;
        cursor: pointer;
        border: none;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background-color 0.3s ease,
            box-shadow 0.3s ease,
            color 0.3s ease;
    }

    .start-over:hover {
        background-color: #0056b3;
    }

    /* Dark mode toggle specific styling */
    .dark-mode-toggle {
        justify-content: flex-start;
        /* Align switch and label to the start */
        padding: 0 10px;
        /* Adjust horizontal padding */
        gap: 10px;
        /* Space between switch and label */
        cursor: default;
        /* Default cursor for label */
    }

    /* Hide default checkbox */
    .switch input {
        display: none;
    }

    /* Slider container */
    .switch {
        position: relative;
        width: 40px;
        height: 20px;
        display: inline-block;
        /* Ensures width and height are respected */
    }

    /* Slider appearance */
    .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        transition: 0.4s;
        border-radius: 20px;
    }

    .slider::before {
        position: absolute;
        content: "";
        height: 14px;
        width: 14px;
        left: 3px;
        bottom: 3px;
        background-color: white;
        transition: 0.4s;
        border-radius: 50%;
    }

    /* Slider active state */
    .switch input:checked+.slider {
        background-color: #007BFF;
    }

    .switch input:checked+.slider::before {
        transform: translateX(20px);
        /* Smooth transition */
    }

    /* Container */
    .container {
        background-color: #ffffff;
        padding: 40px 30px;
        border-radius: 12px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        max-width: 790px;
        width: 100%;
        text-align: center;
        position: relative;
        /* To stack with fixed elements */
        transition: background-color 0.3s, box-shadow 0.3s;
        margin-top: 20px;
        /* Add some space below the title */
    }

    body.dark-mode .container {
        background-color: #1a202c;
        box-shadow: 0 10px 25px rgba(255, 255, 255, 0.1);
    }

    /* Sentences */
    .sentences {
        display: grid;
        grid-template-columns: 1fr;
        gap: 20px;
    }

    /* Sentence Styling */
    .sentence {
        background-color: #f7fafc;
        padding: 20px;
        padding-bottom: 5px;
        /* Adjusted padding to accommodate the button */
        border-radius: 8px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        position: relative;
        /* For absolute children */
        transition: background-color 0.3s, border 0.3s;
        border-left: 6px solid transparent;
        /* Reserve space for border */
        text-align: left;
        data-state: "none";
        /* Initialize state to 'none' */
    }

    body.dark-mode .sentence {
        background-color: #2d3748;
        box-shadow: 0 4px 10px rgba(255, 255, 255, 0.05);
    }

    .sentence.correct {
        border-left: 6px solid #38a169;
        background-color: #cdffcd;
        transition: border 0.3s, background-color 0.3s;
    }

    body.dark-mode .sentence.correct {
        border-left: 6px solid #38a169;
        background-color: #22543d;
    }

    .sentence.incorrect {
        border-left: 6px solid #e53e3e;
        background-color: #FFADB0;
        transition: border 0.3s, background-color 0.3s;
    }

    body.dark-mode .sentence.incorrect {
        border-left: 6px solid #e53e3e;
        background-color: #742a2a;
    }

    .sentence p {
        font-size: 1.1rem;
        margin-bottom: 10px;
        transition: color 0.3s;
    }

    body.dark-mode .sentence p {
        color: #edf2f7;
    }

    /* Word and Tooltip Styling */
    .word {
        position: relative;
        cursor: pointer;
        color: #2d3748;
        transition: color 0.3s, background-color 0.3s;
        display: inline-block;
        border-radius: 4px;
    }

    body.dark-mode .word {
        color: #edf2f7;
    }

    .word::after {
        content: '';
        position: absolute;
        left: 50%;
        /* Starta från mitten */
        bottom: -2px;
        /* Justera avståndet till understrykningen */
        width: 100%;
        /* Full bredd */
        height: 3px;
        background-color: currentColor;
        transform: translateX(-50%) scaleX(0);
        /* Starta med ingen understrykning */
        transform-origin: center;
        /* Expandera från mitten */
        transition: transform 0.3s ease;
        /* Animering för understrykningen */
    }

    .word:hover::after,
    .word:focus::after {
        transform: translateX(-50%) scaleX(1);
        /* Expanderar understrykningen */
    }

    /* Highlighting vid hover/fokus */
    .word:hover,
    .word:focus {
        background-color: rgba(45, 55, 72, 0.1);
        /* Ljust läge: ljus bakgrund */
    }

    body.dark-mode .word:hover,
    body.dark-mode .word:focus {
        background-color: rgba(226, 232, 240, 0.1);
        /* Mörkt läge: mörkare bakgrund */
    }

    /* Tooltip Styling */
    .tooltip {
        position: absolute;
        bottom: 125%;
        /* Position över ordet */
        left: 50%;
        transform: translateX(-50%);
        background-color: #333;
        color: #fff;
        padding: 6px 10px;
        border-radius: 4px;
        white-space: nowrap;
        font-size: 0.9rem;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s, visibility 0.3s;
        z-index: 10;
    }

    .word:hover .tooltip,
    .word:focus .tooltip {
        /* Visa verktygstips vid hover/fokus */
        opacity: 1;
        visibility: visible;
    }

    /* Tooltip Arrow */
    .tooltip::after {
        content: '';
        position: absolute;
        top: 100%;
        /* Vid botten av verktygstipsen */
        left: 50%;
        transform: translateX(-50%);
        border-width: 5px;
        border-style: solid;
        border-color: #333 transparent transparent transparent;
    }

    body.dark-mode .tooltip {
        background-color: #555;
        color: #fff;
    }

    body.dark-mode .tooltip::after {
        border-color: #555 transparent transparent transparent;
    }

    /* Select Element Styling */
    .sentence select {
        padding: 4px 4px;
        /* Better readability */
        font-size: inherit;
        /* Match the surrounding text size */
        border: 1px solid #cbd5e0;
        border-radius: 6px;
        background-color: #edf2f7;
        cursor: pointer;
        transition: border-color 0.3s, background-color 0.3s;
        width: 83px;
        /* Accommodate "sämre" */
        appearance: auto;
        /* Default appearance */
        -webkit-appearance: auto;
        /* WebKit browsers */
        -moz-appearance: auto;
        /* Firefox */
        background-image: initial;
        /* Restore default background */
        margin-left: 7px;
        /* Space before the select */
        margin-right: 7px;
        /* Space after the select */
    }

    body.dark-mode .sentence select {
        background-color: #4a5568;
        color: #edf2f7;
        border: 1px solid #718096;
    }

    .sentence select:focus {
        border-color: #3182ce;
        outline: none;
        box-shadow: 0 0 0 2px rgba(49, 130, 206, 0.2);
    }

    body.dark-mode .sentence select:focus {
        border-color: #63b3ed;
        box-shadow: 0 0 0 2px rgba(99, 179, 237, 0.2);
    }

    /* Modal styles */
    .modal {
        display: none;
        position: fixed;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        justify-content: center;
        align-items: center;
        opacity: 0;
        transition: opacity 0.3s ease-in-out;
    }

    .modal-content {
        background: white;
        color: black;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        text-align: center;
        max-width: 600px;
        width: 80%;
        transform: translateY(-50px);
        transition: transform 0.3s ease-in-out;
    }

    .modal.show {
        display: flex;
        opacity: 1;
    }

    .close-button {
        float: right;
        padding: 5px;
        cursor: pointer;
        font-size: 18px;
        background-color: #ccc;
        border-radius: 50%;
        line-height: 20px;
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background-color 0.3s, transform 0.3s;
    }

    .close-button:hover {
        background-color: #f44336;
        transform: scale(1.2);
        color: white;
    }

    body.dark-mode .modal-content {
        background-color: #1a202c;
        color: #edf2f7;
        border-color: #2d3748;
    }


    /* Responsive Design */
    @media (max-width: 600px) {
        .score-container {
            top: 10px;
            right: 10px;
            width: 120px;
            gap: 10px;
            /* Reduced gap for smaller screens */
        }

        .score,
        .start-over,
        .dark-mode-toggle {
            font-size: 14px;
            height: 45px;
            /* Slightly smaller height for smaller screens */
            padding: 0 10px;
            /* Reduced horizontal padding */
        }

        .start-over {
            padding: 0 12px;
        }

        .dark-mode-toggle {
            padding: 0 8px;
            gap: 8px;
        }

        /* Adjust switch size for smaller screens */
        .switch {
            width: 35px;
            height: 18px;
        }

        .slider::before {
            height: 12px;
            width: 12px;
            left: 3px;
            bottom: 3px;
        }

        .switch input:checked+.slider::before {
            transform: translateX(18px);
        }
    }

    /* Additional Styles for Info Modal (Optional) */
    /* You can customize the Info modal content further if needed */
    </style>
</head>
<body>

    <!-- Score, Dark Mode Toggle, Info Button, and Start Over Button -->
    <div class="score-container">
      <!-- Score Display -->
      <div class="score">Score:&nbsp; <span id="score">0</span>&nbsp;/&nbsp;30 </div>
      <!-- Dark Mode Toggle -->
      <div class="dark-mode-toggle">
        <label class="switch">
          <input type="checkbox" id="darkModeSwitch">
          <span class="slider"></span>
        </label>
        <span>Dark mode</span>
      </div>
      <!-- New Info Button -->
      <button class="start-over" id="info-button" onclick="openModal('infoModal')">
        <i class="fas fa-info-circle" style="margin-right: 8px;"></i> Info </button>
      <!-- Start Over Button -->
      <button class="start-over" onclick="startOver()">
        <i class="fas fa-rotate-left" style="margin-right: 8px;"></i> Start over </button>
    </div>
    <!-- Page Title -->
    <h1 class="page-title">"Värre" or "sämre"?</h1>
    <!-- Main Content Container -->
    <div class="container">
      <div class="sentences" id="sentences"></div>
    </div>
    <!-- Congratulations Modal -->
    <div class="modal" id="congratulationsModal" role="dialog" aria-modal="true" aria-labelledby="congratulationsModalTitle">
      <div class="modal-content">
        <button class="close-button" type="button" onclick="closeModal('congratulationsModal')" aria-label="Close modal">&times;</button>
        <h2 id="congratulationsModalTitle">Congratulations!</h2>
        <p>You've answered correctly in all sentences!</p>
      </div>
    </div>
    <!-- New Info Modal -->
    <div class="modal" id="infoModal" role="dialog" aria-modal="true" aria-labelledby="infoModalTitle">
      <div class="modal-content">
        <span class="close-button" onclick="closeModal('infoModal')">&times;</span>
        <h2 id="infoModalTitle">Information</h2>
            <p>In this exercise, you'll choose between using "sämre" or "värre" (both of which are translated as "worse" in English). In Swedish, the distinction works as follows: If you're comparing something neutral or positive to something worse, use "sämre". If you're comparing something already bad to something even worse, use "värre". If you don’t understand the words, hover over (or click on) them. Good luck!</p>
        <!-- Add more informational content as needed -->
      </div>
    </div>

    <script>
        let score = 0;

    const sentences = [{
            words: [{
                    word: "Jag",
                    translation: "I"
                },
                {
                    word: "kände mig",
                    translation: "felt"
                },
                {
                    word: "dålig",
                    translation: "unwell"
                },
                {
                    word: "igår,",
                    translation: "yesterday"
                },
                {
                    word: "men",
                    translation: "but"
                },
                {
                    word: "idag",
                    translation: "today"
                },
                {
                    word: "mår",
                    translation: "feel"
                },
                {
                    word: "jag",
                    translation: "I"
                },
                {
                    word: `<select data-correct="värre" onchange="evaluateAnswer(this)" aria-label="Välj det korrekta adjektivet">
                    <option value="">pick</option>
                    <option value="värre">värre</option>
                    <option value="sämre">sämre</option>
                </select>`,
                    translation: ""
                },
            ]
        },
        {
            words: [{
                    word: "Vädret",
                    translation: "The weather"
                },
                {
                    word: "var",
                    translation: "was"
                },
                {
                    word: "dåligt",
                    translation: "bad"
                },
                {
                    word: "förra",
                    translation: "last"
                },
                {
                    word: "veckan,",
                    translation: "week"
                },
                {
                    word: "men",
                    translation: "but"
                },
                {
                    word: "den här",
                    translation: "this"
                },
                {
                    word: "veckan",
                    translation: "week"
                },
                {
                    word: "är",
                    translation: "is"
                },
                {
                    word: "det",
                    translation: "it"
                },
                {
                    word: `<select data-correct="värre" onchange="evaluateAnswer(this)" aria-label="Välj det korrekta adjektivet">
                    <option value="">pick</option>
                    <option value="värre">värre</option>
                    <option value="sämre">sämre</option>
                </select>`,
                    translation: ""
                },
            ]
        },
        {
            words: [{
                    word: "Min",
                    translation: "My"
                },
                {
                    word: "huvudvärk",
                    translation: "headache"
                },
                {
                    word: "var",
                    translation: "was"
                },
                {
                    word: "hanterbar",
                    translation: "manageable"
                },
                {
                    word: "imorse",
                    translation: "this morning"
                },
                {
                    word: "men",
                    translation: "but"
                },
                {
                    word: "nu",
                    translation: "now"
                },
                {
                    word: "är",
                    translation: "is"
                },
                {
                    word: "den",
                    translation: "it"
                },
                {
                    word: `<select data-correct="värre" onchange="evaluateAnswer(this)" aria-label="Välj det korrekta adjektivet">
                    <option value="">pick</option>
                    <option value="värre">värre</option>
                    <option value="sämre">sämre</option>
                </select>`,
                    translation: ""
                },
            ]
        },
        {
            words: [{
                    word: "Trafiken",
                    translation: "The traffic"
                },
                {
                    word: "var",
                    translation: "was"
                },
                {
                    word: "trög",
                    translation: "slow"
                },
                {
                    word: "igår,",
                    translation: "yesterday"
                },
                {
                    word: "men",
                    translation: "but"
                },
                {
                    word: "idag",
                    translation: "today"
                },
                {
                    word: "är",
                    translation: "is"
                },
                {
                    word: "den",
                    translation: "it"
                },
                {
                    word: `<select data-correct="värre" onchange="evaluateAnswer(this)" aria-label="Välj det korrekta adjektivet">
                    <option value="">pick</option>
                    <option value="värre">värre</option>
                    <option value="sämre">sämre</option>
                </select>`,
                    translation: ""
                },
            ]
        },
        {
            words: [{
                    word: "Han",
                    translation: "He"
                },
                {
                    word: "bråkade",
                    translation: "argued"
                },
                {
                    word: "med",
                    translation: "with"
                },
                {
                    word: "sin",
                    translation: "his"
                },
                {
                    word: "chef",
                    translation: "boss"
                },
                {
                    word: "igår",
                    translation: "yesterday"
                },
                {
                    word: "och",
                    translation: "and"
                },
                {
                    word: "idag",
                    translation: "today"
                },
                {
                    word: "blev",
                    translation: "got"
                },
                {
                    word: "det",
                    translation: "it"
                },
                {
                    word: `<select data-correct="värre" onchange="evaluateAnswer(this)" aria-label="Välj det korrekta adjektivet">
                    <option value="">pick</option>
                    <option value="värre">värre</option>
                    <option value="sämre">sämre</option>
                </select>`,
                    translation: ""
                },
            ]
        },
        {
            words: [{
                    word: "Bullret",
                    translation: "The noise"
                },
                {
                    word: "var",
                    translation: "was"
                },
                {
                    word: "högt",
                    translation: "loud"
                },
                {
                    word: "under",
                    translation: "during"
                },
                {
                    word: "dagen,",
                    translation: "the day"
                },
                {
                    word: "men",
                    translation: "but"
                },
                {
                    word: "på",
                    translation: "at"
                },
                {
                    word: "natten",
                    translation: "night"
                },
                {
                    word: "blev",
                    translation: "became"
                },
                {
                    word: "det",
                    translation: "it"
                },
                {
                    word: `<select data-correct="värre" onchange="evaluateAnswer(this)" aria-label="Välj det korrekta adjektivet">
                    <option value="">pick</option>
                    <option value="värre">värre</option>
                    <option value="sämre">sämre</option>
                </select>`,
                    translation: ""
                },
            ]
        },
        {
            words: [{
                    word: "Arbetet",
                    translation: "The work"
                },
                {
                    word: "var",
                    translation: "was"
                },
                {
                    word: "tufft",
                    translation: "tough"
                },
                {
                    word: "förra",
                    translation: "last"
                },
                {
                    word: "kvartalet,",
                    translation: "quarter"
                },
                {
                    word: "men",
                    translation: "but"
                },
                {
                    word: "det här",
                    translation: "this"
                },
                {
                    word: "kvartalet",
                    translation: "quarter"
                },
                {
                    word: "är",
                    translation: "is"
                },
                {
                    word: "det",
                    translation: "it"
                },
                {
                    word: `<select data-correct="värre" onchange="evaluateAnswer(this)" aria-label="Välj det korrekta adjektivet">
                    <option value="">pick</option>
                    <option value="värre">värre</option>
                    <option value="sämre">sämre</option>
                </select>`,
                    translation: ""
                },
            ]
        },
        {
            words: [{
                    word: "Stormens",
                    translation: "The storm's"
                },
                {
                    word: "skador",
                    translation: "damage"
                },
                {
                    word: "var",
                    translation: "was"
                },
                {
                    word: "omfattande,",
                    translation: "extensive"
                },
                {
                    word: "men",
                    translation: "but"
                },
                {
                    word: "det som",
                    translation: "what (that which)"
                },
                {
                    word: "följde",
                    translation: "followed"
                },
                {
                    word: "var",
                    translation: "was"
                },
                {
                    word: `<select data-correct="värre" onchange="evaluateAnswer(this)" aria-label="Välj det korrekta adjektivet">
                    <option value="">pick</option>
                    <option value="värre">värre</option>
                    <option value="sämre">sämre</option>
                </select>`,
                    translation: ""
                },
            ]
        },
        {
            words: [{
                    word: "Hon",
                    translation: "She"
                },
                {
                    word: "tyckte",
                    translation: "thought"
                },
                {
                    word: "att",
                    translation: "that"
                },
                {
                    word: "provet",
                    translation: "the test"
                },
                {
                    word: "var",
                    translation: "was"
                },
                {
                    word: "svårt,",
                    translation: "hard"
                },
                {
                    word: "men",
                    translation: "but"
                },
                {
                    word: "fann",
                    translation: "found"
                },
                {
                    word: "slutprovet",
                    translation: "the final exam"
                },
                {
                    word: `<select data-correct="värre" onchange="evaluateAnswer(this)" aria-label="Välj det korrekta adjektivet">
                    <option value="">pick</option>
                    <option value="värre">värre</option>
                    <option value="sämre">sämre</option>
                </select>`,
                    translation: ""
                },
            ]
        },
        {
            words: [{
                    word: "Diskussionen",
                    translation: "The discussion"
                },
                {
                    word: "var",
                    translation: "was"
                },
                {
                    word: "kaotisk",
                    translation: "chaotic"
                },
                {
                    word: "och",
                    translation: "and"
                },
                {
                    word: "efter",
                    translation: "after"
                },
                {
                    word: "lunch",
                    translation: "lunch"
                },
				{
                    word: "blev",
                    translation: "became"
                },
				{
                    word: "den",
                    translation: "it"
                },
                {
                    word: `<select data-correct="värre" onchange="evaluateAnswer(this)" aria-label="Välj det korrekta adjektivet">
                    <option value="">pick</option>
                    <option value="värre">värre</option>
                    <option value="sämre">sämre</option>
                </select>`,
                    translation: ""
                },
            ]
        },
        {
            words: [{
                    word: "Min",
                    translation: "My"
                },
                {
                    word: "telefon",
                    translation: "phone"
                },
                {
                    word: "fungerade",
                    translation: "worked"
                },
                {
                    word: "dåligt",
                    translation: "poorly"
                },
                {
                    word: "igår,",
                    translation: "yesterday"
                },
                {
                    word: "men",
                    translation: "but"
                },
                {
                    word: "idag",
                    translation: "today"
                },
                {
                    word: "är",
                    translation: "is"
                },
                {
                    word: "den",
                    translation: "it"
                },
                {
                    word: `<select data-correct="värre" onchange="evaluateAnswer(this)" aria-label="Välj det korrekta adjektivet">
                    <option value="">pick</option>
                    <option value="värre">värre</option>
                    <option value="sämre">sämre</option>
                </select>`,
                    translation: ""
                },
            ]
        },
        {
            words: [{
                    word: "Smärtan",
                    translation: "The pain"
                },
                {
                    word: "i",
                    translation: "in"
                },
                {
                    word: "min",
                    translation: "my"
                },
                {
                    word: "rygg",
                    translation: "back"
                },
                {
                    word: "var",
                    translation: "was"
                },
                {
                    word: "illa",
                    translation: "bad"
                },
                {
                    word: "redan",
                    translation: "already"
                },
                {
                    word: "igår,",
                    translation: "yesterday"
                },
                {
                    word: "men",
                    translation: "but"
                },
                {
                    word: "imorse",
                    translation: "this morning"
                },
                {
                    word: "var",
                    translation: "was"
                },
                {
                    word: "den",
                    translation: "it"
                },
                {
                    word: `<select data-correct="värre" onchange="evaluateAnswer(this)" aria-label="Välj det korrekta adjektivet">
                    <option value="">pick</option>
                    <option value="värre">värre</option>
                    <option value="sämre">sämre</option>
                </select>`,
                    translation: ""
                },
            ]
        },
        {
            words: [{
                    word: "De",
                    translation: "They"
                },
                {
                    word: "hade",
                    translation: "had"
                },
                {
                    word: "nästan",
                    translation: "almost"
                },			
                {
                    word: "inga",
                    translation: "no"
                },
                {
                    word: "pengar",
                    translation: "money"
                },
                {
                    word: "förra",
                    translation: "last"
                },
                {
                    word: "månaden,",
                    translation: "month"
                },
                {
                    word: "men",
                    translation: "but"
                },
                {
                    word: "den här",
                    translation: "this"
                },
                {
                    word: "månaden",
                    translation: "month"
                },
                {
                    word: "är",
                    translation: "is"
                },
                {
                    word: "det",
                    translation: "it"
                },
                {
                    word: `<select data-correct="värre" onchange="evaluateAnswer(this)" aria-label="Välj det korrekta adjektivet">
                    <option value="">pick</option>
                    <option value="värre">värre</option>
                    <option value="sämre">sämre</option>
                </select>`,
                    translation: ""
                },
            ]
        },
        {
            words: [{
                    word: "Lägenheten",
                    translation: "The apartment"
                },
                {
                    word: "var",
                    translation: "was"
                },
                {
                    word: "rörig",
                    translation: "messy"
                },
                {
                    word: "redan",
                    translation: "already"
                },
                {
                    word: "innan,",
                    translation: "before"
                },
                {
                    word: "men",
                    translation: "but"
                },
                {
                    word: "nu",
                    translation: "now"
                },
                {
                    word: "är",
                    translation: "is"
                },
                {
                    word: "den",
                    translation: "it"
                },
                {
                    word: `<select data-correct="värre" onchange="evaluateAnswer(this)" aria-label="Välj det korrekta adjektivet">
                    <option value="">pick</option>
                    <option value="värre">värre</option>
                    <option value="sämre">sämre</option>
                </select>`,
                    translation: ""
                },
            ]
        },
        {
            words: [{
                    word: "Hans",
                    translation: "His"
                },
                {
                    word: "prestation",
                    translation: "performance"
                },
                {
                    word: "låg",
                    translation: "was"
                },
                {
                    word: "under",
                    translation: "below"
                },
                {
                    word: "genomsnittet,",
                    translation: "average"
                },
                {
                    word: "men",
                    translation: "but"
                },
                {
                    word: "nu",
                    translation: "now"
                },
                {
                    word: "är",
                    translation: "is"
                },
                {
                    word: "den",
                    translation: "it"
                },
                {
                    word: `<select data-correct="värre" onchange="evaluateAnswer(this)" aria-label="Välj det korrekta adjektivet">
                    <option value="">pick</option>
                    <option value="värre">värre</option>
                    <option value="sämre">sämre</option>
                </select>`,
                    translation: ""
                },
            ]
        },
        {
            words: [{
                    word: "Han",
                    translation: "He"
                },
                {
                    word: "var",
                    translation: "was"
                },
                {
                    word: "okej",
                    translation: "okay"
                },
                {
                    word: "med",
                    translation: "with"
                },
                {
                    word: "sin",
                    translation: "his"
                },
                {
                    word: "bil,",
                    translation: "car"
                },
                {
                    word: "men",
                    translation: "but"
                },
                {
                    word: "nu",
                    translation: "now"
                },
                {
                    word: "känner",
                    translation: "feels"
                },
                {
                    word: "han",
                    translation: "he"
                },
                {
                    word: "att",
                    translation: "that"
                },
                {
                    word: "den",
                    translation: "it"
                },
                {
                    word: "presterar",
                    translation: "performs"
                },
                {
                    word: `<select data-correct="sämre" onchange="evaluateAnswer(this)" aria-label="Välj det korrekta adjektivet">
                    <option value="">pick</option>
                    <option value="värre">värre</option>
                    <option value="sämre">sämre</option>
                </select>`,
                    translation: ""
                },
            ]
        },
        {
            words: [{
                    word: "Mitt",
                    translation: "My"
                },
                {
                    word: "jobb",
                    translation: "job"
                },
                {
                    word: "var",
                    translation: "was"
                },
                {
                    word: "tillfredsställande,",
                    translation: "satisfying"
                },
                {
                    word: "men",
                    translation: "but"
                },
                {
                    word: "nu",
                    translation: "now"
                },
                {
                    word: "känns",
                    translation: "feels"
                },
                {
                    word: "det",
                    translation: "it"
                },
                {
                    word: `<select data-correct="sämre" onchange="evaluateAnswer(this)" aria-label="Välj det korrekta adjektivet">
                    <option value="">pick</option>
                    <option value="värre">värre</option>
                    <option value="sämre">sämre</option>
                </select>`,
                    translation: ""
                },
            ]
        },
        {
            words: [{
                    word: "Måltiden",
                    translation: "The meal"
                },
                {
                    word: "var",
                    translation: "was"
                },
                {
                    word: "utsökt",
                    translation: "delicious"
                },
                {
                    word: "förra",
                    translation: "last"
                },
                {
                    word: "gången,",
                    translation: "time"
                },
                {
                    word: "men",
                    translation: "but"
                },
                {
                    word: "den här",
                    translation: "this"
                },
                {
                    word: "gången",
                    translation: "time"
                },
                {
                    word: "smakar",
                    translation: "tastes"
                },
                {
                    word: "den",
                    translation: "it"
                },
                {
                    word: `<select data-correct="sämre" onchange="evaluateAnswer(this)" aria-label="Välj det korrekta adjektivet">
                    <option value="">pick</option>
                    <option value="värre">värre</option>
                    <option value="sämre">sämre</option>
                </select>`,
                    translation: ""
                },
            ]
        },
        {
            words: [{
                    word: "Hennes",
                    translation: "Her"
                },
                {
                    word: "trädgård",
                    translation: "garden"
                },
                {
                    word: "var",
                    translation: "was"
                },
                {
                    word: "som",
                    translation: "like"
                },
                {
                    word: "alla",
                    translation: "everyone"
                },
                {
                    word: "andras,",
                    translation: "else's"
                },
                {
                    word: "men",
                    translation: "but"
                },
                {
                    word: "nu",
                    translation: "now"
                },
                {
                    word: "är",
                    translation: "is"
                },
                {
                    word: "den",
                    translation: "it"
                },
                {
                    word: `<select data-correct="sämre" onchange="evaluateAnswer(this)" aria-label="Välj det korrekta adjektivet">
                    <option value="">pick</option>
                    <option value="värre">värre</option>
                    <option value="sämre">sämre</option>
                </select>`,
                    translation: ""
                }
            ]
        },
        {
            words: [{
                    word: "Företaget",
                    translation: "The company"
                },
                {
                    word: "var",
                    translation: "was"
                },
                {
                    word: "lönsamt",
                    translation: "profitable"
                },
                {
                    word: "förra",
                    translation: "last"
                },
                {
                    word: "året,",
                    translation: "year"
                },
                {
                    word: "men",
                    translation: "but"
                },
                {
                    word: "det här",
                    translation: "this"
                },
                {
                    word: "året",
                    translation: "year"
                },
                {
                    word: "går",
                    translation: "goes"
                },
                {
                    word: "det",
                    translation: "it"
                },
                {
                    word: `<select data-correct="sämre" onchange="evaluateAnswer(this)" aria-label="Välj det korrekta adjektivet">
                    <option value="">pick</option>
                    <option value="värre">värre</option>
                    <option value="sämre">sämre</option>
                </select>`,
                    translation: ""
                },
            ]
        },
        {
            words: [{
                    word: "Han",
                    translation: "He"
                },
                {
                    word: "var",
                    translation: "was"
                },
                {
                    word: "optimistisk",
                    translation: "optimistic"
                },
                {
                    word: "om",
                    translation: "about"
                },
                {
                    word: "projektet",
                    translation: "the project"
                },
                {
                    word: "förut,",
                    translation: "before"
                },
                {
                    word: "men",
                    translation: "but"
                },
                {
                    word: "nu",
                    translation: "now"
                },
                {
                    word: "går",
                    translation: "it's going"
                },
                {
                    word: "det",
                    translation: "it"
                },
                {
                    word: `<select data-correct="sämre" onchange="evaluateAnswer(this)" aria-label="Välj det korrekta adjektivet">
                    <option value="">pick</option>
                    <option value="värre">värre</option>
                    <option value="sämre">sämre</option>
                </select>`,
                    translation: ""
                },
            ]
        },
        {
            words: [{
                    word: "Filmen",
                    translation: "The movie"
                },
                {
                    word: "var",
                    translation: "was"
                },
                {
                    word: "spännande",
                    translation: "exciting"
                },
                {
                    word: "i början",
                    translation: "in the beginning"
                },
                {
                    word: "men",
                    translation: "but"
                },
                {
                    word: "sedan",
                    translation: "then"
                },
                {
                    word: "blev",
                    translation: "got"
                },
                {
                    word: "den",
                    translation: "it"
                },
                {
                    word: `<select data-correct="sämre" onchange="evaluateAnswer(this)" aria-label="Välj det korrekta adjektivet">
                    <option value="">pick</option>
                    <option value="värre">värre</option>
                    <option value="sämre">sämre</option>
                </select>`,
                    translation: ""
                },
            ]
        },
        {
            words: [{
                    word: "Hon",
                    translation: "She"
                },
                {
                    word: "kände sig",
                    translation: "felt"
                },
                {
                    word: "stark",
                    translation: "strong"
                },
                {
                    word: "efter",
                    translation: "after"
                },
                {
                    word: "träningen,",
                    translation: "the workout"
                },
                {
                    word: "men",
                    translation: "but"
                },
                {
                    word: "sedan",
                    translation: "later"
                },
                {
                    word: "blev",
                    translation: "became"
                },
                {
                    word: "det",
                    translation: "it"
                },
                {
                    word: `<select data-correct="sämre" onchange="evaluateAnswer(this)" aria-label="Välj det korrekta adjektivet">
                    <option value="">pick</option>
                    <option value="värre">värre</option>
                    <option value="sämre">sämre</option>
                </select>`,
                    translation: ""
                },
            ]
        },
        {
            words: [{
                    word: "De",
                    translation: "They"
                },
                {
                    word: "var",
                    translation: "were"
                },
                {
                    word: "entusiastiska",
                    translation: "enthusiastic"
                },
                {
                    word: "över",
                    translation: "about"
                },
                {
                    word: "resan,",
                    translation: "the trip"
                },
                {
                    word: "men",
                    translation: "but"
                },
                {
                    word: "den",
                    translation: "the"
                },
                {
                    word: "faktiska",
                    translation: "actual"
                },
                {
                    word: "upplevelsen",
                    translation: "experience"
                },
                {
                    word: "var",
                    translation: "was"
                },
                {
                    word: `<select data-correct="sämre" onchange="evaluateAnswer(this)" aria-label="Välj det korrekta adjektivet">
                    <option value="">pick</option>
                    <option value="värre">värre</option>
                    <option value="sämre">sämre</option>
                </select>`,
                    translation: ""
                },
            ]
        },
        {
            words: [{
                    word: "Mjukvaran",
                    translation: "The software"
                },
                {
                    word: "var",
                    translation: "was"
                },
                {
                    word: "okej",
                    translation: "okay"
                },
                {
                    word: "före",
                    translation: "before"
                },
                {
                    word: "uppdateringen,",
                    translation: "the update"
                },
                {
                    word: "men",
                    translation: "but"
                },
                {
                    word: "nu",
                    translation: "now"
                },
                {
                    word: "är",
                    translation: "is"
                },
                {
                    word: "den",
                    translation: "it"
                },
                {
                    word: `<select data-correct="sämre" onchange="evaluateAnswer(this)" aria-label="Välj det korrekta adjektivet">
                    <option value="">pick</option>
                    <option value="värre">värre</option>
                    <option value="sämre">sämre</option>
                </select>`,
                    translation: ""
                },
            ]
        },
        {
            words: [{
                    word: "Han",
                    translation: "He"
                },
                {
                    word: "verkade",
                    translation: "seemed"
                },
                {
                    word: "okej",
                    translation: "okay"
                },
                {
                    word: "innan,",
                    translation: "before"
                },
                {
                    word: "men",
                    translation: "but"
                },
                {
                    word: "sedan",
                    translation: "since"
                },
                {
                    word: "nyligen",
                    translation: "recently"
                },
                {
                    word: "är",
                    translation: "is"
                },
                {
                    word: "hans",
                    translation: "his"
                },
                {
                    word: "attityd",
                    translation: "attitude"
                },
                {
                    word: `<select data-correct="sämre" onchange="evaluateAnswer(this)" aria-label="Välj det korrekta adjektivet">
                    <option value="">pick</option>
                    <option value="värre">värre</option>
                    <option value="sämre">sämre</option>
                </select>`,
                    translation: ""
                },
            ]
        },
        {
            words: [{
                    word: "Laget",
                    translation: "The team"
                },
                {
                    word: "var",
                    translation: "was"
                },
                {
                    word: "enat,",
                    translation: "united"
                },
                {
                    word: "men",
                    translation: "but"
                },
                {
                    word: "deras",
                    translation: "their"
                },
                {
                    word: "samordning",
                    translation: "coordination"
                },
                {
                    word: "har",
                    translation: "has"
                },
                {
                    word: "blivit",
                    translation: "become"
                },
                {
                    word: `<select data-correct="sämre" onchange="evaluateAnswer(this)" aria-label="Välj det korrekta adjektivet">
                    <option value="">pick</option>
                    <option value="värre">värre</option>
                    <option value="sämre">sämre</option>
                </select>`,
                    translation: ""
                },
            ]
        },
        {
            words: [{
                    word: "Hennes",
                    translation: "Her"
                },
                {
                    word: "hälsa",
                    translation: "health"
                },
                {
                    word: "förbättrades,",
                    translation: "improved"
                },
                {
                    word: "men",
                    translation: "but"
                },
                {
                    word: "på senare tid",
                    translation: "lately"
                },
                {
                    word: "är",
                    translation: "is"
                },
                {
                    word: "den",
                    translation: "it"
                },
                {
                    word: `<select data-correct="sämre" onchange="evaluateAnswer(this)" aria-label="Välj det korrekta adjektivet">
                    <option value="">pick</option>
                    <option value="värre">värre</option>
                    <option value="sämre">sämre</option>
                </select>`,
                    translation: ""
                },
            ]
        },
        {
            words: [{
                    word: "Boken",
                    translation: "The book"
                },
                {
                    word: "var",
                    translation: "was"
                },
                {
                    word: "engagerande",
                    translation: "engaging"
                },
                {
                    word: "i",
                    translation: "in"
                },
                {
                    word: "de",
                    translation: "the"
                },
                {
                    word: "första",
                    translation: "first"
                },
                {
                    word: "kapitlen,",
                    translation: "chapters"
                },
                {
                    word: "men",
                    translation: "but"
                },
                {
                    word: "blev",
                    translation: "got"
                },
                {
                    word: `<select data-correct="sämre" onchange="evaluateAnswer(this)" aria-label="Välj det korrekta adjektivet">
                    <option value="">pick</option>
                    <option value="värre">värre</option>
                    <option value="sämre">sämre</option>
                </select>`,
                    translation: ""
                },
                {
                    word: "mot",
                    translation: "toward"
                },
                {
                    word: "slutet.",
                    translation: "the end."
                }
            ]
        },
        {
            words: [{
                    word: "Konserten",
                    translation: "The concert"
                },
                {
                    word: "började",
                    translation: "started"
                },
                {
                    word: "bra,",
                    translation: "well"
                },
                {
                    word: "men",
                    translation: "but"
                },
                {
                    word: "ljudkvaliteten",
                    translation: "the sound quality"
                },
                {
                    word: "blev",
                    translation: "got"
                },
                {
                    word: `<select data-correct="sämre" onchange="evaluateAnswer(this)" aria-label="Välj det korrekta adjektivet">
                    <option value="">pick</option>
                    <option value="värre">värre</option>
                    <option value="sämre">sämre</option>
                </select>`,
                    translation: ""
                },
            ]
        }


        // Lägg till fler meningar efter behov
    ];

    /**
     * Genererar HTML för en enda mening med verktygstips för varje ord.
     * @param {Object} sentence - Meningens objekt.
     * @param {number} sentenceIndex - Index för meningen för unika tooltip-ID:n.
     * @returns {string} - HTML-strängen för meningen.
     */
    function generateSentenceHTML(sentence, sentenceIndex) {
        // Replace the custom marker {{SELECT}} with the dropdown
        const sentenceWithDropdown = sentence.text.replace('{{SELECT}}', `
        <select data-correct="${sentence.correct}" onchange="evaluateAnswer(this)" aria-label="Välj det korrekta adjektivet">
            <option value="">pick</option>
            <option value="värre">värre</option>
            <option value="sämre">sämre</option>
        </select>
    `);

        // Wrap the entire processed sentence in a div
        return `<div class="sentence" data-state="none"><p>${sentenceWithDropdown}</p></div>`;
    }




    /**
     * Blanda en array med Fisher-Yates algoritm.
     * @param {Array} array - Arrayen att blanda.
     * @returns {Array} - Blandet array.
     */
    function generateSentenceHTML(sentence, sentenceIndex) {
        const processedWords = sentence.words.map((item, wordIndex) => {
            const {
                word,
                translation
            } = item;
            return translation ?
                `<span class="word" aria-describedby="tooltip-${sentenceIndex}-${wordIndex}" tabindex="0">
                        ${word}
                        <span class="tooltip" id="tooltip-${sentenceIndex}-${wordIndex}">${translation}</span>
                    </span>` :
                word;
        });

        const sentenceWithTooltips = processedWords.join(' ');
        const sentenceHTML = sentenceWithTooltips.replace('__.', `<select data-correct="${sentence.correct}" onchange="evaluateAnswer(this)" aria-label="Choose the correct adjective">
            <option value="">pick</option>
            <option value="värre">värre</option>
            <option value="sämre">sämre</option>
        </select>.`);

        return `<div class="sentence" data-state="none"><p>${sentenceHTML}</p></div>`;
    }

    // Fisher-Yates shuffle algorithm to shuffle an array.
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    // Render sentences in a shuffled order.
    function renderSentences() {
        const shuffledSentences = shuffleArray([...sentences]);
        const sentencesHTML = shuffledSentences.map((sentence, index) => generateSentenceHTML(sentence, index)).join('');
        document.getElementById('sentences').innerHTML = sentencesHTML;
    }

    // Evaluates the user's answer and updates the score and UI accordingly.
    function evaluateAnswer(selectElement) {
        const correctAnswer = selectElement.getAttribute('data-correct');
        const selectedValue = selectElement.value;
        const parent = selectElement.closest('.sentence');

        // Get the current state and determine the new state
        const priorState = parent.getAttribute('data-state') || 'none';
        let newState;

        if (selectedValue === correctAnswer) {
            newState = 'correct';
        } else if (selectedValue !== "") {
            newState = 'incorrect';
        } else {
            newState = 'none';
        }

        let delta = 0;
        if (priorState === 'none') {
            delta = newState === 'correct' ? 1 : (newState === 'incorrect' ? -1 : 0);
        } else if (priorState === 'correct') {
            delta = newState === 'incorrect' ? -2 : (newState === 'none' ? -1 : 0);
        } else if (priorState === 'incorrect') {
            delta = newState === 'correct' ? 2 : (newState === 'none' ? 1 : 0);
        }

        updateScore(delta);

        // Update the UI with the new state
        parent.classList.remove('correct', 'incorrect');
        parent.classList.add(newState);
        parent.setAttribute('data-state', newState);

        checkAllCorrect();
    }


    // Updates the score display based on value change.
    function updateScore(value) {
        score += value;
        document.getElementById('score').textContent = score;
        checkForMaxScore(score);
    }

    // Check if the score has reached max and opens the congratulations modal if so.
    function checkForMaxScore(currentScore) {
        if (currentScore >= sentences.length) {
            openModal('congratulationsModal');
        }
    }

    // Checks if all sentences are correctly answered.
    function checkAllCorrect() {
        const allCorrect = Array.from(document.querySelectorAll('.sentence')).every(sentence => sentence.classList.contains('correct'));
        if (allCorrect) {
            openModal('congratulationsModal');
        }
    }

    // Opens a modal by its ID.
    function openModal(modalId) {
        const modal = document.getElementById(modalId);
        if (modal) {
            modal.style.display = 'flex';
            modal.classList.add('show');
        }
    }

    // Closes a modal by its ID.
    function closeModal(modalId) {
        const modal = document.getElementById(modalId);
        if (modal) {
            modal.style.display = 'none';
            modal.classList.remove('show');
        }
    }

    // Close modal when clicking outside of the modal content.
    window.addEventListener('click', (event) => {
        const infoModal = document.getElementById('infoModal');
        const congratulationsModal = document.getElementById('congratulationsModal');

        if (event.target === infoModal) {
            closeModal('infoModal');
        } else if (event.target === congratulationsModal) {
            closeModal('congratulationsModal');
        }
    });

    // Resets the quiz and score, then re-renders sentences.
    function startOver() {
        renderSentences();
        resetScore();
        closeModal('congratulationsModal');
    }

    // Resets the score to zero.
    function resetScore() {
        score = 0;
        document.getElementById('score').textContent = score;
    }

    // Sets dark mode based on enabled status.
    function setDarkMode(enabled) {
        if (enabled) {
            document.body.classList.add('dark-mode');
            localStorage.setItem('darkMode', 'enabled');
        } else {
            document.body.classList.remove('dark-mode');
            localStorage.setItem('darkMode', 'disabled');
        }
    }

    // Initializes modals and dark mode toggle.
    function initializeModalsAndDarkMode() {
        const darkModeToggle = document.getElementById('darkModeSwitch');
        const isDarkModeEnabled = localStorage.getItem('darkMode') === 'enabled';
        setDarkMode(isDarkModeEnabled);
        darkModeToggle.checked = isDarkModeEnabled;

        darkModeToggle.addEventListener('change', function() {
            setDarkMode(this.checked);
        });
    }

    // Initialize the application once the DOM is fully loaded.
    document.addEventListener('DOMContentLoaded', () => {
        renderSentences();
        initializeModalsAndDarkMode();
        resetScore();
    }); 
	</script>
</body>
</html>
