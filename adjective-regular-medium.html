<!DOCTYPE html>
<html lang="sv">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adjective Agreement (indefinite regular): medium level</title>

    <!-- Font Awesome CDN for Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
<style>
/* Reset and Base Styles */
*,
*::before,
*::after {
	box-sizing: border-box;
	margin: 0;
	padding: 0;
}

body {
	font-family: Arial, sans-serif;
	background-color: #f9fafb;
	color: #2d3748;
	line-height: 1.6;
	font-size: 16px;
	display: flex;
	flex-direction: column;
	justify-content: flex-start;
	align-items: center;
	min-height: 100vh;
	padding: 20px;
	overflow-y: auto;
	position: relative;
	transition: background-color 0.3s, color 0.3s;
}

body.dark-mode {
	background-color: #121212;
	color: #e2e8f0;
}

/* Close Button Styling */
.close-button {
	float: right;
	padding: 5px;
	cursor: pointer;
	font-size: 18px;
	background-color: #ccc;
	border: none;
	border-radius: 50%;
	line-height: 20px;
	width: 30px;
	height: 30px;
	display: flex;
	align-items: center;
	justify-content: center;
	transition: background-color 0.3s, transform 0.3s;
}

body.dark-mode .close-button {
	background-color: #555;
	color: #ffcccc;
}

.close-button:hover {
	background-color: #f44336;
	transform: scale(1.2) rotate(90deg);
	color: white;
}

body.dark-mode .close-button:hover {
	background-color: #ff6666;
	color: white;
	transform: scale(1.2) rotate(90deg);
}

/* Container */
.container {
	background-color: #ffffff;
	padding: 40px 30px;
	border-radius: 12px;
	box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
	max-width: 850px;
	width: 100%;
	text-align: center;
	position: relative;
	transition: background-color 0.3s, box-shadow 0.3s;
	margin-top: 20px;
}

body.dark-mode .container {
	background-color: #1a202c;
	box-shadow: 0 10px 25px rgba(255, 255, 255, 0.1);
}

/* Dark Mode Toggle */
.dark-mode-toggle {
	justify-content: flex-start;
	padding: 0 10px;
	gap: 10px;
	cursor: default;
}

/* Page Title */
.page-title {
	text-align: center;
	color: #333333;
	font-size: 28px;
	margin-bottom: 20px;
	line-height: 1.4;
	padding-top: 10px;
	position: relative;
	z-index: 1;
	transition: color 0.3s ease, background-color 0.3s ease;
}

body.dark-mode .page-title {
	color: #ffffff;
}

/* Score, Start Over, and Dark Mode Toggle Container */
.score-container {
	position: fixed;
	top: 20px;
	right: 40px;
	display: flex;
	flex-direction: column;
	align-items: stretch;
	width: 150px;
	z-index: 1001;
	gap: 10px;
	transition: background-color 0.3s ease, box-shadow 0.3s ease;
}

/* Sentence Styling */
.sentence {
	background-color: #f7fafc;
	padding: 20px;
	padding-bottom: 5px;
	border-radius: 8px;
	box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
	position: relative;
	transition: background-color 0.3s, border 0.3s;
	border-left: 6px solid transparent;
	text-align: left;
	/* Removed invalid data-state property */
}

body.dark-mode .sentence {
	background-color: #2d3748;
	box-shadow: 0 4px 10px rgba(255, 255, 255, 0.05);
}

.sentence.correct {
	border-left: 6px solid #38a169;
	background-color: #cdffcd;
	transition: border 0.3s, background-color 0.3s;
}

body.dark-mode .sentence.correct {
	border-left: 6px solid #38a169;
	background-color: #22543d;
}

.sentence.incorrect {
	border-left: 6px solid #e53e3e;
	background-color: #FFADB0;
	transition: border 0.3s, background-color 0.3s;
}

body.dark-mode .sentence.incorrect {
	border-left: 6px solid #e53e3e;
	background-color: #742a2a;
}

.sentence p {
	font-size: 1.1rem;
	margin-bottom: 10px;
	transition: color 0.3s;
}

body.dark-mode .sentence p {
	color: #edf2f7;
}

/* Select Element Styling */
.sentence select {
	padding: 4px 4px;
	font-size: inherit;
	border: 1px solid #cbd5e0;
	border-radius: 6px;
	background-color: #edf2f7;
	cursor: pointer;
	transition: border-color 0.3s, background-color 0.3s;
	width: auto;
	appearance: auto;
	-webkit-appearance: auto;
	-moz-appearance: auto;
	background-image: initial;
	margin-left: 10px;
	/* Adjust this value as needed */
	margin-right: 10px;
	/* Adjust this value as needed */
}

body.dark-mode .sentence select {
	background-color: #4a5568;
	color: #edf2f7;
	border: 1px solid #718096;
}

.sentence select:focus {
	border-color: #3182ce;
	outline: none;
	box-shadow: 0 0 0 2px rgba(49, 130, 206, 0.2);
}

body.dark-mode .sentence select:focus {
	border-color: #63b3ed;
	box-shadow: 0 0 0 2px rgba(99, 179, 237, 0.2);
}

/* Sentences */
.sentences {
	display: grid;
	grid-template-columns: 1fr;
	gap: 20px;
}

/* Slider Container */
.switch {
	position: relative;
	width: 40px;
	height: 20px;
	display: inline-block;
}

/* Hide Default Checkbox */
.switch input {
	display: none;
}

/* Slider Appearance */
.slider {
	position: absolute;
	cursor: pointer;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background-color: #ccc;
	transition: 0.4s;
	border-radius: 20px;
}

.slider::before {
	position: absolute;
	content: "";
	height: 14px;
	width: 14px;
	left: 3px;
	bottom: 3px;
	background-color: white;
	transition: 0.4s;
	border-radius: 50%;
}

/* Slider Active State */
.switch input:checked+.slider {
	background-color: #007BFF;
}

.switch input:checked+.slider::before {
	transform: translateX(20px);
}

/* Start Over Button */
.start-over {
	background-color: #007BFF;
	color: white;
	cursor: pointer;
	border: none;
	display: flex;
	align-items: center;
	justify-content: center;
	transition: background-color 0.3s ease;
}

.start-over:hover {
	background-color: #0056b3;
	color: white;
}

/* Word Styling */
.word {
	position: relative;
	cursor: pointer;
	color: #2d3748;
	transition: color 0.3s, background-color 0.3s;
	display: inline-block;
	border-radius: 4px;
}

body.dark-mode .word {
	color: #edf2f7;
}

.word::after {
	content: '';
	position: absolute;
	left: 50%;
	bottom: -2px;
	width: 100%;
	height: 3px;
	background-color: currentColor;
	transform: translateX(-50%) scaleX(0);
	transform-origin: center;
	transition: transform 0.3s ease;
}

.word:hover::after,
.word:focus::after {
	transform: translateX(-50%) scaleX(1);
}

.word:hover,
.word:focus {
	background-color: rgba(45, 55, 72, 0.1);
}

body.dark-mode .word:hover,
body.dark-mode .word:focus {
	background-color: rgba(226, 232, 240, 0.1);
}

/* Unified Button Styling */
.score,
.dark-mode-toggle,
.start-over {
	width: 100%;
	height: 40px;
	padding: 0 10px;
	box-sizing: border-box;
	font-size: 16px;
	text-align: center;
	background-color: #fff;
	color: #333;
	border-radius: 5px;
	box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
	display: flex;
	align-items: center;
	justify-content: center;
	transition: background-color 0.3s, color 0.3s;
	cursor: pointer;
	border: none;
}

/* Modal */
.modal {
	display: none;
	position: fixed;
	left: 0;
	top: 0;
	width: 100%;
	height: 100%;
	background: rgba(0, 0, 0, 0.5);
	z-index: 1000;
	justify-content: center;
	align-items: center;
	opacity: 0;
	transition: opacity 0.3s ease-in-out;
}

.modal-content {
	background: white;
	color: black;
	padding: 30px;
	/* N√•got mer luft f√∂r l√§sbarhet */
	border-radius: 8px;
	box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
	text-align: left;
	/* √Ñndrat fr√•n center till left */
	max-width: 600px;
	width: 90%;
	/* Lite bredare p√• mobiler */
	max-height: 80vh;
	/* S√§kerst√§ller att den inte t√§cker hela sk√§rmen p√• h√∂jden */
	overflow-y: auto;
	/* G√∂r inneh√•llet rullbart om det √§r l√•ngt */
	transform: translateY(-20px);
	transition: transform 0.3s ease-in-out;
}

/* Specifik styling f√∂r element inuti modalen */
.modal-content h2 {
	margin-top: 0;
	margin-bottom: 20px;
	font-size: 1.5rem;
}

.modal-content p {
	margin-bottom: 15px;
	line-height: 1.6;
}

.modal-content ul {
	margin-left: 20px;
	/* Ger punktlistan ett korrekt indrag */
	margin-bottom: 15px;
}

.modal-content li {
	margin-bottom: 10px;
}

body.dark-mode .modal-content {
	background-color: #1a202c;
	color: #edf2f7;
	border: 1px solid #2d3748;
	/* Lade till en tunn kant f√∂r definition */
}

.modal.show {
	display: flex;
	opacity: 1;
}

.modal.show .modal-content {
	transform: translateY(0);
}

/* üö´ Block entire site on small screens */
@media (max-width: 700px) {

    body > *:not(#mobileBlockModal) {
        display: none !important;
    }

    #mobileBlockModal {
        display: flex !important;
        position: fixed;
        inset: 0;
        z-index: 9999;
        opacity: 1;
    }
}
</style>

</head>

<body>

    <!-- Menu Items for Desktop -->
    <div class="score-container">
        <!-- Score Display for Desktop -->
        <div class="score">Score:&nbsp;<span class="score-display">0</span>&nbsp;/&nbsp;<span class="score-max"></span></div>
        <!-- Dark Mode Toggle for Desktop -->
        <div class="dark-mode-toggle">
            <label class="switch">
                <input type="checkbox" id="darkModeSwitch">
                <span class="slider"></span>
            </label>
            <span>Dark mode</span>
        </div>
        <!-- Info Button for Desktop -->
        <button class="start-over" id="info-button" onclick="openModal('infoModal')">
            <i class="fas fa-info-circle" style="margin-right: 8px;"></i> Info
        </button>
        <!-- Go to harder version of the exercise (no gender indicated) -->
        <button class="start-over" onclick="goToEasyVersion()">
            <i class="fas fa-arrow-up-right-from-square" style="margin-right: 8px;"></i> Easy level
        </button>
        <button class="start-over" onclick="goToHardVersion()">
            <i class="fas fa-arrow-up-right-from-square" style="margin-right: 8px;"></i> Hard level
        </button>
        <!-- Start Over Button for Desktop -->
        <button class="start-over" onclick="startOver()">
            <i class="fas fa-rotate-left" style="margin-right: 8px;"></i> Start over
        </button>
    </div>

    <!-- Page Title -->
    <h1 class="page-title">Adjective Agreement (indefinite regular): medium level</h1>
    <p>Read the "Info" to understand what this exercise is about.</p>

    <!-- Main Content Container -->
    <div class="container">
        <div class="sentences" id="sentences"></div>
    </div>
    <div class="modal" id="infoModal" role="dialog" aria-modal="true" aria-labelledby="infoModalTitle">
        <div class="modal-content">
            <button class="close-button" type="button" onclick="closeModal('infoModal')" aria-label="Close modal">&times;</button>
            <h2 id="infoModalTitle">Information</h2>
            <p>            <p>Nearly 85% of Swedish adjectives are regular (if one also includes those that show only minor spelling variation due to standard orthographic rules), meaning they all follow a very straightforward inflection pattern: <strong>basic (non-neuter) form</strong>, <strong> neuter +t</strong>, and <strong>plural +a</strong>. Select the correct adjective form to ensure it agrees with the noun it describes.</p><br />
			<h2 id="infoModalTitle">A defining feature of this level</h2>
			<p>No translations are provided, you are expected to know the gender of the head noun, and you must also select the correct article when the noun is in the singular. <strong>There is an easier and a harder version</strong> of this exercise available (see the menu).
			</p>
        </div>
    </div>

    <!-- Congratulations Modal -->
    <div class="modal" id="congratulationsModal" role="dialog" aria-modal="true" aria-labelledby="congratulationsModalTitle">
        <div class="modal-content">
            <button class="close-button" type="button" onclick="closeModal('congratulationsModal')" aria-label="Close modal">&times;</button>
            <h2 id="congratulationsModalTitle">Congratulations!</h2>
            <p>You have answered all the questions correctly! Did you manage to do it without making any mistakes?</p>
        </div>
    </div>

<div class="modal" id="mobileBlockModal" role="dialog" aria-modal="true">
    <div class="modal-content" style="text-align:center;">
        <h2>Not available on mobile</h2>
        <p>
            This page ‚Äî an exercise on Swedish adjectives ‚Äî is not designed for mobile phones,
            mainly because many of the interactive features do not work well on small touchscreens.
        </p>
    </div>
</div>	

<script>

const sentences = [

{
    words: [
        { sentencePart: "Vi tr√§ffade" },
        {
            sentencePart: `<select data-correct="en trevlig" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en trevlig">en trevlig</option>
<option value="ett trevlig">ett trevlig</option>
<option value="en trevligt">en trevligt</option>
<option value="ett trevligt">ett trevligt</option>
<option value="trevliga">trevliga</option>
            </select>`,
        },
        { sentencePart: "kvinna." }
    ]
},
{
    words: [
        { sentencePart: "Butiken har" },
        {
            sentencePart: `<select data-correct="en trevlig" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en trevlig">en trevlig</option>
<option value="ett trevlig">ett trevlig</option>
<option value="en trevligt">en trevligt</option>
<option value="ett trevligt">ett trevligt</option>
<option value="trevliga">trevliga</option>
            </select>`,
        },
        { sentencePart: "atmosf√§r." }
    ]
},
{
    words: [
        { sentencePart: "Han k√∂pte" },
        {
            sentencePart: `<select data-correct="ett trevligt" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en trevlig">en trevlig</option>
<option value="ett trevlig">ett trevlig</option>
<option value="en trevligt">en trevligt</option>
<option value="ett trevligt">ett trevligt</option>
<option value="trevliga">trevliga</option>
            </select>`,
        },
        { sentencePart: "paraply." }
    ]
},
{
    words: [
        { sentencePart: "Melodin har" },
        {
            sentencePart: `<select data-correct="ett trevligt" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en trevlig">en trevlig</option>
<option value="ett trevlig">ett trevlig</option>
<option value="en trevligt">en trevligt</option>
<option value="ett trevligt">ett trevligt</option>
<option value="trevliga">trevliga</option>
            </select>`,
        },
        { sentencePart: "tema." }
    ]
},
{
    words: [
        { sentencePart: "Hon har" },
        {
            sentencePart: `<select data-correct="trevliga" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en trevlig">en trevlig</option>
<option value="ett trevlig">ett trevlig</option>
<option value="en trevligt">en trevligt</option>
<option value="ett trevligt">ett trevligt</option>
<option value="trevliga">trevliga</option>
            </select>`,
        },
        { sentencePart: "kollegor." }
    ]
},
{
    words: [
        { sentencePart: "Han fick" },
        {
            sentencePart: `<select data-correct="en otrevlig" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en otrevlig">en otrevlig</option>
<option value="ett otrevlig">ett otrevlig</option>
<option value="en otrevligt">en otrevligt</option>
<option value="ett otrevligt">ett otrevligt</option>
<option value="otrevliga">otrevliga</option>
            </select>`,
        },
        { sentencePart: "√∂verraskning." }
    ]
},
{
    words: [
        { sentencePart: "Vi hade" },
        {
            sentencePart: `<select data-correct="ett otrevligt" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en otrevlig">en otrevlig</option>
<option value="ett otrevlig">ett otrevlig</option>
<option value="en otrevligt">en otrevligt</option>
<option value="ett otrevligt">ett otrevligt</option>
<option value="otrevliga">otrevliga</option>
            </select>`,
        },
        { sentencePart: "m√∂te p√• jobbet idag." }
    ]
},
{
    words: [
        { sentencePart: "Han hittade" },
        {
            sentencePart: `<select data-correct="ett otrevligt" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en otrevlig">en otrevlig</option>
<option value="ett otrevlig">ett otrevlig</option>
<option value="en otrevligt">en otrevligt</option>
<option value="ett otrevligt">ett otrevligt</option>
<option value="otrevliga">otrevliga</option>
            </select>`,
        },
        { sentencePart: "foto." }
    ]
},
{
    words: [
        { sentencePart: "Det var" },
        {
            sentencePart: `<select data-correct="ett otrevligt" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en otrevlig">en otrevlig</option>
<option value="ett otrevlig">ett otrevlig</option>
<option value="en otrevligt">en otrevligt</option>
<option value="ett otrevligt">ett otrevligt</option>
<option value="otrevliga">otrevliga</option>
            </select>`,
        },
        { sentencePart: "bem√∂tande." }
    ]
},
{
    words: [
        { sentencePart: "Filmen hade" },
        {
            sentencePart: `<select data-correct="otrevliga" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en otrevlig">en otrevlig</option>
<option value="ett otrevlig">ett otrevlig</option>
<option value="en otrevligt">en otrevligt</option>
<option value="ett otrevligt">ett otrevligt</option>
<option value="otrevliga">otrevliga</option>
            </select>`,
        },
        { sentencePart: "karakt√§rer." }
    ]
},
{
    words: [
        { sentencePart: "Hon b√§r" },
        {
            sentencePart: `<select data-correct="en fin" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en fin">en fin</option>
<option value="ett fin">ett fin</option>
<option value="en fint">en fint</option>
<option value="ett fint">ett fint</option>
<option value="fina">fina</option>
            </select>`,
        },
        { sentencePart: "kl√§nning." }
    ]
},
{
    words: [
        { sentencePart: "Han k√∂pte" },
        {
            sentencePart: `<select data-correct="en fin" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en fin">en fin</option>
<option value="ett fin">ett fin</option>
<option value="en fint">en fint</option>
<option value="ett fint">ett fint</option>
<option value="fina">fina</option>
            </select>`,
        },
        { sentencePart: "bil." }
    ]
},
{
    words: [
        { sentencePart: "Hon b√§r" },
        {
            sentencePart: `<select data-correct="ett fint" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en fin">en fin</option>
<option value="ett fin">ett fin</option>
<option value="en fint">en fint</option>
<option value="ett fint">ett fint</option>
<option value="fina">fina</option>
            </select>`,
        },
        { sentencePart: "smycke." }
    ]
},
{
    words: [
        { sentencePart: "Du har gjort" },
        {
            sentencePart: `<select data-correct="ett fint" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en fin">en fin</option>
<option value="ett fin">ett fin</option>
<option value="en fint">en fint</option>
<option value="ett fint">ett fint</option>
<option value="fina">fina</option>
            </select>`,
        },
        { sentencePart: "arbete." }
    ]
},
{
    words: [
        { sentencePart: "P√• v√§ggen h√§nger" },
        {
            sentencePart: `<select data-correct="fina" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en fin">en fin</option>
<option value="ett fin">ett fin</option>
<option value="en fint">en fint</option>
<option value="ett fint">ett fint</option>
<option value="fina">fina</option>
            </select>`,
        },
        { sentencePart: "tavlor." }
    ]
},
{
    words: [
        { sentencePart: "I albumet fanns" },
        {
            sentencePart: `<select data-correct="fina" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en fin">en fin</option>
<option value="ett fin">ett fin</option>
<option value="en fint">en fint</option>
<option value="ett fint">ett fint</option>
<option value="fina">fina</option>
            </select>`,
        },
        { sentencePart: "foton." }
    ]
},
{
    words: [
        { sentencePart: "Min lillebror har" },
        {
            sentencePart: `<select data-correct="en ful" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en ful">en ful</option>
<option value="ett ful">ett ful</option>
<option value="en fult">en fult</option>
<option value="ett fult">ett fult</option>
<option value="fula">fina</option>
            </select>`,
        },
        { sentencePart: "tr√∂ja." }
    ]
},
{
    words: [
        { sentencePart: "Jag hittade" },
        {
            sentencePart: `<select data-correct="en ful" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en ful">en ful</option>
<option value="ett ful">ett ful</option>
<option value="en fult">en fult</option>
<option value="ett fult">ett fult</option>
<option value="fula">fula</option>
            </select>`,
        },
        { sentencePart: "ost i kylsk√•pet." }
    ]
},
{
    words: [
        { sentencePart: "V√§ggen har" },
        {
            sentencePart: `<select data-correct="ett fult" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en ful">en ful</option>
<option value="ett ful">ett ful</option>
<option value="en fult">en fult</option>
<option value="ett fult">ett fult</option>
<option value="fula">fula</option>
            </select>`,
        },
        { sentencePart: "m√§rke." }
    ]
},
{
    words: [
        { sentencePart: "Hon har tyv√§rr" },
        {
            sentencePart: `<select data-correct="ett fult" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en ful">en ful</option>
<option value="ett ful">ett ful</option>
<option value="en fult">en fult</option>
<option value="ett fult">ett fult</option>
<option value="fula">fula</option>
            </select>`,
        },
        { sentencePart: "leende." }
    ]
},
{
    words: [
        { sentencePart: "Han hade" },
        {
            sentencePart: `<select data-correct="fula" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en ful">en ful</option>
<option value="ett ful">ett ful</option>
<option value="en fult">en fult</option>
<option value="ett fult">ett fult</option>
<option value="fula">fula</option>
            </select>`,
        },
        { sentencePart: "kl√§der." }
    ]
},
{
    words: [
        { sentencePart: "H√§r finns bara" },
        {
            sentencePart: `<select data-correct="fula" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en ful">en ful</option>
<option value="ett ful">ett ful</option>
<option value="en fult">en fult</option>
<option value="ett fult">ett fult</option>
<option value="fula">fula</option>
            </select>`,
        },
        { sentencePart: "byggnader." }
    ]
},
{
    words: [
        { sentencePart: "Hon k√∂r" },
        {
            sentencePart: `<select data-correct="en dyr" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en dyr">en dyr</option>
<option value="ett dyr">ett dyr</option>
<option value="en dyrt">en dyrt</option>
<option value="ett dyrt">ett dyrt</option>
<option value="dyra">dyra</option>
            </select>`,
        },
        { sentencePart: "sportbil." }
    ]
},
{
    words: [
        { sentencePart: "Det blev" },
        {
            sentencePart: `<select data-correct="en dyr" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en dyr">en dyr</option>
<option value="ett dyr">ett dyr</option>
<option value="en dyrt">en dyrt</option>
<option value="ett dyrt">ett dyrt</option>
<option value="dyra">dyra</option>
            </select>`,
        },
        { sentencePart: "resa." }
    ]
},
{
    words: [
        { sentencePart: "H√§stsport √§r" },
        {
            sentencePart: `<select data-correct="ett dyrt" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en dyr">en dyr</option>
<option value="ett dyr">ett dyr</option>
<option value="en dyrt">en dyrt</option>
<option value="ett dyrt">ett dyrt</option>
<option value="dyra">dyra</option>
            </select>`,
        },
        { sentencePart: "n√∂je." }
    ]
},
{
    words: [
        { sentencePart: "De bor i" },
        {
            sentencePart: `<select data-correct="ett dyrt" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en dyr">en dyr</option>
<option value="ett dyr">ett dyr</option>
<option value="en dyrt">en dyrt</option>
<option value="ett dyrt">ett dyrt</option>
<option value="dyra">dyra</option>
            </select>`,
        },
        { sentencePart: "omr√•de." }
    ]
},
{
    words: [
        { sentencePart: "Butiken s√§ljer" },
        {
            sentencePart: `<select data-correct="dyra" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en dyr">en dyr</option>
<option value="ett dyr">ett dyr</option>
<option value="en dyrt">en dyrt</option>
<option value="ett dyrt">ett dyrt</option>
<option value="dyra">dyra</option>
            </select>`,
        },
        { sentencePart: "klockor." }
    ]
},
{
    words: [
        { sentencePart: "Vi tittade p√•" },
        {
            sentencePart: `<select data-correct="dyra" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en dyr">en dyr</option>
<option value="ett dyr">ett dyr</option>
<option value="en dyrt">en dyrt</option>
<option value="ett dyrt">ett dyrt</option>
<option value="dyra">dyra</option>
            </select>`,
        },
        { sentencePart: "l√§genheter." }
    ]
},
{
    words: [
        { sentencePart: "Jag hittade" },
        {
            sentencePart: `<select data-correct="en billig" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en billig">en billig</option>
<option value="ett billig">ett billig</option>
<option value="en billigt">en billigt</option>
<option value="ett billigt">ett billigt</option>
<option value="billiga">billiga</option>
            </select>`,
        },
        { sentencePart: "biljett." }
    ]
},
{
    words: [
        { sentencePart: "Hon √§ter" },
        {
            sentencePart: `<select data-correct="en billig" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en billig">en billig</option>
<option value="ett billig">ett billig</option>
<option value="en billigt">en billigt</option>
<option value="ett billigt">ett billigt</option>
<option value="billiga">billiga</option>
            </select>`,
        },
        { sentencePart: "lunch." }
    ]
},
{
    words: [
        { sentencePart: "Vandrarhemmet erbjuder" },
        {
            sentencePart: `<select data-correct="ett billigt" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en billig">en billig</option>
<option value="ett billig">ett billig</option>
<option value="en billigt">en billigt</option>
<option value="ett billigt">ett billigt</option>
<option value="billiga">billiga</option>
            </select>`,
        },
        { sentencePart: "boende." }
    ]
},
{
    words: [
        { sentencePart: "Hon hittade" },
        {
            sentencePart: `<select data-correct="ett billigt" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en billig">en billig</option>
<option value="ett billig">ett billig</option>
<option value="en billigt">en billigt</option>
<option value="ett billigt">ett billigt</option>
<option value="billiga">billiga</option>
            </select>`,
        },
        { sentencePart: "b√§lte." }
    ]
},
{
    words: [
        { sentencePart: "Aff√§ren har" },
        {
            sentencePart: `<select data-correct="billiga" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en billig">en billig</option>
<option value="ett billig">ett billig</option>
<option value="en billigt">en billigt</option>
<option value="ett billigt">ett billigt</option>
<option value="billiga">billiga</option>
            </select>`,
        },
        { sentencePart: "gr√∂nsaker." }
    ]
},
{
    words: [
        { sentencePart: "De s√§ljer" },
        {
            sentencePart: `<select data-correct="billiga" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en billig">en billig</option>
<option value="ett billig">ett billig</option>
<option value="en billigt">en billigt</option>
<option value="ett billigt">ett billigt</option>
<option value="billiga">billiga</option>
            </select>`,
        },
        { sentencePart: "skor h√§r." }
    ]
},
{
    words: [
        { sentencePart: "Han ber√§ttade" },
        {
            sentencePart: `<select data-correct="en rolig" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en rolig">en rolig</option>
<option value="ett rolig">ett rolig</option>
<option value="en roligt">en roligt</option>
<option value="ett roligt">ett roligt</option>
<option value="roliga">roliga</option>
            </select>`,
        },
        { sentencePart: "historia." }
    ]
},
{
    words: [
        { sentencePart: "Hon har" },
        {
            sentencePart: `<select data-correct="en rolig" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en rolig">en rolig</option>
<option value="ett rolig">ett rolig</option>
<option value="en roligt">en roligt</option>
<option value="ett roligt">ett roligt</option>
<option value="roliga">roliga</option>
            </select>`,
        },
        { sentencePart: "hobby." }
    ]
},
{
    words: [
        { sentencePart: "Vi hamnade p√•" },
        {
            sentencePart: `<select data-correct="ett roligt" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en rolig">en rolig</option>
<option value="ett rolig">ett rolig</option>
<option value="en roligt">en roligt</option>
<option value="ett roligt">ett roligt</option>
<option value="roliga">roliga</option>
            </select>`,
        },
        { sentencePart: "st√§lle." }
    ]
},
{
    words: [
        { sentencePart: "Vi hittade" },
        {
            sentencePart: `<select data-correct="ett roligt" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en rolig">en rolig</option>
<option value="ett rolig">ett rolig</option>
<option value="en roligt">en roligt</option>
<option value="ett roligt">ett roligt</option>
<option value="roliga">roliga</option>
            </select>`,
        },
        { sentencePart: "foto." }
    ]
},
{
    words: [
        { sentencePart: "Boken handlar om" },
        {
            sentencePart: `<select data-correct="roliga" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en rolig">en rolig</option>
<option value="ett rolig">ett rolig</option>
<option value="en roligt">en roligt</option>
<option value="ett roligt">ett roligt</option>
<option value="roliga">roliga</option>
            </select>`,
        },
        { sentencePart: "yrken." }
    ]
},
{
    words: [
        { sentencePart: "Det fanns" },
        {
            sentencePart: `<select data-correct="trevliga" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en trevlig">en trevlig</option>
<option value="ett trevlig">ett trevlig</option>
<option value="en trevligt">en trevligt</option>
<option value="ett trevligt">ett trevligt</option>
<option value="trevliga">trevliga</option>
            </select>`,
        },
        { sentencePart: "kaf√©er √∂verallt." }
    ]
},
{
    words: [
        { sentencePart: "Jag h√∂rde" },
        {
            sentencePart: `<select data-correct="otrevliga" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en otrevlig">en otrevlig</option>
<option value="ett otrevlig">ett otrevlig</option>
<option value="en otrevligt">en otrevligt</option>
<option value="ett otrevligt">ett otrevligt</option>
<option value="otrevliga">otrevliga</option>
            </select>`,
        },
        { sentencePart: "rykten." }
    ]
},
{
    words: [
        { sentencePart: "De hade planerat" },
        {
            sentencePart: `<select data-correct="roliga" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en rolig">en rolig</option>
<option value="ett rolig">ett rolig</option>
<option value="en roligt">en roligt</option>
<option value="ett roligt">ett roligt</option>
<option value="roliga">roliga</option>
            </select>`,
        },
        { sentencePart: "aktiviteter." }
    ]
},
{
    words: [
        { sentencePart: "Vi s√•g" },
        {
            sentencePart: `<select data-correct="en tr√•kig" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en tr√•kig">en tr√•kig</option>
<option value="ett tr√•kig">ett tr√•kig</option>
<option value="en tr√•kigt">en tr√•kigt</option>
<option value="ett tr√•kigt">ett tr√•kigt</option>
<option value="tr√•kiga">tr√•kiga</option>
            </select>`,
        },
        { sentencePart: "pj√§s." }
    ]
},
{
    words: [
        { sentencePart: "Han har" },
        {
            sentencePart: `<select data-correct="en tr√•kig" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en tr√•kig">en tr√•kig</option>
<option value="ett tr√•kig">ett tr√•kig</option>
<option value="en tr√•kigt">en tr√•kigt</option>
<option value="ett tr√•kigt">ett tr√•kigt</option>
<option value="tr√•kiga">tr√•kiga</option>
            </select>`,
        },
        { sentencePart: "attityd." }
    ]
},
{
    words: [
        { sentencePart: "Det var" },
        {
            sentencePart: `<select data-correct="ett tr√•kigt" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en tr√•kig">en tr√•kig</option>
<option value="ett tr√•kig">ett tr√•kig</option>
<option value="en tr√•kigt">en tr√•kigt</option>
<option value="ett tr√•kigt">ett tr√•kigt</option>
<option value="tr√•kiga">tr√•kiga</option>
            </select>`,
        },
        { sentencePart: "m√∂te." }
    ]
},
{
    words: [
        { sentencePart: "De utf√∂rde" },
        {
            sentencePart: `<select data-correct="ett tr√•kigt" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en tr√•kig">en tr√•kig</option>
<option value="ett tr√•kig">ett tr√•kig</option>
<option value="en tr√•kigt">en tr√•kigt</option>
<option value="ett tr√•kigt">ett tr√•kigt</option>
<option value="tr√•kiga">tr√•kiga</option>
            </select>`,
        },
        { sentencePart: "arbete." }
    ]
},
{
    words: [
        { sentencePart: "Lektionen bestod av" },
        {
            sentencePart: `<select data-correct="tr√•kiga" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en tr√•kig">en tr√•kig</option>
<option value="ett tr√•kig">ett tr√•kig</option>
<option value="en tr√•kigt">en tr√•kigt</option>
<option value="ett tr√•kigt">ett tr√•kigt</option>
<option value="tr√•kiga">tr√•kiga</option>
            </select>`,
        },
        { sentencePart: "√∂vningar." }
    ]
},
{
    words: [
        { sentencePart: "Vi l√§ste" },
        {
            sentencePart: `<select data-correct="tr√•kiga" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en tr√•kig">en tr√•kig</option>
<option value="ett tr√•kig">ett tr√•kig</option>
<option value="en tr√•kigt">en tr√•kigt</option>
<option value="ett tr√•kigt">ett tr√•kigt</option>
<option value="tr√•kiga">tr√•kiga</option>
            </select>`,
        },
        { sentencePart: "dikter." }
    ]
},
{
    words: [
        { sentencePart: "Vi hade" },
        {
            sentencePart: `<select data-correct="en h√§rlig" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en h√§rlig">en h√§rlig</option>
<option value="ett h√§rlig">ett h√§rlig</option>
<option value="en h√§rligt">en h√§rligt</option>
<option value="ett h√§rligt">ett h√§rligt</option>
<option value="h√§rliga">h√§rliga</option>
            </select>`,
        },
        { sentencePart: "dag." }
    ]
},
{
    words: [
        { sentencePart: "Hon sjunger" },
        {
            sentencePart: `<select data-correct="en h√§rlig" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en h√§rlig">en h√§rlig</option>
<option value="ett h√§rlig">ett h√§rlig</option>
<option value="en h√§rligt">en h√§rligt</option>
<option value="ett h√§rligt">ett h√§rligt</option>
<option value="h√§rliga">h√§rliga</option>
            </select>`,
        },
        { sentencePart: "s√•ng." }
    ]
},
{
    words: [
        { sentencePart: "De hittade" },
        {
            sentencePart: `<select data-correct="ett h√§rligt" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en h√§rlig">en h√§rlig</option>
<option value="ett h√§rlig">ett h√§rlig</option>
<option value="en h√§rligt">en h√§rligt</option>
<option value="ett h√§rligt">ett h√§rligt</option>
<option value="h√§rliga">h√§rliga</option>
            </select>`,
        },
        { sentencePart: "bageri." }
    ]
},
{
    words: [
        { sentencePart: "L√§genheten ligger i" },
        {
            sentencePart: `<select data-correct="ett h√§rligt" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en h√§rlig">en h√§rlig</option>
<option value="ett h√§rlig">ett h√§rlig</option>
<option value="en h√§rligt">en h√§rligt</option>
<option value="ett h√§rligt">ett h√§rligt</option>
<option value="h√§rliga">h√§rliga</option>
            </select>`,
        },
        { sentencePart: "omr√•de." }
    ]
},
{
    words: [
        { sentencePart: "Tavlan har" },
        {
            sentencePart: `<select data-correct="h√§rliga" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en h√§rlig">en h√§rlig</option>
<option value="ett h√§rlig">ett h√§rlig</option>
<option value="en h√§rligt">en h√§rligt</option>
<option value="ett h√§rligt">ett h√§rligt</option>
<option value="h√§rliga">h√§rliga</option>
            </select>`,
        },
        { sentencePart: "f√§rger." }
    ]
},
{
    words: [
        { sentencePart: "De har" },
        {
            sentencePart: `<select data-correct="h√§rliga" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en h√§rlig">en h√§rlig</option>
<option value="ett h√§rlig">ett h√§rlig</option>
<option value="en h√§rligt">en h√§rligt</option>
<option value="ett h√§rligt">ett h√§rligt</option>
<option value="h√§rliga">h√§rliga</option>
            </select>`,
        },
        { sentencePart: "minnen fr√•n semestern." }
    ]
},
{
    words: [
        { sentencePart: "Han ligger i" },
        {
            sentencePart: `<select data-correct="en sk√∂n" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en sk√∂n">en sk√∂n</option>
<option value="ett sk√∂n">ett sk√∂n</option>
<option value="en sk√∂nt">en sk√∂nt</option>
<option value="ett sk√∂nt">ett sk√∂nt</option>
<option value="sk√∂na">sk√∂na</option>
            </select>`,
        },
        { sentencePart: "s√§ng." }
    ]
},
{
    words: [
        { sentencePart: "Hon sitter i" },
        {
            sentencePart: `<select data-correct="en sk√∂n" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en sk√∂n">en sk√∂n</option>
<option value="ett sk√∂n">ett sk√∂n</option>
<option value="en sk√∂nt">en sk√∂nt</option>
<option value="ett sk√∂nt">ett sk√∂nt</option>
<option value="sk√∂na">sk√∂na</option>
            </select>`,
        },
        { sentencePart: "f√•t√∂lj." }
    ]
},
{
    words: [
        { sentencePart: "L√•ten har" },
        {
            sentencePart: `<select data-correct="ett sk√∂nt" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en sk√∂n">en sk√∂n</option>
<option value="ett sk√∂n">ett sk√∂n</option>
<option value="en sk√∂nt">en sk√∂nt</option>
<option value="ett sk√∂nt">ett sk√∂nt</option>
<option value="sk√∂na">sk√∂na</option>
            </select>`,
        },
        { sentencePart: "tempo." }
    ]
},
{
    words: [
        { sentencePart: "Han har" },
        {
            sentencePart: `<select data-correct="ett sk√∂nt" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en sk√∂n">en sk√∂n</option>
<option value="ett sk√∂n">ett sk√∂n</option>
<option value="en sk√∂nt">en sk√∂nt</option>
<option value="ett sk√∂nt">ett sk√∂nt</option>
<option value="sk√∂na">sk√∂na</option>
            </select>`,
        },
        { sentencePart: "t√§cke." }
    ]
},
{
    words: [
        { sentencePart: "Soffan har" },
        {
            sentencePart: `<select data-correct="sk√∂na" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en sk√∂n">en sk√∂n</option>
<option value="ett sk√∂n">ett sk√∂n</option>
<option value="en sk√∂nt">en sk√∂nt</option>
<option value="ett sk√∂nt">ett sk√∂nt</option>
<option value="sk√∂na">sk√∂na</option>
            </select>`,
        },
        { sentencePart: "kuddar." }
    ]
},
{
    words: [
        { sentencePart: "De hade" },
        {
            sentencePart: `<select data-correct="sk√∂na" onchange="evaluateAnswer(this)" aria-label="V√§lj r√§tt alternativ">
            <option value="">Select</option>
<option value="en sk√∂n">en sk√∂n</option>
<option value="ett sk√∂n">ett sk√∂n</option>
<option value="en sk√∂nt">en sk√∂nt</option>
<option value="ett sk√∂nt">ett sk√∂nt</option>
<option value="sk√∂na">sk√∂na</option>
            </select>`,
        },
        { sentencePart: "sommarkv√§llar." }
    ]
}



];

let score=0;

// Fisher-Yates shuffle algorithm to shuffle an array.
function shuffleArray(array) {
	for (let i=array.length - 1; i > 0; i--) {
		const j=Math.floor(Math.random() * (i + 1));
		[array[i],
		array[j]]=[array[j],
		array[i]];
	}

	return array;
}

function shuffleOptions(select) {
    const firstOption = select.options[0]; // "Select"
    const options = Array.from(select.options).slice(1);

    for (let i = options.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [options[i], options[j]] = [options[j], options[i]];
    }

    select.innerHTML = "";
    select.appendChild(firstOption);
    options.forEach(opt => select.appendChild(opt));
}
	
function toggleGender(button) {
	const sentenceDiv=button.closest('.sentence');
	sentenceDiv.classList.toggle('show-gender');

	// √Ñndra knapptext
	if (sentenceDiv.classList.contains('show-gender')) {
		button.textContent="Hide gender";
	}

	else {
		button.textContent="Show gender";
	}
}

function capitalize(word) {
	return word.charAt(0).toUpperCase()+word.slice(1);
}


function generateSentenceHTML(sentence, index) {
    const isAboutSentence = sentence.words[0].sentencePart.trim().startsWith("(About");

    const sentenceHTML = sentence.words.map(item => {
        if (!item.sentencePart.includes("<select")) return item.sentencePart;

        const tempDiv = document.createElement("div");
        tempDiv.innerHTML = item.sentencePart.trim();
        const select = tempDiv.querySelector("select");

		shuffleOptions(select);

        if (isAboutSentence) {
            const correct = select.getAttribute("data-correct");
            select.setAttribute("data-correct", capitalize(correct));

            Array.from(select.options).forEach(opt => {
                if (opt.value !== "") {
                    opt.textContent = capitalize(opt.textContent);
                    opt.value = capitalize(opt.value);
                }
            });
        }

        return select.outerHTML;
    }).join(' ');

    // ‚õî INGEN tooltip p√• medium
    return `<div class="sentence" data-state="none">
        <p>${sentenceHTML}</p>
    </div>`;
}

// Render sentences in a shuffled order.
function renderSentences() {
	const shuffledSentences=shuffleArray([...sentences]);
	const sentencesHTML=shuffledSentences.map((sentence, index)=> generateSentenceHTML(sentence, index)).join('');
	document.getElementById('sentences').innerHTML=sentencesHTML;
}

// Evaluates the user's answer and updates the score and UI accordingly.
function evaluateAnswer(selectElement) {
	const correctAnswer=selectElement.getAttribute('data-correct');
	const selectedValue=selectElement.value;
	const parent=selectElement.closest('.sentence');

	// Spara den gamla statusen innan vi uppdaterar
	const wasCorrect=parent.classList.contains('correct');

	// Uppdatera UI: ta bort gamla f√§rger
	parent.classList.remove('correct', 'incorrect');

	let newState='none';

	if (selectedValue===correctAnswer) {
		newState='correct';
		parent.classList.add('correct');

		// Om den INTE var r√§tt innan, men √§r r√§tt nu: +1
		if ( !wasCorrect) {
			updateScore(1);
		}
	}

	else if (selectedValue !=="") {
		newState='incorrect';
		parent.classList.add('incorrect');

		// Om den var r√§tt innan, men nu √§r fel: -1
		if (wasCorrect) {
			updateScore(-1);
		}
	}

	else {

		// Om anv√§ndaren v√§ljer "Select" (tomt)
		if (wasCorrect) {
			updateScore(-1);
		}
	}

	parent.setAttribute('data-state', newState);
	checkAllCorrect();
}


// Updates the score display based on value change.
function updateScore(value) {
	score+=value;

	// H√§mta det faktiska antalet meningar dynamiskt
	const maxScore=sentences.length;

	// F√∂rhindra att po√§ngen g√•r utanf√∂r gr√§nserna (0 till max)
	// Notera: Om du vill till√•ta minuspo√§ng, anv√§nd -maxScore
	if (score > maxScore) {
		score=maxScore;
	}

	else if (score < 0) {
		score=0;
	}

	// Uppdatera alla element med klassen "score-display"
	document.querySelectorAll('.score-display').forEach((element)=> {
			element.textContent=score;
		});

	checkForMaxScore(score);
}

// Check if the score has reached max and opens the congratulations modal if so.
function checkForMaxScore(currentScore) {
	if (currentScore >=sentences.length) {
		openModal('congratulationsModal');
	}
}

// Checks if all sentences are correctly answered.
function checkAllCorrect() {
	const allCorrect=Array.from(document.querySelectorAll('.sentence')).every(sentence=> sentence.classList.contains('correct'));

	if (allCorrect) {
		openModal('congratulationsModal');
	}
}

// Opens a modal by its ID.
function openModal(modalId) {
	const modal=document.getElementById(modalId);

	if (modal) {
		modal.style.display='flex';
		modal.classList.add('show');
	}
}

// Closes a modal by its ID.
function closeModal(modalId) {
	const modal=document.getElementById(modalId);

	if (modal) {
		modal.style.display='none';
		modal.classList.remove('show');
	}
}

// Close modal when clicking outside of the modal content
window.addEventListener('click', (event)=> {
		const infoModal=document.getElementById('infoModal');
		const congratulationsModal=document.getElementById('congratulationsModal');

		if (event.target===infoModal) {
			closeModal('infoModal');
		}

		else if (event.target===congratulationsModal) {
			closeModal('congratulationsModal');
		}
	});

// Function to toggle mobile menu
function toggleMenu() {
	const menuOverlay=document.getElementById('menuOverlay');
	menuOverlay.classList.toggle('active');
}

// Function to toggle dark mode
function toggleDarkMode() {
	document.body.classList.toggle('dark-mode');

	const isDarkModeEnabled=document.body.classList.contains('dark-mode');
	localStorage.setItem('darkMode', isDarkModeEnabled ? 'enabled' : 'disabled');
}

function goToEasyVersion() {
	window.location.href="https://learnswedish.github.io/html/adjective-regular-easy.html";
}

function goToHardVersion() {
	window.location.href="https://learnswedish.github.io/html/adjective-regular-hard.html";
}

// Open the Info modal and close the menu
function showInfo() {
	openModal('infoModal');
	toggleMenu(); // St√§ng menyn efter att ha visat info
}

// Start over and close the menu
function startOverAndCloseMenu() {
	startOver();
	toggleMenu(); // St√§ng menyn efter att ha startat om
}

// Initialize the dark mode toggle with stored preference
function initializeModalsAndDarkMode() {
	const darkModeToggle = document.getElementById('darkModeSwitch');

	/* ---- Dark mode ---- */
	const isDarkModeEnabled = localStorage.getItem('darkMode') === 'enabled';
	document.body.classList.toggle('dark-mode', isDarkModeEnabled);
	darkModeToggle.checked = isDarkModeEnabled;
	darkModeToggle.addEventListener('change', toggleDarkMode);
}

// Function to update the maximum score in the HTML
function updateMaxScore() {
	const maxScore=sentences.length;

	document.querySelectorAll('.score-max').forEach((element)=> {
			element.textContent=maxScore;
		});
}

// Resets the quiz and score, then re-renders sentences.
function startOver() {
	renderSentences();
	resetScore();
	closeModal('congratulationsModal');
}

// Resets the score to zero.
function resetScore() {
	score=0;

	document.querySelectorAll('.score-display').forEach((element)=> {
			element.textContent=score;
		});

	// √Öterst√§ll alla meningars tillst√•nd
	document.querySelectorAll('.sentence').forEach(sentence=> {
			sentence.classList.remove('correct', 'incorrect');
			sentence.setAttribute('data-state', 'none');
		});
}

// Initialize the application once the DOM is fully loaded.
document.addEventListener('DOMContentLoaded', ()=> {
		const isMobile=window.matchMedia("(max-width: 700px)").matches;

		if (isMobile) return;

		renderSentences();
		updateMaxScore(); // S√§tt maxpo√§ng direkt
		resetScore(); // S√§tt startpo√§ng
		initializeModalsAndDarkMode(); // Init toggles sist
	});
</script>

</body>
</html>


