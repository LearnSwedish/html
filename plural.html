<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plural Exercise</title>
    <!-- Font Awesome for Icons (Optional) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha512-Fo3rlrQkTyKI2h0tU6p6EY+P3ZcI3hUCrE5xE9uhVbjoTv/xvvFXkuqygsR6vJyW0VxStTfJ9NqvGQbF1gSxFw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        /* Basic Reset */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        /* Root Variables for Easy Theming */
        :root {
            --primary-color: #007BFF;
            --primary-color-dark: #66b3ff;
            --background-light: linear-gradient(120deg, #f0f4f7, #dfe9ef);
            --background-dark: linear-gradient(120deg, #2b2b2b, #121212);
            --text-color-light: #333;
            --text-color-dark: #e0e0e0;
            --correct-color: #28a745;
            --wrong-color: #dc3545;
            --transition-speed: 0.3s;
        }

        /* Body Styling */
        body {
            font-family: 'Arial', sans-serif;
            background: var(--background-light);
            color: var(--text-color-light);
            margin: 0;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            transition: background var(--transition-speed) ease, color var(--transition-speed) ease;
            position: relative; /* To ensure fixed elements are positioned relative to the viewport */
        }

        /* Dark Mode Styling */
        body.dark-mode {
            background: var(--background-dark);
            color: var(--text-color-dark);
        }

        /* Toggle Container */
        .toggle-container {
            position: fixed; /* Fixes the container relative to the viewport */
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 1000; /* Ensures the toggle stays on top */
        }

        .toggle-container span {
            font-size: 1rem;
            color: inherit;
        }

        /* Toggle Switch Styling */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 26px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-switch .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: background-color var(--transition-speed);
            border-radius: 26px;
        }

        .toggle-switch .slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: transform var(--transition-speed);
            border-radius: 50%;
        }

        .toggle-switch input:checked + .slider {
            background-color: var(--primary-color);
        }

        .toggle-switch input:checked + .slider:before {
            transform: translateX(24px);
        }

        /* Quiz Container Styling */
        .quiz-container {
            background: #ffffff;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            border-radius: 16px;
            max-width: 600px;
            width: 90%;
            padding: 30px;
            margin: 20px;
            position: relative;
            transition: background var(--transition-speed) ease, color var(--transition-speed) ease;
        }

        body.dark-mode .quiz-container {
            background: #2c2c2c;
        }

        h1 {
            text-align: center;
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 2rem;
            transition: color var(--transition-speed) ease;
        }

        body.dark-mode h1 {
            color: var(--primary-color-dark);
        }

        .progress-container {
            width: 100%;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            height: 24px;
            margin-bottom: 25px;
        }

        body.dark-mode .progress-container {
            background: #444;
        }

        .progress-bar {
            height: 100%;
            background: var(--primary-color);
            width: 0%;
            transition: width var(--transition-speed) ease-in-out;
        }

        body.dark-mode .progress-bar {
            background: var(--primary-color-dark);
        }

        .scoreboard {
            display: flex;
            justify-content: space-between;
            margin-bottom: 25px;
        }

        .score {
            font-size: 1.2rem;
            color: inherit;
        }

        /* Prevent "Correct" and "Mistakes" counts from jumping when they reach two digits */
        .score span {
            display: inline-block;
            width: 24px; /* Adjust as needed */
            text-align: center;
            font-weight: bold;
        }

        body.dark-mode .score {
            color: var(--text-color-dark);
        }

        .question {
            font-size: 1.6rem;
            text-align: center;
            margin-bottom: 25px;
        }

        .options {
            list-style-type: none;
            padding: 0;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .options li {
            width: 100%;
        }

        .option-button {
            width: 100%;
            padding: 15px;
            font-size: 1.1rem;
            border: 2px solid var(--primary-color);
            border-radius: 10px;
            background-color: #f9f9f9;
            color: var(--primary-color);
            cursor: pointer;
            transition: all var(--transition-speed);
            text-align: center;
            min-height: 50px;
        }

        .option-button:hover {
            background-color: var(--primary-color);
            color: #ffffff;
            transform: scale(1.02);
        }

        body.dark-mode .option-button {
            background-color: #555;
            color: var(--primary-color-dark);
            border: 2px solid var(--primary-color-dark);
        }

        body.dark-mode .option-button:hover {
            background-color: var(--primary-color-dark);
            color: #1a1a1a;
        }

        .option-button.correct {
            background-color: var(--correct-color);
            color: #ffffff;
            border-color: var(--correct-color);
        }

        .option-button.wrong {
            background-color: var(--wrong-color);
            color: #ffffff;
            border-color: var(--wrong-color);
        }

        /* Ensure wrong buttons are red in dark mode */
        body.dark-mode .option-button.wrong {
            background-color: var(--wrong-color);
            color: #ffffff;
            border-color: var(--wrong-color);
        }

        /* Ensure correct buttons are green in dark mode */
        body.dark-mode .option-button.correct {
            background-color: var(--correct-color);
            color: #ffffff;
            border-color: var(--correct-color);
        }

        /* Prevent focus styles from affecting buttons */
        .option-button:focus {
            outline: none;
            box-shadow: none;
        }

        .feedback {
            text-align: center;
            font-weight: bold;
            margin-top: 20px;
            font-size: 1.3rem;
            min-height: 40px; /* Reserving space to prevent jumping */
            transition: opacity var(--transition-speed) ease;
            opacity: 0;
        }

        .feedback.correct {
            color: var(--correct-color);
        }

        .feedback.wrong {
            color: var(--wrong-color);
        }

        body.dark-mode .feedback.correct {
            color: var(--correct-color);
        }

        body.dark-mode .feedback.wrong {
            color: var(--wrong-color);
        }

        .result {
            text-align: center;
            font-size: 1.6rem;
            display: none;
        }

        .result h2 {
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        body.dark-mode .result h2 {
            color: var(--primary-color-dark);
        }

        .result p {
            margin-bottom: 25px;
        }

        .result button {
            background-color: var(--primary-color);
            color: #ffffff;
            border: none;
            padding: 12px 24px;
            font-size: 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color var(--transition-speed);
        }

        .result button:hover {
            background-color: #0056b3;
        }

        /* Fade Animation */
        .fade-out {
            opacity: 0;
            transition: opacity var(--transition-speed) ease-out;
        }

        .fade-in {
            opacity: 0;
            transition: opacity var(--transition-speed) ease-in;
        }

        .fade-in-active {
            opacity: 1;
        }

        /* Responsive Design Enhancements */

        /* Tablets and Small Screens */
        @media (max-width: 768px) {
            /* Adjust the toggle container position */
            .toggle-container {
                top: 15px;
                right: 15px;
            }

            /* Reduce padding in the quiz container */
            .quiz-container {
                padding: 25px;
            }

            /* Increase the main heading font size */
            h1 {
                font-size: 1.8rem;
            }

            /* Increase the question font size and adjust margin */
            .question {
                font-size: 1.4rem;
                margin-bottom: 20px;
            }

            /* Enhance option buttons for better touch targets */
            .option-button {
                font-size: 1rem;
                padding: 14px;
                min-height: 48px;
            }

            /* Increase feedback text size */
            .feedback {
                font-size: 1.2rem;
            }

            /* Increase result text size */
            .result {
                font-size: 1.4rem;
            }

            /* Adjust result button padding and font size */
            .result button {
                padding: 10px 20px;
                font-size: 0.95rem;
            }

            /* Increase gap between option buttons */
            .options {
                gap: 20px;
            }
        }

        /* Mobile Phones */
        @media (max-width: 480px) {
            /* Further adjust the toggle container for smaller screens */
            .toggle-container {
                top: 10px;
                right: 10px;
                gap: 8px;
            }

            /* Scale down the toggle switch */
            .toggle-switch {
                width: 40px;
                height: 20px;
            }

            /* Adjust the slider circle size and position */
            .toggle-switch .slider:before {
                height: 16px;
                width: 16px;
                left: 2px;
                bottom: 2px;
            }

            /* Adjust the slider circle movement for smaller toggle */
            .toggle-switch input:checked + .slider:before {
                transform: translateX(20px);
            }

            /* Make the quiz container full width and remove side margins */
            .quiz-container {
                width: 100%;
                margin: 0;
                padding: 20px;
            }

            /* Further reduce the main heading font size */
            h1 {
                font-size: 1.6rem;
            }

            /* Further reduce the question font size and adjust margin */
            .question {
                font-size: 1.3rem;
                margin-bottom: 18px;
            }

            /* Further reduce option button font size and padding */
            .option-button {
                font-size: 0.95rem;
                padding: 12px;
                min-height: 45px;
            }

            /* Further reduce feedback text size */
            .feedback {
                font-size: 1.1rem;
            }

            /* Further reduce result text size */
            .result {
                font-size: 1.3rem;
            }

            /* Further reduce result button padding and font size */
            .result button {
                padding: 8px 16px;
                font-size: 0.9rem;
            }

            /* Ensure sufficient spacing between option buttons */
            .options {
                gap: 20px;
            }
        }

        /* Prevent hover styles on touch devices */
        @media (hover: none) and (pointer: coarse) {
            .option-button:hover {
                background-color: #f9f9f9; /* Revert to original background */
                color: var(--primary-color);
                transform: none;
            }
        }
    </style>
</head>
<body>

    <!-- Dark Mode Toggle Switch -->
    <div class="toggle-container">
        <span id="modeLabel">Dark mode</span>
        <label class="toggle-switch">
            <input type="checkbox" id="darkModeToggle" onchange="toggleDarkMode()">
            <span class="slider"></span>
        </label>
    </div>

    <div class="quiz-container">
        <h1>Plural Exercise</h1>
        <div class="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
        <div class="scoreboard">
            <div class="score">Correct: <span id="correct-score">0</span></div>
            <div class="score">Mistakes: <span id="wrong-score">0</span></div>
        </div>
        <div id="quiz">
            <div id="question-container" class="fade-in">
                <div class="question" id="question">Fråga här</div>
                <ul class="options">
                    <li><button class="option-button" onclick="selectAnswer(this)">Alternativ 1</button></li>
                    <li><button class="option-button" onclick="selectAnswer(this)">Alternativ 2</button></li>
                    <li><button class="option-button" onclick="selectAnswer(this)">Alternativ 3</button></li>
                    <li><button class="option-button" onclick="selectAnswer(this)">Alternativ 4</button></li>
                </ul>
                <div class="feedback" id="feedback"></div>
            </div>
            <div class="result" id="result">
                <h2>Quiz completed!</h2>
                <p>You got <span id="correct-count">0</span> answer(s) correct and made <span id="wrong-count">0</span> mistake(s).</p>
                <button onclick="restartQuiz()">Start over</button>
            </div>
        </div>
    </div>

    <script>
        // Quiz Data
        let quizData = [
            { singular: "(en) näsa", correct: "näsor", incorrect: ["näser", "näsar", "näsa"] },
            { singular: "(en) kind", correct: "kinder", incorrect: ["kindar", "kindor", "kind"] },
            { singular: "(en) tand", correct: "tänder", incorrect: ["tandar", "tandor", "tand"] },
            { singular: "(en) hand", correct: "händer", incorrect: ["handar", "handor", "hand"] },
            { singular: "(en) fot", correct: "fötter", incorrect: ["fotar", "fotor", "fot"] },
            { singular: "(en) mage", correct: "magar", incorrect: ["mager", "magor", "mage"] },
            { singular: "(en) rygg", correct: "ryggar", incorrect: ["rygger", "ryggor", "rygg"] },
            { singular: "(en) tå", correct: "tår", incorrect: ["tåar", "tåor", "tå"] },
            { singular: "(en) arm", correct: "armar", incorrect: ["armer", "armor", "arm"] },
            { singular: "(en) axel", correct: "axlar", incorrect: ["axler", "axlor", "axel"] },
            { singular: "(en) kropp", correct: "kroppar", incorrect: ["kropper", "kroppor", "kropp"] },
            { singular: "(en) panna", correct: "pannor", incorrect: ["panner", "pannar", "panna"] },
            { singular: "(en) mun", correct: "munnar", incorrect: ["munner", "munnor", "mun"] },
            { singular: "(ett) öra", correct: "öron", incorrect: ["örar", "öror", "öra"] },
            { singular: "(ett) finger", correct: "fingrar", incorrect: ["fingrer", "fingror", "finger"] },
            { singular: "(en) mamma", correct: "mammor", incorrect: ["mammer", "mammar", "mamma"] },
            { singular: "(en) pappa", correct: "pappor", incorrect: ["papper", "pappar", "pappa"] },
            { singular: "(en) pojke", correct: "pojkar", incorrect: ["pojker", "pojkor", "pojke"] },
            { singular: "(en) flicka", correct: "flickor", incorrect: ["flicker", "flickar", "flicka"] },
            { singular: "(en) son", correct: "söner", incorrect: ["sonar", "sonor", "son"] },
            { singular: "(en) dotter", correct: "döttrar", incorrect: ["döttrer", "döttror", "dotter"] },
            { singular: "(en) partner", correct: "partners", incorrect: ["partnerar", "partneror", "partner"] },
            { singular: "(en) kompis", correct: "kompisar", incorrect: ["kompiser", "kompisor", "kompis"] },
            { singular: "(en) vän", correct: "vänner", incorrect: ["vänar", "vänor", "vän"] },
            { singular: "(en) släkting", correct: "släktingar", incorrect: ["släktinger", "släktingor", "släkting"] },
            { singular: "(en) granne", correct: "grannar", incorrect: ["granner", "grannor", "granne"] },
            { singular: "(en) fru", correct: "fruar", incorrect: ["fruer", "fruor", "fru"] },
            { singular: "(en) man", correct: "män", incorrect: ["manar", "manor", "man"] },
            { singular: "(en) bror", correct: "bröder", incorrect: ["brorar", "broror", "bror"] },
            { singular: "(en) syster", correct: "systrar", incorrect: ["systrer", "systror", "syster"] },
            { singular: "(en) bil", correct: "bilar", incorrect: ["biler", "bilor", "bil"] },
            { singular: "(en) cykel", correct: "cyklar", incorrect: ["cykler", "cyklor", "cykel"] },
            { singular: "(en) buss", correct: "bussar", incorrect: ["busser", "bussor", "buss"] },
            { singular: "(en) moped", correct: "mopeder", incorrect: ["mopedar", "mopedor", "moped"] },
            { singular: "(en) motorcykel", correct: "motorcyklar", incorrect: ["motorcykler", "motorcyklor", "motorcykel"] },
            { singular: "(en) promenad", correct: "promenader", incorrect: ["promenadar", "promenador", "promenad"] },
            { singular: "(en) lastbil", correct: "lastbilar", incorrect: ["lastbiler", "lastbilor", "lastbil"] },
            { singular: "(en) husvagn", correct: "husvagnar", incorrect: ["husvagner", "husvagnor", "husvagn"] },
            { singular: "(en) rullstol", correct: "rullstolar", incorrect: ["rullstoler", "rullstolor", "rullstol"] },
            { singular: "(en) tunnelbana", correct: "tunnelbanor", incorrect: ["tunnelbaner", "tunnelbanar", "tunnelbana"] },
            { singular: "(en) segelbåt", correct: "segelbåtar", incorrect: ["segelbåter", "segelbåtor", "segelbåt"] },
            { singular: "(en) raket", correct: "raketer", incorrect: ["raketar", "raketor", "raket"] },
            { singular: "(en) flygplats", correct: "flygplatser", incorrect: ["flygplatsar", "flygplatsor", "flygplats"] },
            { singular: "(en) ost", correct: "ostar", incorrect: ["oster", "ostor", "ost"] },
            { singular: "(en) korv", correct: "korvar", incorrect: ["korver", "korvor", "korv"] },
            { singular: "(en) apelsin", correct: "apelsiner", incorrect: ["apelsinar", "apelsinor", "apelsin"] },
            { singular: "(en) morot", correct: "morötter", incorrect: ["morotar", "morotor", "morot"] },
            { singular: "(en) sallad", correct: "sallader", incorrect: ["salladar", "sallador", "sallad"] },
            { singular: "(en) soppa", correct: "soppor", incorrect: ["sopper", "soppar", "soppa"] },
            { singular: "(en) hamburgare", correct: "hamburgare", incorrect: ["hamburgar", "hamburgor", "hamburgarer"] },
            { singular: "(en) pizza", correct: "pizzor", incorrect: ["pizzer", "pizzar", "pizza"] },
            { singular: "(en) kaka", correct: "kakor", incorrect: ["kaker", "kakar", "kaka"] },
            { singular: "(en) smörgås", correct: "smörgåsar", incorrect: ["smörgåser", "smörgåsor", "smörgås"] },
            { singular: "(en) yoghurt", correct: "yoghurtar", incorrect: ["yoghurter", "yoghurtor", "yoghurt"] },
            { singular: "(en) natt", correct: "nätter", incorrect: ["nattar", "nattor", "natt"] },
            { singular: "(en) dag", correct: "dagar", incorrect: ["dager", "dagor", "dag"] },
            { singular: "(en) morgon", correct: "morgnar", incorrect: ["morgner", "morgnor", "morgon"] },
            { singular: "(en) förmiddag", correct: "förmiddagar", incorrect: ["förmiddager", "förmiddagor", "förmiddag"] },
            { singular: "(en) lunch", correct: "luncher", incorrect: ["lunchar", "lunchor", "lunch"] },
            { singular: "(en) eftermiddag", correct: "eftermiddagar", incorrect: ["eftermiddager", "eftermiddagor", "eftermiddag"] },
            { singular: "(en) kväll", correct: "kvällar", incorrect: ["kväller", "kvällor", "kväll"] },
            { singular: "(en) vardag", correct: "vardagar", incorrect: ["vardager", "vardagor", "vardag"] },
            { singular: "(en) helg", correct: "helger", incorrect: ["helgar", "helgor", "helg"] },
            { singular: "(en) vecka", correct: "veckor", incorrect: ["vecker", "veckar", "vecka"] },
            { singular: "(en) månad", correct: "månader", incorrect: ["månadar", "månador", "månad"] },
            { singular: "(en) tid", correct: "tider", incorrect: ["tidar", "tidor", "tid"] },
            { singular: "(en) klocka", correct: "klockor", incorrect: ["klocker", "klockar", "klocka"] },
            { singular: "(en) timme", correct: "timmar", incorrect: ["timmer", "timmor", "timme"] },
            { singular: "(en) årstid", correct: "årstider", incorrect: ["årstidar", "årstidor", "årstid"] },
            { singular: "(en) anställning", correct: "anställningar", incorrect: ["anställninger", "anställningor", "anställning"] },
            { singular: "(en) chef", correct: "chefer", incorrect: ["chefar", "chefor", "chef"] },
            { singular: "(en) kollega", correct: "kollegor", incorrect: ["kolleger", "kollegar", "kollega"] },
            { singular: "(en) dator", correct: "datorer", incorrect: ["datorar", "datoror", "dator"] },
            { singular: "(en) bärbar dator", correct: "bärbara datorer", incorrect: ["bärbara datorar", "bärbara datoror", "bärbara dator"] },
            { singular: "(en) avdelning", correct: "avdelningar", incorrect: ["avdelninger", "avdelningor", "avdelning"] },
            { singular: "(en) kund", correct: "kunder", incorrect: ["kundar", "kundor", "kund"] },
            { singular: "(en) lön", correct: "löner", incorrect: ["lönar", "lönor", "lön"] },
            { singular: "(en) stol", correct: "stolar", incorrect: ["stoler", "stolor", "stol"] },
            { singular: "(en) sked", correct: "skedar", incorrect: ["skeder", "skedor", "sked"] },
            { singular: "(en) gaffel", correct: "gafflar", incorrect: ["gaffler", "gafflor", "gaffel"] },
            { singular: "(en) kniv", correct: "knivar", incorrect: ["kniver", "knivor", "kniv"] },
            { singular: "(en) tallrik", correct: "tallrikar", incorrect: ["tallriker", "tallrikor", "tallrik"] },
            { singular: "(en) servett", correct: "servetter", incorrect: ["servettar", "servettor", "servett"] },
            { singular: "(en) kastrull", correct: "kastruller", incorrect: ["kastrullar", "kastrullor", "kastrull"] },
            { singular: "(en) gryta", correct: "grytor", incorrect: ["gryter", "grytar", "gryta"] },
            { singular: "(en) spis", correct: "spisar", incorrect: ["spiser", "spisor", "spis"] },
            { singular: "(en) ugn", correct: "ugnar", incorrect: ["ugner", "ugnor", "ugn"] },
            { singular: "(en) dryck", correct: "drycker", incorrect: ["dryckar", "dryckor", "dryck"] },
            { singular: "(en) diskmaskin", correct: "diskmaskiner", incorrect: ["diskmaskinar", "diskmaskinor", "diskmaskin"] },
            { singular: "(ett) ben", correct: "ben", incorrect: ["benar", "benor", "ben"] },
            { singular: "(ett) öga", correct: "ögon", incorrect: ["ögar", "ögor", "öga"] },
            { singular: "(ett) huvud", correct: "huvuden", incorrect: ["huvudar", "huvudor", "huvud"] },
            { singular: "(ett) barn", correct: "barn", incorrect: ["barnor", "barnar", "barner"] },
            { singular: "(ett) fordon", correct: "fordon", incorrect: ["fordonor", "fordonar", "fordoner"] },
            { singular: "(ett) flygplan", correct: "flygplan", incorrect: ["flygplanor", "flygplanar", "flygplaner"] },
            { singular: "(ett) tåg", correct: "tåg", incorrect: ["tågor", "tågar", "tåger"] },
            { singular: "(ett) vin", correct: "viner", incorrect: ["vinor", "vinar", "viner"] },
            { singular: "(ett) bröd", correct: "bröd", incorrect: ["brödor", "brödar", "bröder"] },
            { singular: "(ett) år", correct: "år", incorrect: ["åror", "årar", "årer"] },
            { singular: "(ett) århundrade", correct: "århundraden", incorrect: ["århundrador", "århundradar", "århundrader"] },
            { singular: "(ett) liv", correct: "liv", incorrect: ["livor", "livar", "liver"] },
            { singular: "(ett) möte", correct: "möten", incorrect: ["mötor", "mötar", "möter"] },
            { singular: "(ett) avtal", correct: "avtal", incorrect: ["avtalor", "avtalar", "avtaler"] },
            { singular: "(ett) jobb", correct: "jobb", incorrect: ["jobbor", "jobbar", "jobber"] },
            { singular: "(ett) arbete", correct: "arbeten", incorrect: ["arbetor", "arbetar", "arbeter"] },
            { singular: "(ett) företag", correct: "företag", incorrect: ["företagor", "företagar", "företager"] },
            { singular: "(ett) samarbete", correct: "samarbeten", incorrect: ["samarbetor", "samarbetar", "samarbeter"] },
            { singular: "(ett) projekt", correct: "projekt", incorrect: ["projektor", "projektar", "projekter"] },
            { singular: "(ett) resultat", correct: "resultat", incorrect: ["resultator", "resultatar", "resultater"] },
            { singular: "(ett) verktyg", correct: "verktyg", incorrect: ["verktygor", "verktygar", "verktyger"] },
            { singular: "(ett) kök", correct: "kök", incorrect: ["kökor", "kökar", "köker"] },
            { singular: "(ett) bord", correct: "bord", incorrect: ["bordor", "bordar", "border"] },
            { singular: "(ett) glas", correct: "glas", incorrect: ["glasor", "glasar", "glaser"] },
            { singular: "(ett) recept", correct: "recept", incorrect: ["receptor", "receptar", "recepter"] },
            { singular: "(ett) fat", correct: "fat", incorrect: ["fator", "fatar", "fater"] },
        ];

        // Quiz State
        let currentQuestion = 0;
        let correctCount = 0;
        let wrongCount = 0;

        // DOM Elements
        const questionElement = document.getElementById('question');
        const optionsButtons = document.querySelectorAll('.option-button');
        const feedbackElement = document.getElementById('feedback');
        const resultElement = document.getElementById('result');
        const correctCountElement = document.getElementById('correct-count');
        const wrongCountElement = document.getElementById('wrong-count');
        const progressBarElement = document.getElementById('progress-bar');
        const correctScoreElement = document.getElementById('correct-score');
        const wrongScoreElement = document.getElementById('wrong-score');
        const questionContainer = document.getElementById('question-container');
        const darkModeToggle = document.getElementById('darkModeToggle');
        const modeLabel = document.getElementById('modeLabel');

        // Shuffle Function using Fisher-Yates Algorithm
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Load Quiz Questions
        function loadQuestion() {
            if (currentQuestion >= quizData.length) {
                showResult();
                return;
            }

            const currentData = quizData[currentQuestion];
            questionElement.innerHTML = `The plural of <br>"${currentData.singular}" is ...`; // Added <br> after "of"

            // Combine correct and incorrect options and shuffle them
            const options = shuffle([currentData.correct, ...currentData.incorrect]);

            // Assign options to buttons
            optionsButtons.forEach((button, index) => {
                button.textContent = options[index];
                button.disabled = false;
                button.classList.remove('correct', 'wrong');
                button.blur(); // Remove focus from each button
            });

            feedbackElement.textContent = '';
            feedbackElement.classList.remove('correct', 'wrong');
            feedbackElement.style.opacity = '0'; // Hide feedback

            // Update progress bar
            const progressPercent = ((currentQuestion) / quizData.length) * 100;
            progressBarElement.style.width = `${progressPercent}%`;

            // Add fade-in effect
            questionContainer.classList.remove('fade-out');
            questionContainer.classList.add('fade-in');
            setTimeout(() => {
                questionContainer.classList.add('fade-in-active');
            }, 10); // Delay to ensure CSS transition applies
        }

        // Handle Answer Selection
        function selectAnswer(button) {
            const selectedAnswer = button.textContent;
            const currentData = quizData[currentQuestion];
            let isCorrect = false;

            // Disable all buttons
            optionsButtons.forEach(btn => btn.disabled = true);

            if (selectedAnswer === currentData.correct) {
                correctCount++;
                correctScoreElement.textContent = correctCount;
                feedbackElement.textContent = 'Correct!';
                feedbackElement.classList.add('correct');
                button.classList.add('correct');
                isCorrect = true;
            } else {
                wrongCount++;
                wrongScoreElement.textContent = wrongCount;
                feedbackElement.textContent = `Incorrect! The answer is "${currentData.correct}".`;
                feedbackElement.classList.add('wrong');
                button.classList.add('wrong');
            }

            feedbackElement.style.opacity = '1'; // Show feedback

            if (!isCorrect) {
                // Highlight the correct answer
                optionsButtons.forEach(btn => {
                    if (btn.textContent === currentData.correct) {
                        btn.classList.add('correct');
                    }
                });
            }

            currentQuestion++;

            // Update progress bar
            const progressPercent = ((currentQuestion) / quizData.length) * 100;
            progressBarElement.style.width = `${progressPercent}%`;

            // Add fade-out effect and load next question after a delay
            setTimeout(() => {
                questionContainer.classList.remove('fade-in', 'fade-in-active');
                questionContainer.classList.add('fade-out');
                setTimeout(loadQuestion, 500); // Wait for fade-out to complete
            }, 1500);
        }

        // Show Quiz Results
        function showResult() {
            document.getElementById('question-container').style.display = 'none';
            resultElement.style.display = 'block';
            correctCountElement.textContent = correctCount;
            wrongCountElement.textContent = wrongCount;
            progressBarElement.style.width = `100%`;
        }

        // Restart the Quiz
        function restartQuiz() {
            currentQuestion = 0;
            correctCount = 0;
            wrongCount = 0;
            resultElement.style.display = 'none';
            document.getElementById('question-container').style.display = 'block';
            correctScoreElement.textContent = correctCount;
            wrongScoreElement.textContent = wrongCount;
            progressBarElement.style.width = '0%';

            // Shuffle the questions again
            shuffle(quizData);

            loadQuestion();
        }

        // Toggle Dark Mode and Save Preference
        function toggleDarkMode() {
            document.body.classList.toggle("dark-mode");
            const isDarkMode = document.body.classList.contains("dark-mode");
            modeLabel.innerText = isDarkMode ? "Light mode" : "Dark mode"; // Updated label for clarity
            localStorage.setItem('darkMode', isDarkMode ? 'enabled' : 'disabled');
        }

        // Initialize Dark Mode Based on Saved Preference
        function initializeDarkMode() {
            const darkModeSetting = localStorage.getItem('darkMode');
            if (darkModeSetting === 'enabled') {
                darkModeToggle.checked = true;
                document.body.classList.add('dark-mode');
                modeLabel.textContent = 'Light mode';
            } else {
                darkModeToggle.checked = false;
                document.body.classList.remove('dark-mode');
                modeLabel.textContent = 'Dark mode';
            }
        }

        // Initialize Quiz and Dark Mode on Page Load
        window.onload = function() {
            initializeDarkMode();
            shuffle(quizData);
            loadQuestion();

            // Ensure no button is focused on load
            optionsButtons.forEach(button => button.blur());
        };
    </script>

</body>
</html>
