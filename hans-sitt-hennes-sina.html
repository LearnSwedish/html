<!DOCTYPE html>
<html lang="sv">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hans, sitt, hennes, deras?</title>

    <!-- Font Awesome CDN for Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    <style>
        /* Reset and Base Styles */
        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f9fafb;
            color: #2d3748;
            line-height: 1.6;
            font-size: 16px;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            overflow-y: auto;
            position: relative;
            transition: background-color 0.3s, color 0.3s;
        }

        body.dark-mode {
            background-color: #121212;
            color: #e2e8f0;
        }

        /* Close Button Styling */
        .close-button {
            float: right;
            padding: 5px;
            cursor: pointer;
            font-size: 18px;
            background-color: #ccc;
            border: none;
            border-radius: 50%;
            line-height: 20px;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s, transform 0.3s;
        }

        body.dark-mode .close-button {
            background-color: #555;
            color: #ffcccc;
        }

        .close-button:hover {
            background-color: #f44336;
            transform: scale(1.2) rotate(90deg);
            color: white;
        }

        body.dark-mode .close-button:hover {
            background-color: #ff6666;
            color: white;
            transform: scale(1.2) rotate(90deg);
        }

        /* Container */
        .container {
            background-color: #ffffff;
            padding: 40px 30px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            max-width: 850px;
            width: 100%;
            text-align: center;
            position: relative;
            transition: background-color 0.3s, box-shadow 0.3s;
            margin-top: 20px;
        }

        body.dark-mode .container {
            background-color: #1a202c;
            box-shadow: 0 10px 25px rgba(255, 255, 255, 0.1);
        }

        /* Dark Mode Toggle */
        .dark-mode-toggle {
            justify-content: flex-start;
            padding: 0 10px;
            gap: 10px;
            cursor: default;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }

        .modal-content {
            background: white;
            color: black;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 600px;
            width: 80%;
            transform: translateY(-50px);
            transition: transform 0.3s ease-in-out;
        }

        body.dark-mode .modal-content {
            background-color: #1a202c;
            color: #edf2f7;
            border-color: #2d3748;
        }

        .modal.show {
            display: flex;
            opacity: 1;
        }

        /* Page Title */
        .page-title {
            text-align: center;
            color: #333333;
            font-size: 28px;
            margin-bottom: 20px;
            line-height: 1.4;
            padding-top: 10px;
            position: relative;
            z-index: 1;
            transition: color 0.3s ease, background-color 0.3s ease;
        }

        body.dark-mode .page-title {
            color: #ffffff;
        }

        /* Score, Start Over, and Dark Mode Toggle Container */
        .score-container {
            position: fixed;
            top: 20px;
            right: 40px;
            display: flex;
            flex-direction: column;
            align-items: stretch;
            width: 150px;
            z-index: 1001;
            gap: 10px;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
        }

        /* Sentence Styling */
        .sentence {
            background-color: #f7fafc;
            padding: 20px;
            padding-bottom: 5px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            position: relative;
            transition: background-color 0.3s, border 0.3s;
            border-left: 6px solid transparent;
            text-align: left;
            /* Removed invalid data-state property */
        }

        body.dark-mode .sentence {
            background-color: #2d3748;
            box-shadow: 0 4px 10px rgba(255, 255, 255, 0.05);
        }

        .sentence.correct {
            border-left: 6px solid #38a169;
            background-color: #cdffcd;
            transition: border 0.3s, background-color 0.3s;
        }

        body.dark-mode .sentence.correct {
            border-left: 6px solid #38a169;
            background-color: #22543d;
        }

        .sentence.incorrect {
            border-left: 6px solid #e53e3e;
            background-color: #FFADB0;
            transition: border 0.3s, background-color 0.3s;
        }

        body.dark-mode .sentence.incorrect {
            border-left: 6px solid #e53e3e;
            background-color: #742a2a;
        }

        .sentence p {
            font-size: 1.1rem;
            margin-bottom: 10px;
            transition: color 0.3s;
        }

        body.dark-mode .sentence p {
            color: #edf2f7;
        }

        /* Select Element Styling */
        .sentence select {
            padding: 4px 4px;
            font-size: inherit;
            border: 1px solid #cbd5e0;
            border-radius: 6px;
            background-color: #edf2f7;
            cursor: pointer;
            transition: border-color 0.3s, background-color 0.3s;
            width: auto;
            appearance: auto;
            -webkit-appearance: auto;
            -moz-appearance: auto;
            background-image: initial;
			margin-left: 10px;  /* Adjust this value as needed */
			margin-right: 10px; /* Adjust this value as needed */
        }

        body.dark-mode .sentence select {
            background-color: #4a5568;
            color: #edf2f7;
            border: 1px solid #718096;
        }

        .sentence select:focus {
            border-color: #3182ce;
            outline: none;
            box-shadow: 0 0 0 2px rgba(49, 130, 206, 0.2);
        }

        body.dark-mode .sentence select:focus {
            border-color: #63b3ed;
            box-shadow: 0 0 0 2px rgba(99, 179, 237, 0.2);
        }

        /* Sentences */
        .sentences {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        /* Slider Container */
        .switch {
            position: relative;
            width: 40px;
            height: 20px;
            display: inline-block;
        }

        /* Hide Default Checkbox */
        .switch input {
            display: none;
        }

        /* Slider Appearance */
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: 0.4s;
            border-radius: 20px;
        }

        .slider::before {
            position: absolute;
            content: "";
            height: 14px;
            width: 14px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.4s;
            border-radius: 50%;
        }

        /* Slider Active State */
        .switch input:checked+.slider {
            background-color: #007BFF;
        }

        .switch input:checked+.slider::before {
            transform: translateX(20px);
        }

        /* Start Over Button */
        .start-over {
            background-color: #007BFF;
            color: white;
            cursor: pointer;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s ease;
        }

        .start-over:hover {
            background-color: #0056b3;
            color: white;
        }

        /* Word Styling */
        .word {
            position: relative;
            cursor: pointer;
            color: #2d3748;
            transition: color 0.3s, background-color 0.3s;
            display: inline-block;
            border-radius: 4px;
        }

        body.dark-mode .word {
            color: #edf2f7;
        }

        .word::after {
            content: '';
            position: absolute;
            left: 50%;
            bottom: -2px;
            width: 100%;
            height: 3px;
            background-color: currentColor;
            transform: translateX(-50%) scaleX(0);
            transform-origin: center;
            transition: transform 0.3s ease;
        }

        .word:hover::after,
        .word:focus::after {
            transform: translateX(-50%) scaleX(1);
        }

        .word:hover,
        .word:focus {
            background-color: rgba(45, 55, 72, 0.1);
        }

        body.dark-mode .word:hover,
        body.dark-mode .word:focus {
            background-color: rgba(226, 232, 240, 0.1);
        }

        /* Unified Button Styling */
        .score,
        .dark-mode-toggle,
        .start-over {
            width: 100%;
            height: 40px;
            padding: 0 10px;
            box-sizing: border-box;
            font-size: 16px;
            text-align: center;
            background-color: #fff;
            color: #333;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s, color 0.3s;
            cursor: pointer;
            border: none;
        }

        /* Hamburger Menu */
        .hamburger-menu {
            display: none;
            font-size: 24px;
            position: fixed;
            top: 20px;
            right: 20px;
            cursor: pointer;
            z-index: 1002;
        }

        /* Menu Overlay - Slide Animation */
        .menu-overlay {
            position: fixed;
            top: 0;
            right: 0;
            width: 250px;
            height: 100%;
            background: #fff;
            color: #333;
            box-shadow: -2px 0 5px rgba(0, 0, 0, 0.5);
            z-index: 1003;
            transform: translateX(100%); /* Start off-screen to the right */
            transition: transform 0.4s ease; /* Smooth slide effect */
        }

        /* Show the Menu Overlay by Sliding In */
        .menu-overlay.active {
            transform: translateX(0); /* Slide into view */
        }

        /* Hide elements on mobile */
        @media (max-width: 600px) {
            .score-container {
                display: none;
            }

            .hamburger-menu {
                display: block;
            }
        }

        /* Menu item styling */
        .menu-overlay .menu-item {
            padding: 15px;
            font-size: 18px;
            border-bottom: 1px solid #ccc;
            text-align: left;
            cursor: pointer;
        }

        /* Close Button styling */
        .menu-overlay .close-button {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 24px;
            cursor: pointer;
        }

        /* Apply Dark Mode to Menu */
        .dark-mode-menu {
            background-color: #333;
            color: #fff;
        }

        .dark-mode-menu .menu-item {
            border-bottom: 1px solid #555;
        }

        #darkModeIcon {
            font-size: 20px;
            color: #333; /* Default color for light mode */
            cursor: pointer;
        }

        body.dark-mode #darkModeIcon {
            color: #ffeb3b; /* Bright color for dark mode */
        }

        /* Responsive Design */
        @media (max-width: 600px) {
            .score-container {
                top: 10px;
                right: 10px;
                width: 120px;
                gap: 10px;
                /* Reduced gap for smaller screens */
            }

            .sentence p {
                line-height: 1.8;
            }

            .score,
            .start-over,
            .dark-mode-toggle {
                font-size: 14px;
                height: 45px;
                /* Slightly smaller height for smaller screens */
                padding: 0 10px;
                /* Reduced horizontal padding */
            }

            .modal-content {
                margin-top: 50px; /* Adjust this value as needed */
            }

            .start-over {
                padding: 0 12px;
            }

            .dark-mode-toggle {
                padding: 0 8px;
                gap: 8px;
            }

            /* Adjust switch size for smaller screens */
            .switch {
                width: 35px;
                height: 18px;
            }

            .slider::before {
                height: 12px;
                width: 12px;
                left: 3px;
                bottom: 3px;
            }

            .switch input:checked+.slider::before {
                transform: translateX(18px);
            }
        }
    </style>

</head>

<body>

    <!-- Menu Items for Desktop -->
    <div class="score-container">
        <!-- Score Display for Desktop -->
        <div class="score">Score:&nbsp;<span class="score-display">0</span>&nbsp;/&nbsp;<span class="score-max"></span></div>
        <!-- Dark Mode Toggle for Desktop -->
        <div class="dark-mode-toggle">
            <label class="switch">
                <input type="checkbox" id="darkModeSwitch">
                <span class="slider"></span>
            </label>
            <span>Dark mode</span>
        </div>
        <!-- Info Button for Desktop -->
        <button class="start-over" id="info-button" onclick="openModal('infoModal')">
            <i class="fas fa-info-circle" style="margin-right: 8px;"></i> Info
        </button>
        <!-- URL Imperative Logic Button -->
        <button class="start-over" id="menu-URL" onclick="openMenuURL()">
            <i class="fas fa-book" style="margin-right: 8px;"></i> The logic
        </button>
        <!-- Start Over Button for Desktop -->
        <button class="start-over" onclick="startOver()">
            <i class="fas fa-rotate-left" style="margin-right: 8px;"></i> Start over
        </button>
    </div>

    <!-- Hamburger Menu Icon for Mobile -->
    <div class="hamburger-menu" onclick="toggleMenu()">
        <i class="fas fa-bars"></i>
    </div>

    <!-- Side Menu for Mobile-->
    <div class="menu-overlay" id="menuOverlay">
        <!-- Close Button -->
        <div class="close-button" onclick="toggleMenu()">
            <i class="fas fa-times"></i>
        </div>
        <!-- Score Display in Menu -->
        <div class="menu-item">Score:&nbsp; <span class="score-display">0</span> / <span class="score-max"></span></div>
        <!-- Dark Mode Toggle -->
        <div class="menu-item" onclick="toggleDarkMode()">
            <i id="darkModeIcon" class="fas fa-lightbulb"></i> <span id="darkModeText">Dark mode</span>
        </div>
        <!-- Info Button -->
        <div class="menu-item" onclick="showInfo()">
            <i class="fas fa-info-circle"></i> Info
        </div>
        <div class="menu-item" onclick="openMenuURL()">
            <i class="fas fa-book"></i> The logic
        </div>
        <!-- Start Over Button -->
        <div class="menu-item" onclick="startOverAndCloseMenu()">
            <i class="fas fa-rotate-left"></i> Start over
        </div>
    </div>


    <!-- Page Title -->
    <h1 class="page-title">Hans, sitt, hennes, deras?</h1>
    <p>Read the "Info" to understand what this exercise is about.</p>

    <!-- Main Content Container -->
    <div class="container">
        <div class="sentences" id="sentences"></div>
    </div>
    <div class="modal" id="infoModal" role="dialog" aria-modal="true" aria-labelledby="infoModalTitle">
        <div class="modal-content">
            <button class="close-button" type="button" onclick="closeModal('infoModal')" aria-label="Close modal">&times;</button>
            <h2 id="infoModalTitle">Information</h2>
            <p>In this exercise, you will learn to distinguish between the third-person possessive pronouns (hans, hennes, dess, deras) 
			and the Swedish reflexive possessive pronouns (sin, sitt, sina). In each sentence, the pronoun you choose must refer to the 
			subject mentioned at the beginning of the sentence (not anyone else). A tip: sin, sitt, sina can never be used as the subject; 
			they are only used to modify an object (specifically to express ownership).</p>
        </div>
    </div>

    <!-- Congratulations Modal -->
    <div class="modal" id="congratulationsModal" role="dialog" aria-modal="true" aria-labelledby="congratulationsModalTitle">
        <div class="modal-content">
            <button class="close-button" type="button" onclick="closeModal('congratulationsModal')" aria-label="Close modal">&times;</button>
            <h2 id="congratulationsModalTitle">Congratulations!</h2>
            <p>You have answered all the questions correctly! Did you manage to do it without making any mistakes?</p>
        </div>
    </div>

    <script>

const sentences = [
    {
        words: [
            {
                sentencePart: "Min bror Emil längtar efter att starta",
            },
            {
                sentencePart: `<select data-correct="sitt" onchange="evaluateAnswer(this)" aria-label="Välj rätt alternativ">
                    <option value="">Välj</option>
                    <option value="hans">hans</option>
                    <option value="hennes">hennes</option>
                    <option value="deras">deras</option>
                    <option value="sin">sin</option>
                    <option value="sitt">sitt</option>
                    <option value="sina">sina</option>
                </select>`,
            },
            {
                sentencePart: "eget företag och bli entreprenör.",
            },
        ]
    },
	{
		words: [
			{
				sentencePart: "Jacob sa att han drömde om att återvända till",
			},
			{
				sentencePart: `<select data-correct="sin" onchange="evaluateAnswer(this)" aria-label="Välj rätt alternativ">
					<option value="">Välj</option>
					<option value="hans">hans</option>
					<option value="hennes">hennes</option>
					<option value="deras">deras</option>
					<option value="sin">sin</option>
					<option value="sitt">sitt</option>
					<option value="sina">sina</option>
				</select>`,
			},
			{
				sentencePart: "barndomsstad.",
			},
		]
	},
    {
        words: [
            {
                sentencePart: "Clara berättade att hon funderar på att sälja",
            },
            {
                sentencePart: `<select data-correct="sin" onchange="evaluateAnswer(this)" aria-label="Välj rätt alternativ">
                    <option value="">Välj</option>
                    <option value="hans">hans</option>
                    <option value="hennes">hennes</option>
                    <option value="deras">deras</option>
                    <option value="sin">sin</option>
                    <option value="sitt">sitt</option>
                    <option value="sina">sina</option>
                </select>`,
            },
            {
                sentencePart: "gamla bil.",
            },
        ]
    },
    {
        words: [
            {
                sentencePart: "Tommy och Anna diskuterar hur de ska renovera",
            },
            {
                sentencePart: `<select data-correct="sin" onchange="evaluateAnswer(this)" aria-label="Välj rätt alternativ">
                    <option value="">Välj</option>
                    <option value="hans">hans</option>
                    <option value="hennes">hennes</option>
                    <option value="deras">deras</option>
                    <option value="sin">sin</option>
                    <option value="sitt">sitt</option>
                    <option value="sina">sina</option>
                </select>`,
            },
            {
                sentencePart: "sommarstuga vid kusten.",
            },
        ]
    },
    {
        words: [
            {
                sentencePart: "Maria hoppas kunna publicera",
            },
            {
                sentencePart: `<select data-correct="sin" onchange="evaluateAnswer(this)" aria-label="Välj rätt alternativ">
                    <option value="">Välj</option>
                    <option value="hans">hans</option>
                    <option value="hennes">hennes</option>
                    <option value="deras">deras</option>
                    <option value="sin">sin</option>
                    <option value="sitt">sitt</option>
                    <option value="sina">sina</option>
                </select>`,
            },
            {
                sentencePart: "första roman inom ett år.",
            },
        ]
    },
    {
        words: [
            {
                sentencePart: "Lisa undrade varför ingen hade märkt att hon hade klippt",
            },
            {
                sentencePart: `<select data-correct="sitt" onchange="evaluateAnswer(this)" aria-label="Välj rätt alternativ">
                    <option value="">Välj</option>
                    <option value="hans">hans</option>
                    <option value="hennes">hennes</option>
                    <option value="deras">deras</option>
                    <option value="sin">sin</option>
                    <option value="sitt">sitt</option>
                    <option value="sina">sina</option>
                </select>`,
            },
            {
                sentencePart: "hår kortare.",
            },
        ]
    },
    {
        words: [
            {
                sentencePart: "Jennifer sa att Johan hade glömt att skicka",
            },
            {
                sentencePart: `<select data-correct="hennes" onchange="evaluateAnswer(this)" aria-label="Välj rätt alternativ">
                    <option value="">Välj</option>
                    <option value="hans">hans</option>
                    <option value="hennes">hennes</option>
                    <option value="deras">deras</option>
                    <option value="sin">sin</option>
                    <option value="sitt">sitt</option>
                    <option value="sina">sina</option>
                </select>`,
            },
            {
                sentencePart: "läxa.",
            },
        ]
    },
    {
        words: [
            {
                sentencePart: "Martin och Anna är osäkra på om de ska sälja",
            },
            {
                sentencePart: `<select data-correct="sin" onchange="evaluateAnswer(this)" aria-label="Välj rätt alternativ">
                    <option value="">Välj</option>
                    <option value="hans">hans</option>
                    <option value="hennes">hennes</option>
                    <option value="deras">deras</option>
                    <option value="sin">sin</option>
                    <option value="sitt">sitt</option>
                    <option value="sina">sina</option>
                </select>`,
            },
            {
                sentencePart: "bostadsrätt.",
            },
        ]
    },
    {
        words: [
            {
                sentencePart: "Min syster hoppas på att kunna rädda",
            },
            {
                sentencePart: `<select data-correct="sin" onchange="evaluateAnswer(this)" aria-label="Välj rätt alternativ">
                    <option value="">Välj</option>
                    <option value="hans">hans</option>
                    <option value="hennes">hennes</option>
                    <option value="deras">deras</option>
                    <option value="sin">sin</option>
                    <option value="sitt">sitt</option>
                    <option value="sina">sina</option>
                </select>`,
            },
            {
                sentencePart: "katt från det brinnande huset.",
            },
        ]
    },
    {
        words: [
            {
                sentencePart: "Adam sa att",
            },
            {
                sentencePart: `<select data-correct="hans" onchange="evaluateAnswer(this)" aria-label="Välj rätt alternativ">
                    <option value="">Välj</option>
                    <option value="hans">hans</option>
                    <option value="hennes">hennes</option>
                    <option value="deras">deras</option>
                    <option value="sin">sin</option>
                    <option value="sitt">sitt</option>
                    <option value="sina">sina</option>
                </select>`,
            },
            {
                sentencePart: "lärare hade gett honom en utmanande uppgift i fysik.",
            },
        ]
    },
    {
        words: [
            {
                sentencePart: "Föräldrarna är stolta över att",
            },
            {
                sentencePart: `<select data-correct="deras" onchange="evaluateAnswer(this)" aria-label="Välj rätt alternativ">
                    <option value="">Välj</option>
                    <option value="hans">hans</option>
                    <option value="hennes">hennes</option>
                    <option value="deras">deras</option>
                    <option value="sin">sin</option>
                    <option value="sitt">sitt</option>
                    <option value="sina">sina</option>
                </select>`,
            },
            {
                sentencePart: "barn har fått stipendier.",
            },
        ]
    },
    {
        words: [
            {
                sentencePart: "Andreas frågade vad",
            },
            {
                sentencePart: `<select data-correct="hans" onchange="evaluateAnswer(this)" aria-label="Välj rätt alternativ">
                    <option value="">Välj</option>
                    <option value="hans">hans</option>
                    <option value="hennes">hennes</option>
                    <option value="deras">deras</option>
                    <option value="sin">sin</option>
                    <option value="sitt">sitt</option>
                    <option value="sina">sina</option>
                </select>`,
            },
            {
                sentencePart: "syster skulle göra i helgen.",
            },
        ]
    },
    {
        words: [
            {
                sentencePart: "Lisa undrade varför ingen hade märkt att hon hade färgat",
            },
            {
                sentencePart: `<select data-correct="sin" onchange="evaluateAnswer(this)" aria-label="Välj rätt alternativ">
                    <option value="">Välj</option>
                    <option value="hans">hans</option>
                    <option value="hennes">hennes</option>
                    <option value="deras">deras</option>
                    <option value="sin">sin</option>
                    <option value="sitt">sitt</option>
                    <option value="sina">sina</option>
                </select>`,
            },
            {
                sentencePart: "väns hår ljusare.",
            },
        ]
    },
    {
        words: [
            {
                sentencePart: "Maria bad om att få tillbaka",
            },
            {
                sentencePart: `<select data-correct="sin" onchange="evaluateAnswer(this)" aria-label="Välj rätt alternativ">
                    <option value="">Välj</option>
                    <option value="hans">hans</option>
                    <option value="hennes">hennes</option>
                    <option value="deras">deras</option>
                    <option value="sin">sin</option>
                    <option value="sitt">sitt</option>
                    <option value="sina">sina</option>
                </select>`,
            },
            {
                sentencePart: "väninnas bok.",
            },
        ]
    },
    {
        words: [
            {
                sentencePart: "Johan och Lena diskuterar om de kan hjälpa",
            },
            {
                sentencePart: `<select data-correct="sin" onchange="evaluateAnswer(this)" aria-label="Välj rätt alternativ">
                    <option value="">Välj</option>
                    <option value="hans">hans</option>
                    <option value="hennes">hennes</option>
                    <option value="deras">deras</option>
                    <option value="sin">sin</option>
                    <option value="sitt">sitt</option>
                    <option value="sina">sina</option>
                </select>`,
            },
            {
                sentencePart: "granne med renoveringen.",
            },
        ]
    },
    {
        words: [
            {
                sentencePart: "Elsa berättade vad som hände med",
            },
            {
                sentencePart: `<select data-correct="hennes" onchange="evaluateAnswer(this)" aria-label="Välj rätt alternativ">
                    <option value="">Välj</option>
                    <option value="hans">hans</option>
                    <option value="hennes">hennes</option>
                    <option value="deras">deras</option>
                    <option value="sin">sin</option>
                    <option value="sitt">sitt</option>
                    <option value="sina">sina</option>
                </select>`,
            },
            {
                sentencePart: "kollegas bil i går.",
            },
        ]
    },
    {
        words: [
            {
                sentencePart: "Karin funderade på om hon skulle följa med",
            },
            {
                sentencePart: `<select data-correct="sin" onchange="evaluateAnswer(this)" aria-label="Välj rätt alternativ">
                    <option value="">Välj</option>
                    <option value="hans">hans</option>
                    <option value="hennes">hennes</option>
                    <option value="deras">deras</option>
                    <option value="sin">sin</option>
                    <option value="sitt">sitt</option>
                    <option value="sina">sina</option>
                </select>`,
            },
            {
                sentencePart: "chef på konferensen.",
            },
        ]
    },
    {
        words: [
            {
                sentencePart: "Erik sa att han hade glömt att ta med",
            },
            {
                sentencePart: `<select data-correct="sitt" onchange="evaluateAnswer(this)" aria-label="Välj rätt alternativ">
                    <option value="">Välj</option>
                    <option value="hans">hans</option>
                    <option value="hennes">hennes</option>
                    <option value="deras">deras</option>
                    <option value="sin">sin</option>
                    <option value="sitt">sitt</option>
                    <option value="sina">sina</option>
                </select>`,
            },
            {
                sentencePart: "pass till flygplatsen.",
            },
        ]
    },
    {
        words: [
            {
                sentencePart: "De diskuterade om de kunde hjälpa",
            },
            {
                sentencePart: `<select data-correct="sina" onchange="evaluateAnswer(this)" aria-label="Välj rätt alternativ">
                    <option value="">Välj</option>
                    <option value="hans">hans</option>
                    <option value="hennes">hennes</option>
                    <option value="deras">deras</option>
                    <option value="sin">sin</option>
                    <option value="sitt">sitt</option>
                    <option value="sina">sina</option>
                </select>`,
            },
            {
                sentencePart: "grannars barn med läxorna.",
            },
        ]
    },
    {
        words: [
            {
                sentencePart: "Kristina undrade varför hennes vän hade lånat ut",
            },
            {
                sentencePart: `<select data-correct="hennes" onchange="evaluateAnswer(this)" aria-label="Välj rätt alternativ">
                    <option value="">Välj</option>
                    <option value="hans">hans</option>
                    <option value="hennes">hennes</option>
                    <option value="deras">deras</option>
                    <option value="sin">sin</option>
                    <option value="sitt">sitt</option>
                    <option value="sina">sina</option>
                </select>`,
            },
            {
                sentencePart: "cykel utan att säga något.",
            },
        ]
    },
    {
        words: [
            {
                sentencePart: "Håkan visste inte vad han skulle göra med",
            },
            {
                sentencePart: `<select data-correct="sin" onchange="evaluateAnswer(this)" aria-label="Välj rätt alternativ">
                    <option value="">Välj</option>
                    <option value="hans">hans</option>
                    <option value="hennes">hennes</option>
                    <option value="deras">deras</option>
                    <option value="sin">sin</option>
                    <option value="sitt">sitt</option>
                    <option value="sina">sina</option>
                </select>`,
            },
            {
                sentencePart: "hund när han åkte på semester.",
            },
        ]
    },
    {
        words: [
            {
                sentencePart: "Föräldrarna sa att",
            },
            {
                sentencePart: `<select data-correct="deras" onchange="evaluateAnswer(this)" aria-label="Välj rätt alternativ">
                    <option value="">Välj</option>
                    <option value="hans">hans</option>
                    <option value="hennes">hennes</option>
                    <option value="deras">deras</option>
                    <option value="sin">sin</option>
                    <option value="sitt">sitt</option>
                    <option value="sina">sina</option>
                </select>`,
            },
            {
                sentencePart: "bil hade gått sönder och behövde repareras.",
            },
        ]
    },
    {
        words: [
            {
                sentencePart: "Peter frågade om",
            },
            {
                sentencePart: `<select data-correct="hans" onchange="evaluateAnswer(this)" aria-label="Välj rätt alternativ">
                    <option value="">Välj</option>
                    <option value="hans">hans</option>
                    <option value="hennes">hennes</option>
                    <option value="deras">deras</option>
                    <option value="sin">sin</option>
                    <option value="sitt">sitt</option>
                    <option value="sina">sina</option>
                </select>`,
            },
            {
                sentencePart: "kollega kunde hjälpa honom med presentationen.",
            },
        ]
    },
    {
        words: [
            {
                sentencePart: "Sofie var glad över att ha hittat",
            },
            {
                sentencePart: `<select data-correct="sin" onchange="evaluateAnswer(this)" aria-label="Välj rätt alternativ">
                    <option value="">Välj</option>
                    <option value="hans">hans</option>
                    <option value="hennes">hennes</option>
                    <option value="deras">deras</option>
                    <option value="sin">sin</option>
                    <option value="sitt">sitt</option>
                    <option value="sina">sina</option>
                </select>`,
            },
            {
                sentencePart: "favoritbok på rean.",
            },
        ]
    },
    {
        words: [
            {
                sentencePart: "Marcus förklarade att",
            },
            {
                sentencePart: `<select data-correct="hans" onchange="evaluateAnswer(this)" aria-label="Välj rätt alternativ">
                    <option value="">Välj</option>
                    <option value="hans">hans</option>
                    <option value="hennes">hennes</option>
                    <option value="deras">deras</option>
                    <option value="sin">sin</option>
                    <option value="sitt">sitt</option>
                    <option value="sina">sina</option>
                </select>`,
            },
            {
                sentencePart: "kusin hade flyttat till en ny stad.",
            },
        ]
    },
{
    words: [
        {
            sentencePart: "Robotens uppdrag misslyckades eftersom",
        },
        {
            sentencePart: `<select data-correct="dess" onchange="evaluateAnswer(this)" aria-label="Välj rätt alternativ">
                <option value="">Välj</option>
                <option value="hans">hans</option>
                <option value="hennes">hennes</option>
                <option value="deras">deras</option>
                <option value="sin">sin</option>
                <option value="sitt">sitt</option>
                <option value="sina">sina</option>
                <option value="dess">dess</option>
            </select>`,
        },
        {
            sentencePart: "batteri tog slut.",
        },
    ]
},
{
    words: [
        {
            sentencePart: "Hunden sprang iväg i panik för att",
        },
        {
            sentencePart: `<select data-correct="dess" onchange="evaluateAnswer(this)" aria-label="Välj rätt alternativ">
                <option value="">Välj</option>
                <option value="hans">hans</option>
                <option value="hennes">hennes</option>
                <option value="deras">deras</option>
                <option value="sin">sin</option>
                <option value="sitt">sitt</option>
                <option value="sina">sina</option>
                <option value="dess">dess</option>
            </select>`,
        },
        {
            sentencePart: "svans hamnade i kläm när dörren stängdes.",
        },
    ]
},
{
    words: [
        {
            sentencePart: "Företaget utökade",
        },
        {
            sentencePart: `<select data-correct="sin" onchange="evaluateAnswer(this)" aria-label="Välj rätt alternativ">
                <option value="">Välj</option>
                <option value="hans">hans</option>
                <option value="hennes">hennes</option>
                <option value="deras">deras</option>
                <option value="sin">sin</option>
                <option value="sitt">sitt</option>
                <option value="sina">sina</option>
                <option value="dess">dess</option>
            </select>`,
        },
        {
            sentencePart: "verksamhet med nya kontor i Europa.",
        },
    ]
},
{
    words: [
        {
            sentencePart: "Flygplanet blev försenat eftersom",
        },
        {
            sentencePart: `<select data-correct="dess" onchange="evaluateAnswer(this)" aria-label="Välj rätt alternativ">
                <option value="">Välj</option>
                <option value="hans">hans</option>
                <option value="hennes">hennes</option>
                <option value="deras">deras</option>
                <option value="sin">sin</option>
                <option value="sitt">sitt</option>
                <option value="sina">sina</option>
                <option value="dess">dess</option>
            </select>`,
        },
        {
            sentencePart: "navigationssystem slutade fungera.",
        },
    ]
},
{
    words: [
        {
            sentencePart: "Hunden blev uppmärksam när",
        },
        {
            sentencePart: `<select data-correct="dess" onchange="evaluateAnswer(this)" aria-label="Välj rätt alternativ">
                <option value="">Välj</option>
                <option value="hans">hans</option>
                <option value="hennes">hennes</option>
                <option value="deras">deras</option>
                <option value="sin">sin</option>
                <option value="sitt">sitt</option>
                <option value="sina">sina</option>
                <option value="dess">dess</option>
            </select>`,
        },
        {
            sentencePart: "namn ropades från andra sidan parken.",
        },
    ]
}

    // Lägg till fler meningar efter behov
];

    let score = 0;

    // Fisher-Yates shuffle algorithm to shuffle an array.
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    // Function to generate HTML for a single sentence
    function generateSentenceHTML(sentence, index) {
        const sentenceHTML = sentence.words.map(item => item.sentencePart).join(' ');
        return `<div class="sentence" data-state="none"><p>${sentenceHTML}</p></div>`;
    }

    // Render sentences in a shuffled order.
    function renderSentences() {
        const shuffledSentences = shuffleArray([...sentences]);
        const sentencesHTML = shuffledSentences.map((sentence, index) => generateSentenceHTML(sentence, index)).join('');
        document.getElementById('sentences').innerHTML = sentencesHTML;
    }

    // Evaluates the user's answer and updates the score and UI accordingly.
	function evaluateAnswer(selectElement) {
		const correctAnswer = selectElement.getAttribute('data-correct');
		const selectedValue = selectElement.value;
		const parent = selectElement.closest('.sentence');
	
		// Get the previous state to ensure points are added or subtracted correctly
		const priorState = parent.getAttribute('data-state') || 'none';
		let newState;
	
		if (selectedValue === correctAnswer) {
			newState = 'correct';
			if (priorState === 'incorrect') {
				// Switching from incorrect to correct
				updateScore(2); // +1 for correct, +1 to cancel previous -1
			} else if (priorState === 'none') {
				// New correct selection
				updateScore(1);
			}
		} else if (selectedValue === "") {
			// Reset to default selection
			if (priorState === 'correct') {
				// Resetting from correct
				updateScore(-1);
			} else if (priorState === 'incorrect') {
				// Resetting from incorrect
				updateScore(1);
			}
			newState = 'none';
		} else {
			// Incorrect selection
			if (priorState === 'correct') {
				// Switching from correct to incorrect
				updateScore(-2); // -1 for incorrect, -1 to cancel previous +1
			} else if (priorState === 'none') {
				// New incorrect selection
				updateScore(-1);
			}
			newState = 'incorrect';
		}
	
		// Update UI with the new state
		parent.classList.remove('correct', 'incorrect');
		if (newState !== 'none') {
			parent.classList.add(newState);
		}
		parent.setAttribute('data-state', newState);
	
		checkAllCorrect();
	}


    // Updates the score display based on value change.
	function updateScore(value) {
		score += value;
	
		// Prevent score from exceeding boundaries
		if (score > 25) {
			score = 25;
		} else if (score < -25) {
			score = -25;
		}
	
		// Update all elements with the class "score-display" to reflect the updated score
		document.querySelectorAll('.score-display').forEach((element) => {
			element.textContent = score;
		});
	
		checkForMaxScore(score);
	}

    // Check if the score has reached max and opens the congratulations modal if so.
    function checkForMaxScore(currentScore) {
        if (currentScore >= sentences.length) {
            openModal('congratulationsModal');
        }
    }

    // Checks if all sentences are correctly answered.
    function checkAllCorrect() {
        const allCorrect = Array.from(document.querySelectorAll('.sentence')).every(sentence => sentence.classList.contains('correct'));
        if (allCorrect) {
            openModal('congratulationsModal');
        }
    }

    // Opens a modal by its ID.
    function openModal(modalId) {
        const modal = document.getElementById(modalId);
        if (modal) {
            modal.style.display = 'flex';
            modal.classList.add('show');
        }
    }

    // Closes a modal by its ID.
    function closeModal(modalId) {
        const modal = document.getElementById(modalId);
        if (modal) {
            modal.style.display = 'none';
            modal.classList.remove('show');
        }
    }

    // Close modal when clicking outside of the modal content
    window.addEventListener('click', (event) => {
        const infoModal = document.getElementById('infoModal');
        const congratulationsModal = document.getElementById('congratulationsModal');

        if (event.target === infoModal) {
            closeModal('infoModal');
        } else if (event.target === congratulationsModal) {
            closeModal('congratulationsModal');
        }
    });

    // Function to toggle mobile menu
    function toggleMenu() {
        const menuOverlay = document.getElementById('menuOverlay');
        menuOverlay.classList.toggle('active');
    }

    // Function to toggle dark mode
    function toggleDarkMode() {
        document.body.classList.toggle('dark-mode');

        // Toggle dark mode on the menu overlay
        const menuOverlay = document.getElementById('menuOverlay');
        menuOverlay.classList.toggle('dark-mode-menu');

        // Update dark mode preference in localStorage
        const isDarkModeEnabled = document.body.classList.contains('dark-mode');
        localStorage.setItem('darkMode', isDarkModeEnabled ? 'enabled' : 'disabled');

        // Uppdatera texten i dark mode toggle baserat på läget
        document.getElementById('darkModeText').textContent = isDarkModeEnabled ? "Light mode" : "Dark mode";
    }

    // Function to open MenuURL
    function openMenuURL() {
        window.open('https://i.imghippo.com/files/yZAy6423Tks.png', '_blank', 'noopener,noreferrer');
    }

    // Open the Info modal and close the menu
    function showInfo() {
        openModal('infoModal');
        toggleMenu(); // Stäng menyn efter att ha visat info
    }

    // Start over and close the menu
    function startOverAndCloseMenu() {
        startOver();
        toggleMenu(); // Stäng menyn efter att ha startat om
    }

    // Initialize the dark mode toggle with stored preference
    function initializeModalsAndDarkMode() {
        const darkModeToggle = document.getElementById('darkModeSwitch');
        const isDarkModeEnabled = localStorage.getItem('darkMode') === 'enabled';
        if (isDarkModeEnabled) {
            document.body.classList.add('dark-mode');
            document.getElementById('menuOverlay').classList.add('dark-mode-menu');
            document.getElementById('darkModeText').textContent = "Light mode";
            darkModeToggle.checked = true;
        } else {
            document.getElementById('darkModeText').textContent = "Dark mode";
            darkModeToggle.checked = false;
        }

        darkModeToggle.addEventListener('change', function () {
            toggleDarkMode();
        });
    }

    // Function to update the maximum score in the HTML
    function updateMaxScore() {
        const maxScore = sentences.length;
        document.querySelectorAll('.score-max').forEach((element) => {
            element.textContent = maxScore;
        });
    }

    // Resets the quiz and score, then re-renders sentences.
    function startOver() {
        renderSentences();
        resetScore();
        closeModal('congratulationsModal');
    }

    // Resets the score to zero.
    function resetScore() {
        score = 0;
        document.querySelectorAll('.score-display').forEach((element) => {
            element.textContent = score;
        });

        // Återställ alla meningars tillstånd
        document.querySelectorAll('.sentence').forEach(sentence => {
            sentence.classList.remove('correct', 'incorrect');
            sentence.setAttribute('data-state', 'none');
        });
    }

    // Initialize the application once the DOM is fully loaded.
    document.addEventListener('DOMContentLoaded', () => {
        renderSentences();
        initializeModalsAndDarkMode();
        resetScore();
        updateMaxScore();
    });
    </script>

</body>

</html>
