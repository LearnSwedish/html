<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Predict plural</title>
    
    <!-- Font Awesome CDN for Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
   
    <style>
/* Reset and Base Styles */
*,
*::before,
*::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

:root {
    --transition-duration: 0.3s;
    --transition-timing: ease-in-out;
}

/* General Underline Styles */
u {
    text-decoration: underline;
    text-decoration-color: #007bff !important; /* Blue underline */
    text-decoration-thickness: 3px !important;
    text-decoration-skip-ink: none !important; /* Ensures underline doesn't skip parts of letters */
}

/* Dark Mode Underline */
.dark-mode u {
    text-decoration-color: yellow !important; /* Yellow underline in dark mode */
}

/* New rule to ensure underlines within modals are always black */
.modal-content u {
    text-decoration-color: black !important;
    text-decoration-thickness: 2px !important;
    text-decoration-style: solid !important;
    text-decoration-skip-ink: none;
    font-weight: bold !important;
    color: #C21807 !important;
}

.dark-mode .modal-content u {
    text-decoration-color: yellow !important;
    color: white !important;	
}

body {
    font-family: Arial, sans-serif;
    background-color: #f9fafb;
    color: #2d3748;
    line-height: 1.6;
    font-size: 16px;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
    min-height: 100vh;
    padding: 20px;
    overflow-y: auto;
    position: relative;
    transition: background-color 0.3s, color 0.3s;
}

body.dark-mode {
    background-color: #121212;
    color: #e2e8f0;
}

/* Container */
.container {
    background-color: #ffffff;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 40px 30px;
    border-radius: 12px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    max-width: 790px;
    width: 100%;
    text-align: center;
    position: relative;
    transition: background-color 0.3s, box-shadow 0.3s;
    margin-top: 20px;
}

body.dark-mode .container {
    background-color: #1a202c;
    box-shadow: 0 10px 25px rgba(255, 255, 255, 0.1);
}

/* Page Title */
.page-title {
    text-align: center;
    color: #333333;
    font-size: 28px;
    margin-bottom: 20px;
    line-height: 1.4;
    padding-top: 10px;
    position: relative;
    z-index: 1;
    transition: color 0.3s ease, background-color 0.3s ease;
}

body.dark-mode .page-title {
    color: #ffffff;
}

/* Score, Start Over, and Dark Mode Toggle Container */
.score-container {
    position: fixed;
    top: 20px;
    right: 40px;
    display: flex;
    flex-direction: column;
    align-items: stretch;
    width: 150px;
    z-index: 1001;
    gap: 10px;
    transition: background-color 0.3s ease, box-shadow 0.3s ease;
}

/* Dark Mode Toggle */
.dark-mode-toggle {
    justify-content: flex-start;
    padding: 0 10px;
    gap: 10px;
    cursor: default;
}

/* Toggle Switch Styles */
.switch {
    position: relative;
    width: 40px;
    height: 20px;
    display: inline-block;
}

.switch input {
    display: none;
}

.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #ccc;
    transition: 0.4s;
    border-radius: 20px;
}

.slider::before {
    position: absolute;
    content: "";
    height: 14px;
    width: 14px;
    left: 3px;
    bottom: 3px;
    background-color: white;
    transition: 0.4s;
    border-radius: 50%;
}

.switch input:checked+.slider {
    background-color: #007BFF;
}

.switch input:checked+.slider::before {
    transform: translateX(20px);
}

body.dark-mode .slider {
    background-color: #666;
}

body.dark-mode .switch input:checked+.slider {
    background-color: #444;
}

/* Start Over Button */
.start-over {
    background-color: #007BFF;
    color: white;
    cursor: pointer;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.3s ease;
}

.start-over:hover {
    background-color: #0056b3;
    color: white;
}

body.dark-mode .start-over {
    background-color: #444;
}

body.dark-mode .start-over:hover {
    background-color: #222;
}

/* Modal */
.modal {
    display: none;
    position: fixed;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 1000;
    justify-content: center;
    align-items: center;
    opacity: 0;
    transition: opacity 0.3s ease-in-out;
}

.modal-content {
    background: white;
    color: black;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    text-align: center;
    max-width: 600px;
    width: 80%;
    /* Removed the transform property */
    transition: transform 0.3s ease-in-out;
}

body.dark-mode .modal-content {
    background-color: #1a202c;
    color: #edf2f7;
    border-color: #2d3748;
}

.modal.show {
    display: flex;
    opacity: 1;
}

/* Close Button Styling */
.close-button {
    float: right;
    padding: 5px;
    cursor: pointer;
    font-size: 18px;
    background-color: #ccc;
    border: none;
    border-radius: 50%;
    line-height: 20px;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.3s, transform 0.3s;
}

body.dark-mode .close-button {
    background-color: #555;
    color: #ffcccc;
}

.close-button:hover {
    background-color: #f44336;
    transform: scale(1.2) rotate(90deg);
    color: white;
}

body.dark-mode .close-button:hover {
    background-color: #ff6666;
    color: white;
    transform: scale(1.2) rotate(90deg);
}

/* Question Text */
.question-text {
    color: #000;
    transition: color 0.3s;
    margin-top: 30px;
    margin-bottom: 30px;
}

.dark-mode .question-text {
    color: #fff;
}

/* Highlight styles */
.highlight {
    font-weight: bold;
    color: #007bff;
	cursor: pointer;
}

.dark-mode .highlight {
    font-weight: bold;
    color: yellow;
}

.gender {
    font-style: none;
}

/* Answer Button Styles */
.answer {
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
  text-decoration: none;
  color: #000000;
  font-size: 18px;
  border-radius: 5px;
  width: 200px;
  height: 60px;
  position: relative;
  transition: 0.3s;
  background-color: #ffffff;
  font-weight: 500;
  border: 1px solid #000000; /* Set a single border initially */
  cursor: pointer;
}

/* Dark Mode: Answer Button Styles */
body.dark-mode .answer {
  color: #ffffff; /* Text color for dark mode */
  background-color: #333333; /* Background color for dark mode */
  border: 1px solid #ffffff; /* Single border initially for dark mode */
}

.answer::before,
.answer::after {
  content: "";
  display: block;
  border-radius: 5px;
  position: absolute;
  border: 1px solid #000000;
  width: 100%;
  height: 100%;
  transition: 0.3s;
}

/* Dark Mode: Additional border adjustments */
body.dark-mode .answer::before,
body.dark-mode .answer::after {
  border-color: #ffffff; /* Border color for dark mode */
}

.answer::before {
  top: -4px;
  left: -4px;
}

.answer::after {
  top: 4px;
  left: 4px;
}

/* On hover, the borders move inward */
.answer:hover::before,
.answer:hover::after {
  top: 0px;
  left: 0;
}

/* When an answer is clicked, remove the extra borders */
.answer.clicked::before,
.answer.clicked::after {
    display: none;
}

/* Style for a correct answer */
.answer.correct {
  background-color: green; /* Background for correct answer in light mode */
  color: white;
  border: 2px solid green; /* Single border for correct answer in light mode */
}

/* Dark Mode: Correct answer */
body.dark-mode .answer.correct {
  background-color: #007b00; /* Dark green for correct answer in dark mode */
  border: 2px solid #007b00; /* Dark green border for correct answer */
}

/* Style for an incorrect answer */
.answer.incorrect {
  background-color: red; /* Background for incorrect answer in light mode */
  color: white;
  border: 2px solid red; /* Single border for incorrect answer in light mode */
}

/* Dark Mode: Incorrect answer */
body.dark-mode .answer.incorrect {
  background-color: #b30000; /* Dark red for incorrect answer in dark mode */
  border: 2px solid #b30000; /* Dark red border for incorrect answer */
}

.dark-mode .answer {
    background-color: #333;
    color: #fff;
    border-color: #555;
    box-shadow: 0 2px 4px rgba(255, 255, 255, 0.1);
}

/* Hover Effects */
.buttons:not(.answered) .answer:hover {
    background-color: lightgray;
}

.dark-mode .buttons:not(.answered) .answer:hover {
    background-color: #444;
}

/* Active State */
.buttons:not(.answered) .answer:active {
    transform: scale(0.98);
}

/* Correct and Incorrect Styles */
.correct {
    background-color: green;
    color: white;
}

.dark-mode .correct {
    background-color: #00b300;
    color: white;
}

.incorrect {
    background-color: red;
    color: white;
}

.dark-mode .incorrect {
    background-color: #ff4d4d;
    color: white;
}

/* Unified Button Styling */
.score,
.dark-mode-toggle,
.start-over {
    width: 100%;
    height: 40px;
    padding: 0 10px;
    box-sizing: border-box;
    font-size: 16px;
    text-align: center;
    background-color: #fff;
    color: #333;
    border-radius: 5px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.3s, color 0.3s;
    cursor: pointer;
    border: none;
}

.dark-mode .score,
.dark-mode .dark-mode-toggle,
.dark-mode .start-over {
    background-color: #2d3748;
    color: #edf2f7;
}

/* Tooltip Styling */
.tooltip {
    position: absolute;
    background-color: #333;
    color: #fff;
    padding: 6px 10px;
    border-radius: 4px;
    white-space: nowrap;
    font-size: 0.9rem;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s, visibility 0.3s;
    z-index: 10;
}

.dark-mode .tooltip {
    background-color: #555;
    color: #fff;
}

.tooltip::after {
    content: '';
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    border-width: 5px;
    border-style: solid;
    border-color: #333 transparent transparent transparent;
}

.dark-mode .tooltip::after {
    border-color: #555 transparent transparent transparent;
}

/* Show Tooltip When Visible Class is Added */
.tooltip.visible {
    opacity: 1;
    visibility: visible;
}

body.dark-mode .tooltip::after {
    border-color: #555 transparent transparent transparent;
}

.word:hover .tooltip {
    opacity: 1;
    visibility: visible;
}

/* Word Styling */
.word {
    position: relative;
    cursor: pointer;
    color: #2d3748;
    transition: color 0.3s, background-color 0.3s;
    display: inline-block;
    border-radius: 4px;
}

.dark-mode .word {
    color: #edf2f7;
}

.word::after {
    content: '';
    position: absolute;
    left: 50%;
    bottom: -2px;
    width: 100%;
    height: 3px;
    background-color: currentColor;
    transform: translateX(-50%) scaleX(0);
    transform-origin: center;
    transition: transform 0.3s ease;
}

.word:hover::after,
.word:focus::after {
    transform: translateX(-50%) scaleX(1);
}

.word:hover,
.word:focus {
    background-color: rgba(45, 55, 72, 0.1);
}

body.dark-mode .word:hover,
body.dark-mode .word:focus {
    background-color: rgba(226, 232, 240, 0.1);
}

/* Buttons Container */
.buttons {
    display: grid;
    grid-template-columns: repeat(2, 1fr); /* Fixed 2 columns */
    gap: 25px 25px; /* Increase horizontal and vertical gap */
    width: 100%;
    max-width: 400px; /* Adjusted for better alignment */
    margin: 20px auto; /* Add vertical spacing and center horizontally */
    justify-items: center; /* Center buttons within grid cells */
}

/* Disable pointer and hover for answered state */
.buttons.answered .answer {
    cursor: default;
    pointer-events: none;
}

.buttons.answered .answer:hover {
    background-color: initial;
}

.dark-mode .buttons.answered .answer:hover {
    background-color: initial;
}

/* Fade effect */
.fade-out {
    opacity: 0;
    transition: opacity 1s ease-out;
}

.fade-in {
    opacity: 1;
    transition: opacity 1s ease-in;
}

/* Style for feedback text */
.feedback {
    font-size: 30px;
    margin-top: 40px;
    color: #333;
    transition: color 0.3s;
    text-align: center;
    /* Center the text */
}

.dark-mode .feedback {
    color: #ddd;
}

/* Progress bar styles */
.progress-container {
    width: 100%;
    max-width: 400px;
    background-color: #f3f3f3;
    border-radius: 20px;
    margin: 20px 0;
    height: 20px;
    overflow: hidden;
}

.progress-bar {
    height: 100%;
    width: 0%;
    background-color: #4caf50;
    border-radius: 20px;
    transition: width 0.5s ease-in-out;
}

/* Modal Content Table */
.modal-content table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
}

.modal-content th,
.modal-content td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: left;
}

/* Light Mode Table Header Styles */
.modal-content th {
    background-color: #f2f2f2;
    font-weight: bold;
    color: #000;
    /* Black text */
}

/* Dark Mode Table Header Styles */
body.dark-mode .modal-content th {
    background-color: #2d3748;
    /* Dark blue-gray */
    color: #edf2f7;
    /* Light gray text */
}

/* Media Queries for Responsiveness */
@media (max-width: 600px) {
    .score-container {
        top: 10px;
        right: 10px;
        width: 120px;
        gap: 10px;
        /* Reduced gap for smaller screens */
    }

    .score,
    .start-over,
    .dark-mode-toggle {
        font-size: 14px;
        height: 45px;
        /* Slightly smaller height for smaller screens */
        padding: 0 10px;
        /* Reduced horizontal padding */
    }

    .start-over {
        padding: 0 12px;
    }

    .dark-mode-toggle {
        padding: 0 8px;
        gap: 8px;
    }

    /* Adjust switch size for smaller screens */
    .switch {
        width: 35px;
        height: 18px;
    }

    .slider::before {
        height: 12px;
        width: 12px;
        left: 3px;
        bottom: 3px;
    }

    .switch input:checked+.slider::before {
        transform: translateX(18px);
    }
}
    </style>
</head>
<body>

    <!-- Container for Score, Dark Mode Toggle, Info Button, and Start Over Button -->
    <div class="score-container">
      <!-- Score Counter -->
      <div class="score">Score:&nbsp; <span id="score">0</span>&nbsp;/&nbsp;<span id="total-score">0</span></div>
      <!-- Dark Mode Toggle -->
      <div class="dark-mode-toggle">
        <label class="switch">
          <input type="checkbox" id="darkModeSwitch">
          <span class="slider"></span>
        </label>
        <span>Dark mode</span>
      </div>
      <!-- Info Button -->
      <button class="start-over" id="info-button" onclick="openModal('infoModal')">
        <i class="fas fa-info-circle" style="margin-right: 8px;"></i> Info </button>
      <!-- Start Over Button -->
      <button class="start-over" onclick="startOver()">
        <i class="fas fa-rotate-left" style="margin-right: 8px;"></i> Start over </button>
    </div>
    <!-- Page Title -->
    <h1 class="page-title">Predict how to pluralise this</h1>
	<p>Read the "Info" to understand what this exercise is about.</p>
    <!-- Progress Bar -->
    <div class="progress-container">
        <div class="progress-bar" id="progress-bar"></div>
    </div>
       <h1 class="question-text" id="question-text">
            <center><span class="gender" id="gender">(en)</span> <span class="highlight" id="noun">stol</span><br /></center>
        </h1>
        <div class="buttons" id="buttons-container">
            <!-- Answer options will be inserted dynamically here -->
        </div>
        <p id="feedback" class="feedback"></p>
		<!-- Info Modal -->
		<div class="modal" id="infoModal" role="dialog" aria-modal="true" aria-labelledby="infoModalTitle">
			<div class="modal-content">
				<button class="close-button" type="button" onclick="closeModal('infoModal')" aria-label="Close modal">&times;</button>
				<h2 id="infoModalTitle">Apply these eight prediction rules</h2>
				<p>For a very large portion of Swedish nouns (over 65 percent), the plural form can be predicted. Here you will become familiar with eight important tools. Keep an eye on (1) the <u>gender</u> of the noun, (2) how the word is <u>stressed</u> (see the underlined vowels), and (3) how the word <u>ends</u>. If you don't know what the word means, you only need to hover over/click the word.</p>
					<table>
						<tr>
							<th>Rule</th>
							<th>Plural ending</th>
						</tr>
						<tr>
							<td>1. Final stress (aff<u>ä</u>r, kaf<u>é</u>)</td>
							<td>Add -er</td>
						</tr>
						<tr>
							<td>2. N gender ending in unstressed -a (kv<u>i</u>nna, k<u>a</u>ka)</td>
							<td>Drop -a, add -or</td>
						</tr>
						<tr>
							<td>3. N gender ending in unstressed -e (p<u>o</u>jke, v<u>a</u>nte)</td>
							<td>Drop -e, add -ar</td>
						</tr>
						<tr>
							<td>4. T gender ending in unstressed vowel (<u>ä</u>pple, m<u>i</u>nne)</td>
							<td>Add -n</td>
						</tr>
						<tr>
							<td>5. T gender ending in consonant (h<u>u</u>s, b<u>a</u>rn)</td>
							<td>No change (Ø)</td>
						</tr>
						<tr>
							<td>6. Ends in -are / -er (h<u>a</u>mb<u>u</u>rgare, <u>i</u>ndier)</td>
							<td>No change (Ø)</td>
						</tr>
						<tr>
							<td>7. Ends in -(n)ing (t<u>i</u>dn<u>i</u>ng, r<u>ä</u>kn<u>i</u>ng)</td>
							<td>Add -ar</td>
						</tr>
						<tr>
							<td>8. Ends in -het (n<u>y</u>h<u>e</u>t, h<u>e</u>mligh<u>e</u>t)</td>
							<td>Add -er</td>
						</tr>
					</table>
				<!-- Add more informational content as needed -->
			</div>
		</div>
    <!-- Congratulations Modal -->
		<div class="modal" id="congratulationsModal" role="dialog" aria-modal="true" aria-labelledby="congratulationsModalTitle">
			<div class="modal-content">
				<button class="close-button" type="button" onclick="closeModal('congratulationsModal')" aria-label="Close modal">&times;</button>
				<h2 id="congratulationsModalTitle">Grattis!</h2>
				<p>Du har svarat rätt på alla frågor!</p>
			</div>
		</div>
	</div>
    <!-- Tooltip element -->
    <div class="tooltip" id="custom-tooltip"></div>

    <script>
// Hämta referenser
const toggleSwitch = document.getElementById('darkModeSwitch');
const body = document.body;
const feedback = document.getElementById('feedback');
const buttonsContainer = document.getElementById('buttons-container');
const questionText = document.getElementById('question-text');
const tooltip = document.getElementById('custom-tooltip');
const progressBar = document.getElementById('progress-bar');
// Kolla om användaren tidigare valt ett tema och tillämpa det
if(localStorage.getItem('theme') === 'dark') {
	body.classList.add('dark-mode');
	toggleSwitch.checked = true;
}
// Toggle-funktion
toggleSwitch.addEventListener('change', () => {
	if(toggleSwitch.checked) {
		body.classList.add('dark-mode');
		localStorage.setItem('theme', 'dark');
	} else {
		body.classList.remove('dark-mode');
		localStorage.setItem('theme', 'light');
	}
});

function openModal() {
	const modal = document.getElementById('infoModal');
	modal.classList.add('show');
}

function closeModal() {
	const modal = document.getElementById('infoModal');
	modal.classList.remove('show');
}
// Close the modal when clicking outside of the modal content
window.addEventListener('click', (event) => {
	const infoModal = document.getElementById('infoModal');
	const congratulationsModal = document.getElementById('congratulationsModal');
	if(event.target === infoModal) {
		closeModal('infoModal');
	}
	if(event.target === congratulationsModal) {
		closeModal('congratulationsModal');
	}
});
// Array av frågor med tooltips
const questions = [{
	gender: "(ett)",
	noun: "<u>a</u>rb<u>e</u>te",
	options: ["arbeten", "arbetar", "arbetor", "arbete"],
	correctAnswer: 0,
	tooltip: "work"
}, {
	gender: "(ett)",
	noun: "m<u>i</u>nne",
	options: ["minnen", "minnar", "minnor", "minne"],
	correctAnswer: 0,
	tooltip: "memory"
}, {
	gender: "(ett)",
	noun: "<u>o</u>mr<u>å</u>de",
	options: ["områden", "områdar", "områdor", "område"],
	correctAnswer: 0,
	tooltip: "area"
}, {
	gender: "(ett)",
	noun: "s<u>y</u>fte",
	options: ["syften", "syftar", "syftor", "syfte"],
	correctAnswer: 0,
	tooltip: "purpose"
}, {
	gender: "(ett)",
	noun: "m<u>ä</u>rke",
	options: ["märken", "märkar", "märkor", "märke"],
	correctAnswer: 0,
	tooltip: "mark/brand"
}, {
	gender: "(ett)",
	noun: "t<u>i</u>llf<u>ä</u>lle",
	options: ["tillfällen", "tillfällar", "tillfällor", "tillfälle"],
	correctAnswer: 0,
	tooltip: "occasion"
}, {
	gender: "(ett)",
	noun: "m<u>ö</u>te",
	options: ["möten", "mötar", "mötor", "möte"],
	correctAnswer: 0,
	tooltip: "meeting"
}, {
	gender: "(ett)",
	noun: "<u>ä</u>mne",
	options: ["ämnen", "ämnar", "ämnor", "ämne"],
	correctAnswer: 0,
	tooltip: "subject/topic"
}, {
	gender: "(ett)",
	noun: "<u>ä</u>rende",
	options: ["ärenden", "ärendar", "ärendor", "ärende"],
	correctAnswer: 0,
	tooltip: "case/matter"
}, {
	gender: "(ett)",
	noun: "intr<u>e</u>sse",
	options: ["intressen", "intressar", "intressor", "intresse"],
	correctAnswer: 0,
	tooltip: "interest"
}, {
	gender: "(en)",
	noun: "t<u>e</u>ckning",
	options: ["teckningar", "teckninger", "teckningor", "teckning"],
	correctAnswer: 0,
	tooltip: "drawing"
}, {
	gender: "(en)",
	noun: "<u>a</u>nst<u>ä</u>llning",
	options: ["anställningar", "anställninger", "anställningor", "anställning"],
	correctAnswer: 0,
	tooltip: "employment"
}, {
	gender: "(en)",
	noun: "förp<u>a</u>ckning",
	options: ["förpackningar", "förpackninger", "förpackningor", "förpackning"],
	correctAnswer: 0,
	tooltip: "package"
}, {
	gender: "(en)",
	noun: "r<u>ä</u>kning",
	options: ["räkningar", "räkninger", "räkningor", "räkning"],
	correctAnswer: 0,
	tooltip: "bill"
}, {
	gender: "(en)",
	noun: "<u>u</u>ppf<u>i</u>nning",
	options: ["uppfinningar", "uppfinninger", "uppfinningor", "uppfinning"],
	correctAnswer: 0,
	tooltip: "invention"
}, {
	gender: "(en)",
	noun: "<u>u</u>tb<u>i</u>ldning",
	options: ["utbildningar", "utbildninger", "utbildningor", "utbildning"],
	correctAnswer: 0,
	tooltip: "education"
}, {
	gender: "(en)",
	noun: "pr<u>ö</u>vning",
	options: ["prövningar", "prövninger", "prövningor", "prövning"],
	correctAnswer: 0,
	tooltip: "trial/test"
}, {
	gender: "(en)",
	noun: "förb<u>ä</u>ttring",
	options: ["förbättringar", "förbättringer", "förbättringor", "förbättring"],
	correctAnswer: 0,
	tooltip: "improvement"
}, {
	gender: "(en)",
	noun: "bed<u>ö</u>mning",
	options: ["bedömningar", "bedömninger", "bedömningor", "bedömning"],
	correctAnswer: 0,
	tooltip: "assessment"
}, {
	gender: "(en)",
	noun: "f<u>ö</u>rest<u>ä</u>llning",
	options: ["föreställningar", "föreställninger", "föreställningor", "föreställning"],
	correctAnswer: 0,
	tooltip: "performance"
}, {
	gender: "(en)",
	noun: "p<u>o</u>jke",
	options: ["pojkar", "pojker", "pojkor", "pojken"],
	correctAnswer: 0,
	tooltip: "boy"
}, {
	gender: "(en)",
	noun: "k<u>i</u>lle",
	options: ["killar", "killer", "killor", "killen"],
	correctAnswer: 0,
	tooltip: "guy"
}, {
	gender: "(en)",
	noun: "j<u>ä</u>tte",
	options: ["jättar", "jätter", "jättor", "jätten"],
	correctAnswer: 0,
	tooltip: "giant"
}, {
	gender: "(en)",
	noun: "g<u>u</u>bbe",
	options: ["gubbar", "gubber", "gubbor", "gubben"],
	correctAnswer: 0,
	tooltip: "old man"
}, {
	gender: "(en)",
	noun: "t<u>a</u>nke",
	options: ["tankar", "tanker", "tankor", "tanken"],
	correctAnswer: 0,
	tooltip: "thought"
}, {
	gender: "(en)",
	noun: "m<u>a</u>ge",
	options: ["magar", "mager", "magor", "magen"],
	correctAnswer: 0,
	tooltip: "stomach"
}, {
	gender: "(en)",
	noun: "f<u>i</u>nne",
	options: ["finnar", "finner", "finnor", "finnen"],
	correctAnswer: 0,
	tooltip: "pimple/Finn"
}, {
	gender: "(en)",
	noun: "h<u>a</u>re",
	options: ["harar", "harer", "haror", "haren"],
	correctAnswer: 0,
	tooltip: "hare"
}, {
	gender: "(en)",
	noun: "h<u>e</u>rre",
	options: ["herrar", "herrer", "herror", "herren"],
	correctAnswer: 0,
	tooltip: "gentleman"
}, {
	gender: "(en)",
	noun: "st<u>e</u>ge",
	options: ["stegar", "steger", "stegor", "stegen"],
	correctAnswer: 0,
	tooltip: "ladder"
}, {
	gender: "(en)",
	noun: "<u>a</u>rb<u>e</u>tare",
	options: ["arbetare", "arbetaren", "arbetar", "arbetor"],
	correctAnswer: 0,
	tooltip: "worker"
}, {
	gender: "(en)",
	noun: "l<u>e</u>dare",
	options: ["ledare", "ledaren", "ledar", "ledor"],
	correctAnswer: 0,
	tooltip: "leader"
}, {
	gender: "(en)",
	noun: "b<u>y</u>ggare",
	options: ["byggare", "byggaren", "byggar", "byggor"],
	correctAnswer: 0,
	tooltip: "builder"
}, {
	gender: "(en)",
	noun: "förf<u>a</u>ttare",
	options: ["författare", "författaren", "författar", "författor"],
	correctAnswer: 0,
	tooltip: "author"
}, {
	gender: "(en)",
	noun: "m<u>å</u>lare",
	options: ["målare", "målaren", "målar", "målor"],
	correctAnswer: 0,
	tooltip: "painter"
}, {
	gender: "(en)",
	noun: "sp<u>e</u>lare",
	options: ["spelare", "spelaren", "spelar", "spelor"],
	correctAnswer: 0,
	tooltip: "player"
}, {
	gender: "(en)",
	noun: "<u>ä</u>gare",
	options: ["ägare", "ägaren", "ägar", "ägor"],
	correctAnswer: 0,
	tooltip: "owner"
}, {
	gender: "(en)",
	noun: "l<u>ä</u>rare",
	options: ["lärare", "läraren", "lärar", "läror"],
	correctAnswer: 0,
	tooltip: "teacher"
}, {
	gender: "(en)",
	noun: "bes<u>ö</u>kare",
	options: ["besökare", "besökaren", "besökar", "besökor"],
	correctAnswer: 0,
	tooltip: "visitor"
}, {
	gender: "(en)",
	noun: "f<u>o</u>rskare",
	options: ["forskare", "forskaren", "forskar", "forskor"],
	correctAnswer: 0,
	tooltip: "researcher"
}, {
	gender: "(en)",
	noun: "fl<u>i</u>cka",
	options: ["flickor", "flickar", "flicker", "flickan"],
	correctAnswer: 0,
	tooltip: "girl"
}, {
	gender: "(en)",
	noun: "m<u>ö</u>ssa",
	options: ["mössor", "mössar", "mösser", "mössan"],
	correctAnswer: 0,
	tooltip: "cap"
}, {
	gender: "(en)",
	noun: "kl<u>o</u>cka",
	options: ["klockor", "klockar", "klocker", "klockan"],
	correctAnswer: 0,
	tooltip: "clock"
}, {
	gender: "(en)",
	noun: "fl<u>a</u>ska",
	options: ["flaskor", "flaskar", "flasker", "flaskan"],
	correctAnswer: 0,
	tooltip: "bottle"
}, {
	gender: "(en)",
	noun: "v<u>ä</u>ska",
	options: ["väskor", "väskar", "väsker", "väskan"],
	correctAnswer: 0,
	tooltip: "bag"
}, {
	gender: "(en)",
	noun: "g<u>a</u>ta",
	options: ["gator", "gatar", "gater", "gatan"],
	correctAnswer: 0,
	tooltip: "street"
}, {
	gender: "(en)",
	noun: "fl<u>u</u>ga",
	options: ["flugor", "flugar", "fluger", "flugan"],
	correctAnswer: 0,
	tooltip: "fly"
}, {
	gender: "(en)",
	noun: "g<u>å</u>va",
	options: ["gåvor", "gåvar", "gåver", "gåvan"],
	correctAnswer: 0,
	tooltip: "gift"
}, {
	gender: "(en)",
	noun: "h<u>ö</u>na",
	options: ["hönor", "hönar", "höner", "hönan"],
	correctAnswer: 0,
	tooltip: "hen"
}, {
	gender: "(en)",
	noun: "p<u>ä</u>rla",
	options: ["pärlor", "pärlar", "pärler", "pärlan"],
	correctAnswer: 0,
	tooltip: "pearl"
}, {
	gender: "(ett)",
	noun: "b<u>a</u>rn",
	options: ["barn", "barner", "barnar", "barnor"],
	correctAnswer: 0,
	tooltip: "child"
}, {
	gender: "(ett)",
	noun: "f<u>ä</u>lt",
	options: ["fält", "fälter", "fältar", "fältor"],
	correctAnswer: 0,
	tooltip: "field"
}, {
	gender: "(ett)",
	noun: "h<u>e</u>m",
	options: ["hem", "hemer", "hemar", "hemor"],
	correctAnswer: 0,
	tooltip: "home"
}, {
	gender: "(ett)",
	noun: "hj<u>u</u>l",
	options: ["hjul", "hjuler", "hjular", "hjulor"],
	correctAnswer: 0,
	tooltip: "wheel"
}, {
	gender: "(ett)",
	noun: "h<u>o</u>rn",
	options: ["horn", "horner", "hornar", "hornor"],
	correctAnswer: 0,
	tooltip: "horn"
}, {
	gender: "(ett)",
	noun: "h<u>u</u>s",
	options: ["hus", "huser", "husar", "husor"],
	correctAnswer: 0,
	tooltip: "house"
}, {
	gender: "(ett)",
	noun: "<u>å</u>r",
	options: ["år", "årer", "årar", "åror"],
	correctAnswer: 0,
	tooltip: "year"
}, {
	gender: "(ett)",
	noun: "k<u>o</u>rt",
	options: ["kort", "korter", "kortar", "kortor"],
	correctAnswer: 0,
	tooltip: "card"
}, {
	gender: "(ett)",
	noun: "b<u>o</u>rd",
	options: ["bord", "border", "bordar", "bordor"],
	correctAnswer: 0,
	tooltip: "table"
}, {
	gender: "(ett)",
	noun: "sv<u>a</u>r",
	options: ["svar", "svarer", "svarar", "svaror"],
	correctAnswer: 0,
	tooltip: "answer"
}, {
	gender: "(en)",
	noun: "medic<u>i</u>n",
	options: ["mediciner", "medicinar", "medicinor", "medicin"],
	correctAnswer: 0,
	tooltip: "medicine"
}, {
	gender: "(en)",
	noun: "gran<u>a</u>t",
	options: ["granater", "granatar", "granator", "granat"],
	correctAnswer: 0,
	tooltip: "grenade"
}, {
	gender: "(en)",
	noun: "rab<u>a</u>tt",
	options: ["rabatter", "rabattar", "rabattor", "rabatt"],
	correctAnswer: 0,
	tooltip: "discount"
}, {
	gender: "(en)",
	noun: "direkt<u>ö</u>r",
	options: ["direktörer", "direktörar", "direktöror", "direktör"],
	correctAnswer: 0,
	tooltip: "director/vice-president"
}, {
	gender: "(en)",
	noun: "id<u>é</u>",
	options: ["idéer", "idéar", "idéor", "idé"],
	correctAnswer: 0,
	tooltip: "idea"
}, {
	gender: "(en)",
	noun: "rak<u>e</u>t",
	options: ["raketer", "raketar", "raketor", "raket"],
	correctAnswer: 0,
	tooltip: "rocket"
}, {
	gender: "(en)",
	noun: "det<u>a</u>lj",
	options: ["detaljer", "detaljar", "detaljor", "detalj"],
	correctAnswer: 0,
	tooltip: "detail"
}, {
	gender: "(en)",
	noun: "att<u>a</u>ck",
	options: ["attacker", "attackar", "attackor", "attack"],
	correctAnswer: 0,
	tooltip: "attack"
}, {
	gender: "(en)",
	noun: "met<u>o</u>d",
	options: ["metoder", "metodar", "metodor", "metod"],
	correctAnswer: 0,
	tooltip: "method"
}, {
	gender: "(en)",
	noun: "sign<u>a</u>l",
	options: ["signaler", "signalar", "signalor", "signal"],
	correctAnswer: 0,
	tooltip: "signal"
}, {
	gender: "(en)",
	noun: "ir<u>a</u>nier",
	options: ["iranier", "iraniar", "iranior", "iranien"],
	correctAnswer: 0,
	tooltip: "Iranian"
}, {
	gender: "(en)",
	noun: "<u>i</u>ndier",
	options: ["indier", "indiar", "indior", "indien"],
	correctAnswer: 0,
	tooltip: "Indian"
}, {
	gender: "(en)",
	noun: "m<u>u</u>siker",
	options: ["musiker", "musikari", "musikior", "musikien"],
	correctAnswer: 0,
	tooltip: "musician"
}, {
	gender: "(en)",
	noun: "bot<u>a</u>niker",
	options: ["botaniker", "botanikar", "botanikior", "botanikien"],
	correctAnswer: 0,
	tooltip: "botanist"
}, {
	gender: "(en)",
	noun: "t<u>e</u>kniker",
	options: ["tekniker", "teknikar", "teknikior", "teknikien"],
	correctAnswer: 0,
	tooltip: "technician"
}, {
	gender: "(en)",
	noun: "kr<u>i</u>tiker",
	options: ["kritiker", "kritikar", "kritikior", "kritikien"],
	correctAnswer: 0,
	tooltip: "critic/reviewer"
}, {
	gender: "(en)",
	noun: "<u>o</u>ptiker",
	options: ["optiker", "optikar", "optikior", "optikien"],
	correctAnswer: 0,
	tooltip: "optician"
}, {
	gender: "(en)",
	noun: "sk<u>e</u>ptiker",
	options: ["skeptiker", "skeptikar", "skeptikior", "skeptikien"],
	correctAnswer: 0,
	tooltip: "skeptic"
}, {
	gender: "(en)",
	noun: "alg<u>e</u>rier",
	options: ["algerier", "algeriar", "algerior", "algerien"],
	correctAnswer: 0,
	tooltip: "Algerian"
}, {
	gender: "(en)",
	noun: "ha<u>i</u>tier",
	options: ["haitier", "haitiar", "haitiior", "haitiien"],
	correctAnswer: 0,
	tooltip: "Haitian"
}, ];
// Calculate the total number of questions
const totalQuestions = questions.length;
// Display the total number of questions in the total score element
document.getElementById('total-score').textContent = totalQuestions;
// State tracking
let usedQuestions = [];
let correctCount = 0;
let incorrectCount = 0;
// Function to shuffle an array
function shuffleArray(array) {
	for(let i = array.length - 1; i > 0; i--) {
		const j = Math.floor(Math.random() * (i + 1));
		[array[i], array[j]] = [array[j], array[i]];
	}
}
// Funktion för att visa tooltip
function showTooltip(event, text) {
	tooltip.textContent = text;
	tooltip.style.display = 'block';
	// Get the noun element's position
	const nounRect = event.target.getBoundingClientRect();
	const screenWidth = window.innerWidth;
	// Position the tooltip above and slightly to the right of the noun
	let leftPosition = nounRect.left + 5;
	let topPosition = nounRect.top - tooltip.offsetHeight - 5;
	// Ensure tooltip stays within viewport on small screens
	if(leftPosition + tooltip.offsetWidth > screenWidth) {
		leftPosition = screenWidth - tooltip.offsetWidth - 10; // Adjust to fit within the screen
	}
	tooltip.style.left = `${leftPosition}px`;
	tooltip.style.top = `${topPosition}px`;
	// Add the visible class for smooth fade-in
	tooltip.classList.add('visible');
}
// Funktion för att gömma tooltip
function hideTooltip() {
	tooltip.classList.remove('visible');
}

function openPrinciplesModal() {
	const modal = document.getElementById('principlesModal');
	modal.classList.add('show');
}

function closePrinciplesModal() {
	const modal = document.getElementById('principlesModal');
	modal.classList.remove('show');
}
// Optional: Close the modal when clicking outside of the modal content
window.addEventListener('click', (event) => {
	const modal = document.getElementById('principlesModal');
	if(event.target === modal) {
		modal.classList.remove('show');
	}
});
// Funktion för att byta fråga med fade-effekt
function changeQuestion() {
	if(usedQuestions.length === questions.length) {
		showFinalScore();
		return;
	}
	questionText.classList.add('fade-out');
	buttonsContainer.classList.add('fade-out');
	feedback.classList.add('fade-out');
	setTimeout(() => {
		let randomIndex;
		do {
			randomIndex = Math.floor(Math.random() * questions.length);
		} while(usedQuestions.includes(randomIndex));
		usedQuestions.push(randomIndex);
		const newQuestion = questions[randomIndex];
		document.getElementById('gender').textContent = newQuestion.gender;
		const nounElement = document.getElementById('noun');
		nounElement.innerHTML = newQuestion.noun; // Changed from initialQuestion to newQuestion
		// Shuffle the options array before rendering buttons
		const shuffledOptions = [...newQuestion.options];
		shuffleArray(shuffledOptions);
		buttonsContainer.innerHTML = shuffledOptions.map((option) => {
			// Find the original index of the option for the checkAnswer function
			const originalIndex = newQuestion.options.indexOf(option);
			return `<button class="answer" onclick="checkAnswer(this, ${originalIndex}, ${randomIndex})">${option}</button>`;
		}).join('');
		feedback.textContent = '';
		// Add event listeners for tooltip (both mouse and touch for compatibility)
		nounElement.addEventListener('mouseenter', (e) => showTooltip(e, newQuestion.tooltip));
		nounElement.addEventListener('mouseleave', hideTooltip);
		nounElement.addEventListener('touchstart', (e) => showTooltip(e, newQuestion.tooltip));
		nounElement.addEventListener('touchend', hideTooltip);
		questionText.classList.remove('fade-out');
		buttonsContainer.classList.remove('fade-out');
		feedback.classList.remove('fade-out');
		questionText.classList.add('fade-in');
		buttonsContainer.classList.add('fade-in', 'grid-layout');
		feedback.classList.add('fade-in');
		buttonsContainer.classList.remove('answered');
		document.activeElement.blur();
		setTimeout(() => {
			questionText.classList.remove('fade-in');
			buttonsContainer.classList.remove('fade-in');
			feedback.classList.remove('fade-in');
		}, 1000);
	}, 1000);
}

// Kontrollera svar
function checkAnswer(button, answerIndex, questionIndex) {
	const correctAnswerIndex = questions[questionIndex].correctAnswer;
	button.classList.add("clicked");  // Add clicked class to the selected button

	// Disable further interactions to prevent multiple answers
	buttonsContainer.classList.add('answered');

	// Highlight the correct and incorrect answers
	const buttons = document.querySelectorAll('.answer');
	let correctButton = null;

	buttons.forEach((btn) => {
		if (btn.textContent === questions[questionIndex].options[correctAnswerIndex]) {
			correctButton = btn;
		}
		// Remove existing classes
		btn.classList.remove('correct', 'incorrect');
	});

	// Highlight the correct answer
	if (correctButton) {
		correctButton.classList.add('correct');
		if (button.textContent !== questions[questionIndex].options[correctAnswerIndex]) {
			// Add clicked class to correct button if the answer was incorrect
			correctButton.classList.add("clicked");
		}
	}

	// Highlight the incorrect answer if applicable
	if (button.textContent !== questions[questionIndex].options[correctAnswerIndex]) {
		button.classList.add('incorrect');
	}

	// Update feedback and counts
	if (answerIndex === correctAnswerIndex) {
		feedback.textContent = 'Correct answer';
		correctCount++; // Increment score by 1
	} else {
		feedback.innerHTML = `Wrong answer:<br>The correct answer is "${questions[questionIndex].options[correctAnswerIndex]}"`;
		incorrectCount++;
	}

	// Update the score display to reflect only correct answers
	document.getElementById('score').textContent = correctCount;

	// Update the progress bar
	updateProgressBar();

	// Proceed to the next question after a delay
	setTimeout(() => {
		changeQuestion();
	}, 1500);
}

// Funktion för att uppdatera progress bar
function updateProgressBar() {
	const progress = (usedQuestions.length / questions.length) * 100;
	progressBar.style.width = `${progress}%`;
}

// Select all answer buttons
const answerButtons = document.querySelectorAll('.answer');

// Add click event to each button
answerButtons.forEach(button => {
  button.addEventListener('click', () => {
    // Remove active class from all buttons
    answerButtons.forEach(btn => btn.classList.remove('active'));
    // Add active class to the clicked button
    button.classList.add('active');
  });
});

// Function to initialize the first question
function initializeQuestion() {
	const progressBar = document.getElementById('progress-bar');
	const buttonsContainer = document.getElementById('buttons-container');
	const questionText = document.getElementById('question-text');
	const feedback = document.getElementById('feedback');
	// Reset counts
	correctCount = 0;
	document.getElementById('score').textContent = correctCount;
	// Reset progress bar
	progressBar.style.width = '0%';
	// Select the first question
	let initialIndex;
	do {
		initialIndex = Math.floor(Math.random() * questions.length);
	} while(usedQuestions.includes(initialIndex));
	usedQuestions.push(initialIndex);
	const initialQuestion = questions[initialIndex];
	document.getElementById('gender').textContent = initialQuestion.gender;
	const nounElement = document.getElementById('noun');
	nounElement.innerHTML = initialQuestion.noun;
	// Remove existing tooltip listeners by cloning
	nounElement.replaceWith(nounElement.cloneNode(true));
	const updatedNounElement = document.getElementById('noun');
	// Shuffle options
	const shuffledOptions = [...initialQuestion.options];
	shuffleArray(shuffledOptions);
	// Render buttons
	buttonsContainer.innerHTML = shuffledOptions.map((option) => {
		const originalIndex = initialQuestion.options.indexOf(option);
		return `<button class="answer" onclick="checkAnswer(this, ${originalIndex}, ${initialIndex})">${option}</button>`;
	}).join('');
	feedback.textContent = '';
	// Add tooltip listeners
	updatedNounElement.addEventListener('mouseenter', (e) => showTooltip(e, initialQuestion.tooltip));
	updatedNounElement.addEventListener('mouseleave', hideTooltip);
	updatedNounElement.addEventListener('touchstart', (e) => showTooltip(e, initialQuestion.tooltip));
	updatedNounElement.addEventListener('touchend', hideTooltip);
}

function startOver() {
	// Option 1: Reload the page
	location.reload();
	// Option 2: Reset the quiz state without reloading
	/*
	usedQuestions = [];
	correctCount = 0;
	incorrectCount = 0;
	document.getElementById('score').textContent = '0';
	progressBar.style.width = '0%';
	initializeQuestion();
	*/
}
// Function to show the final score
function showFinalScore() {
	questionText.textContent = `You have answered all questions!`;
	buttonsContainer.innerHTML = `
        <p>Correct: ${correctCount}</p>
        <p>Incorrect: ${incorrectCount}</p>
        <button onclick="location.reload()">Start over</button>
    `;
	feedback.textContent = '';
}
// Initiera första frågan
initializeQuestion();
    </script>
</body>
</html>
