<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reflexiva & diftongerande verb ‚Äì tempus</title>
<style>
  body {
    font-family: "Segoe UI", sans-serif;
    margin: 0;
    background-color: #f9fafb;
    color: #222;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    min-height: 100vh;
    padding: 20px;
    transition: background 0.3s, color 0.3s;
  }
  body.dark { background-color: #1c1c1e; color: #f1f1f1; }

  h1 { text-align: center; margin-bottom: 10px; }
  .stats { margin-bottom: 20px; font-weight: 500; }

  .card {
    max-width: 400px; width: 100%;
    background: #fff; color: #222;
    border-radius: 12px; padding: 20px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    text-align: center;
    transition: background 0.3s, color 0.3s;
  }
  body.dark .card { background: #2a2a2d; color: #f1f1f1; }

  button {
    display: block;
    width: 100%;
    margin: 8px 0;
    padding: 10px;
    font-size: 1.1em;
    border-radius: 8px;
    border: none;
    background-color: #007aff;
    color: white;
    transition: background 0.2s;
    cursor: pointer;
    appearance: none;
    -webkit-appearance: none;
  }

  /* Neutraliserar alla systemf√§rger och focus-stilar */
  button::-moz-focus-inner { border: 0; }
  button:focus,
  button:focus-visible,
  button:active {
    outline: none !important;
    box-shadow: none !important;
    background-color: #007aff !important;
    filter: none !important;
  }

  button:hover { background-color: #005bb5; }

  .correct { background-color: #2ecc71 !important; }
  .wrong { background-color: #e74c3c !important; }

  .dark-toggle {
    position: fixed;
    top: 10px;
    right: 10px;
    background: #555;
    color: #fff;
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    font-size: 1.4em;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.3s;
  }
  .dark-toggle:hover { background: #777; }

  .restart {
    margin-top: 20px;
    background-color: #ff9500;
  }
  .restart:hover { background-color: #cc7a00; }
</style>
</head>
<body>

<button class="dark-toggle" id="themeBtn" onclick="toggleDark()">üåô</button>
<h1>Reflexiva & diftongerande verb ‚Äì tempus</h1>
<div class="stats" id="stats">Fr√•ga: 0 / 0 ‚Ä¢ R√§tt: 0</div>

<div class="card" id="quiz">
  <h2 id="verb"></h2>
  <div id="options"></div>
</div>

<button id="restartBtn" class="restart" style="display:none;" onclick="restartQuiz()">üîÑ B√∂rja om</button>

<script>
const verbs = [
  // Reflexiva
  {
    infinitive: "lavarse", sv: "tv√§tta sig",
    forms: {
      presens: ["me lavo","te lavas","se lava","nos lavamos","os lav√°is","se lavan"],
      preteritum: ["me lav√©","te lavaste","se lav√≥","nos lavamos","os lavasteis","se lavaron"],
      perfekt: ["me he lavado","te has lavado","se ha lavado","nos hemos lavado","os hab√©is lavado","se han lavado"],
      futurum: ["me voy a lavar","te vas a lavar","se va a lavar","nos vamos a lavar","os vais a lavar","se van a lavar"]
    },
    svTempus: {
      presens: ["Jag tv√§ttar mig","Du tv√§ttar dig","Han/hon tv√§ttar sig","Vi tv√§ttar oss","Ni tv√§ttar er","De tv√§ttar sig"],
      preteritum: ["Jag tv√§ttade mig","Du tv√§ttade dig","Han/hon tv√§ttade sig","Vi tv√§ttade oss","Ni tv√§ttade er","De tv√§ttade sig"],
      perfekt: ["Jag har tv√§ttat mig","Du har tv√§ttat dig","Han/hon har tv√§ttat sig","Vi har tv√§ttat oss","Ni har tv√§ttat er","De har tv√§ttat sig"],
      futurum: ["Jag ska tv√§tta mig","Du ska tv√§tta dig","Han/hon ska tv√§tta sig","Vi ska tv√§tta oss","Ni ska tv√§tta er","De ska tv√§tta sig"]
    }
  },
  {
    infinitive: "pintarse", sv: "sminka sig",
    forms: {
      presens: ["me pinto","te pintas","se pinta","nos pintamos","os pint√°is","se pintan"],
      preteritum: ["me pint√©","te pintaste","se pint√≥","nos pintamos","os pintasteis","se pintaron"],
      perfekt: ["me he pintado","te has pintado","se ha pintado","nos hemos pintado","os hab√©is pintado","se han pintado"],
      futurum: ["me voy a pintar","te vas a pintar","se va a pintar","nos vamos a pintar","os vais a pintar","se van a pintar"]
    },
    svTempus: {
      presens: ["Jag sminkar mig","Du sminkar dig","Han/hon sminkar sig","Vi sminkar oss","Ni sminkar er","De sminkar sig"],
      preteritum: ["Jag sminkade mig","Du sminkade dig","Han/hon sminkade sig","Vi sminkade oss","Ni sminkade er","De sminkade sig"],
      perfekt: ["Jag har sminkat mig","Du har sminkat dig","Han/hon har sminkat sig","Vi har sminkat oss","Ni har sminkat er","De har sminkat sig"],
      futurum: ["Jag ska sminka mig","Du ska sminka dig","Han/hon ska sminka sig","Vi ska sminka oss","Ni ska sminka er","De ska sminka sig"]
    }
  },

  // Diftongerande & andra
  {
    infinitive: "pensar", sv: "t√§nka",
    forms: {
      presens: ["pienso","piensas","piensa","pensamos","pens√°is","piensan"],
      preteritum: ["pens√©","pensaste","pens√≥","pensamos","pensasteis","pensaron"],
      perfekt: ["he pensado","has pensado","ha pensado","hemos pensado","hab√©is pensado","han pensado"],
      futurum: ["voy a pensar","vas a pensar","va a pensar","vamos a pensar","vais a pensar","van a pensar"]
    },
    svTempus: {
      presens:["Jag t√§nker","Du t√§nker","Han/hon t√§nker","Vi t√§nker","Ni t√§nker","De t√§nker"],
      preteritum:["Jag t√§nkte","Du t√§nkte","Han/hon t√§nkte","Vi t√§nkte","Ni t√§nkte","De t√§nkte"],
      perfekt:["Jag har t√§nkt","Du har t√§nkt","Han/hon har t√§nkt","Vi har t√§nkt","Ni har t√§nkt","De har t√§nkt"],
      futurum:["Jag ska t√§nka","Du ska t√§nka","Han/hon ska t√§nka","Vi ska t√§nka","Ni ska t√§nka","De ska t√§nka"]
    }
  },
  { infinitive: "cerrar", sv:"st√§nga",
    forms:{presens:["cierro","cierras","cierra","cerramos","cerr√°is","cierran"],
    preteritum:["cerr√©","cerraste","cerr√≥","cerramos","cerrasteis","cerraron"],
    perfekt:["he cerrado","has cerrado","ha cerrado","hemos cerrado","hab√©is cerrado","han cerrado"],
    futurum:["voy a cerrar","vas a cerrar","va a cerrar","vamos a cerrar","vais a cerrar","van a cerrar"]},
    svTempus:{
      presens:["Jag st√§nger","Du st√§nger","Han/hon st√§nger","Vi st√§nger","Ni st√§nger","De st√§nger"],
      preteritum:["Jag st√§ngde","Du st√§ngde","Han/hon st√§ngde","Vi st√§ngde","Ni st√§ngde","De st√§ngde"],
      perfekt:["Jag har st√§ngt","Du har st√§ngt","Han/hon har st√§ngt","Vi har st√§ngt","Ni har st√§ngt","De har st√§ngt"],
      futurum:["Jag ska st√§nga","Du ska st√§nga","Han/hon ska st√§nga","Vi ska st√§nga","Ni ska st√§nga","De ska st√§nga"]
    }
  },
  { infinitive:"jugar", sv:"spela/leka",
    forms:{presens:["juego","juegas","juega","jugamos","jug√°is","juegan"],
    preteritum:["jugu√©","jugaste","jug√≥","jugamos","jugasteis","jugaron"],
    perfekt:["he jugado","has jugado","ha jugado","hemos jugado","hab√©is jugado","han jugado"],
    futurum:["voy a jugar","vas a jugar","va a jugar","vamos a jugar","vais a jugar","van a jugar"]},
    svTempus:{
      presens:["Jag spelar","Du spelar","Han/hon spelar","Vi spelar","Ni spelar","De spelar"],
      preteritum:["Jag spelade","Du spelade","Han/hon spelade","Vi spelade","Ni spelade","De spelade"],
      perfekt:["Jag har spelat","Du har spelat","Han/hon har spelat","Vi har spelat","Ni har spelat","De har spelat"],
      futurum:["Jag ska spela","Du ska spela","Han/hon ska spela","Vi ska spela","Ni ska spela","De ska spela"]
    }
  },
  { infinitive:"poder", sv:"kunna",
    forms:{presens:["puedo","puedes","puede","podemos","pod√©is","pueden"],
    preteritum:["pude","pudiste","pudo","pudimos","pudisteis","pudieron"],
    perfekt:["he podido","has podido","ha podido","hemos podido","hab√©is podido","han podido"],
    futurum:["voy a poder","vas a poder","va a poder","vamos a poder","vais a poder","van a poder"]},
    svTempus:{
      presens:["Jag kan","Du kan","Han/hon kan","Vi kan","Ni kan","De kan"],
      preteritum:["Jag kunde","Du kunde","Han/hon kunde","Vi kunde","Ni kunde","De kunde"],
      perfekt:["Jag har kunnat","Du har kunnat","Han/hon har kunnat","Vi har kunnat","Ni har kunnat","De har kunnat"],
      futurum:["Jag ska kunna","Du ska kunna","Han/hon ska kunna","Vi ska kunna","Ni ska kunna","De ska kunna"]
    }
  },
  { infinitive:"volver", sv:"komma tillbaka",
    forms:{presens:["vuelvo","vuelves","vuelve","volvemos","volv√©is","vuelven"],
    preteritum:["volv√≠","volviste","volvi√≥","volvimos","volvisteis","volvieron"],
    perfekt:["he vuelto","has vuelto","ha vuelto","hemos vuelto","hab√©is vuelto","han vuelto"],
    futurum:["voy a volver","vas a volver","va a volver","vamos a volver","vais a volver","van a volver"]},
    svTempus:{
      presens:["Jag kommer tillbaka","Du kommer tillbaka","Han/hon kommer tillbaka","Vi kommer tillbaka","Ni kommer tillbaka","De kommer tillbaka"],
      preteritum:["Jag kom tillbaka","Du kom tillbaka","Han/hon kom tillbaka","Vi kom tillbaka","Ni kom tillbaka","De kom tillbaka"],
      perfekt:["Jag har kommit tillbaka","Du har kommit tillbaka","Han/hon har kommit tillbaka","Vi har kommit tillbaka","Ni har kommit tillbaka","De har kommit tillbaka"],
      futurum:["Jag ska komma tillbaka","Du ska komma tillbaka","Han/hon ska komma tillbaka","Vi ska komma tillbaka","Ni ska komma tillbaka","De ska komma tillbaka"]
    }
  },
  { infinitive:"contar", sv:"ber√§tta/r√§kna",
    forms:{presens:["cuento","cuentas","cuenta","contamos","cont√°is","cuentan"],
    preteritum:["cont√©","contaste","cont√≥","contamos","contasteis","contaron"],
    perfekt:["he contado","has contado","ha contado","hemos contado","hab√©is contado","han contado"],
    futurum:["voy a contar","vas a contar","va a contar","vamos a contar","vais a contar","van a contar"]},
    svTempus:{
      presens:["Jag ber√§ttar","Du ber√§ttar","Han/hon ber√§ttar","Vi ber√§ttar","Ni ber√§ttar","De ber√§ttar"],
      preteritum:["Jag ber√§ttade","Du ber√§ttade","Han/hon ber√§ttade","Vi ber√§ttade","Ni ber√§ttade","De ber√§ttade"],
      perfekt:["Jag har ber√§ttat","Du har ber√§ttat","Han/hon har ber√§ttat","Vi har ber√§ttat","Ni har ber√§ttat","De har ber√§ttat"],
      futurum:["Jag ska ber√§tta","Du ska ber√§tta","Han/hon ska ber√§tta","Vi ska ber√§tta","Ni ska ber√§tta","De ska ber√§tta"]
    }
  },
  { infinitive:"almorzar", sv:"√§ta lunch",
    forms:{presens:["almuerzo","almuerzas","almuerza","almorzamos","almorz√°is","almuerzan"],
    preteritum:["almorc√©","almorzaste","almorz√≥","almorzamos","almorzasteis","almorzaron"],
    perfekt:["he almorzado","has almorzado","ha almorzado","hemos almorzado","hab√©is almorzado","han almorzado"],
    futurum:["voy a almorzar","vas a almorzar","va a almorzar","vamos a almorzar","vais a almorzar","van a almorzar"]},
    svTempus:{
      presens:["Jag √§ter lunch","Du √§ter lunch","Han/hon √§ter lunch","Vi √§ter lunch","Ni √§ter lunch","De √§ter lunch"],
      preteritum:["Jag √•t lunch","Du √•t lunch","Han/hon √•t lunch","Vi √•t lunch","Ni √•t lunch","De √•t lunch"],
      perfekt:["Jag har √§tit lunch","Du har √§tit lunch","Han/hon har √§tit lunch","Vi har √§tit lunch","Ni har √§tit lunch","De har √§tit lunch"],
      futurum:["Jag ska √§ta lunch","Du ska √§ta lunch","Han/hon ska √§ta lunch","Vi ska √§ta lunch","Ni ska √§ta lunch","De ska √§ta lunch"]
    }
  }
];

const pronouns = ["yo","t√∫","√©l/ella","nosotros","vosotros","ellos"];
const tenses = ["presens","preteritum","perfekt","futurum"];

let questions = [];
let currentIndex = 0;
let score = 0;

function generateQuestions(){
  const temp = [];
  verbs.forEach(v=>{
    tenses.forEach(t=>{
      pronouns.forEach((p,i)=>{
        temp.push({
          verb: v,
          tense: t,
          pronounIndex: i,
          correct: v.forms[t][i],
          swedish: v.svTempus[t][i]
        });
      });
    });
  });

  // Ta bort dubbletter baserat p√• svensk fr√•ga
  const seen = new Set();
  questions = temp.filter(q => {
    if (seen.has(q.swedish)) return false;
    seen.add(q.swedish);
    return true;
  });

  // Slumpa ordning p√• fr√•gorna
  questions.sort(() => 0.5 - Math.random());
}


function startQuiz(){
  generateQuestions();
  currentIndex=0; score=0;
  document.getElementById("restartBtn").style.display="none";
  nextQuestion();
}

function nextQuestion(){
  if(currentIndex>=questions.length){
    document.getElementById("verb").textContent="√ñvningen √§r klar!";
    document.getElementById("sentence").textContent=`Du fick ${score} av ${questions.length} r√§tt.`;
    document.getElementById("options").innerHTML="";
    document.getElementById("restartBtn").style.display="block";
    updateStats();
    return;
  }

  const q=questions[currentIndex];
  document.getElementById("verb").textContent=q.swedish;
  document.getElementById("sentence").textContent = "";

  const optionsContainer=document.getElementById("options");
  optionsContainer.innerHTML="";

  let wrongTenses=tenses.filter(t=>t!==q.tense);
  wrongTenses=wrongTenses.sort(()=>0.5-Math.random()).slice(0,3);

  const allOptions=[q.correct,...wrongTenses.map(t=>q.verb.forms[t][q.pronounIndex])]
                    .sort(()=>0.5-Math.random());

  allOptions.forEach(opt=>{
    const btn=document.createElement("button");
    btn.textContent=opt;
    btn.onclick=()=>checkAnswer(btn,opt,q.correct);
    optionsContainer.appendChild(btn);
  });

  updateStats();
}

function checkAnswer(btn,choice,correctAnswer){
  const buttons=document.querySelectorAll("#options button");
  buttons.forEach(b=>b.disabled=true);

  if(choice===correctAnswer){btn.classList.add("correct");score++;}
  else{
    btn.classList.add("wrong");
    const correctBtn=Array.from(buttons).find(b=>b.textContent===correctAnswer);
    if(correctBtn) correctBtn.classList.add("correct");
  }

  currentIndex++;
  updateStats();
  setTimeout(nextQuestion,1500);
}

function updateStats(){
  document.getElementById("stats").textContent=
    `Fr√•ga: ${Math.min(currentIndex+1,questions.length)} / ${questions.length} ‚Ä¢ R√§tt: ${score}`;
}

function toggleDark(){
  const body=document.body;
  const btn=document.getElementById("themeBtn");
  body.classList.toggle("dark");
  btn.textContent=body.classList.contains("dark")?"‚òÄÔ∏è":"üåô";
}

function restartQuiz(){ startQuiz(); }

startQuiz();
</script>




</body>
</html>