<!DOCTYPE html>
<html lang="sv">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adjective Agreement (non-regular): hard level</title>

    <!-- Font Awesome CDN for Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
<style>
/* Reset and Base Styles */
*,
*::before,
*::after {
	box-sizing: border-box;
	margin: 0;
	padding: 0;
}

body {
	font-family: Arial, sans-serif;
	background-color: #f9fafb;
	color: #2d3748;
	line-height: 1.6;
	font-size: 16px;
	display: flex;
	flex-direction: column;
	justify-content: flex-start;
	align-items: center;
	min-height: 100vh;
	padding: 20px;
	overflow-y: auto;
	position: relative;
	transition: background-color 0.3s, color 0.3s;
}

body.dark-mode {
	background-color: #121212;
	color: #e2e8f0;
}

/* Close Button Styling */
.close-button {
	float: right;
	padding: 5px;
	cursor: pointer;
	font-size: 18px;
	background-color: #ccc;
	border: none;
	border-radius: 50%;
	line-height: 20px;
	width: 30px;
	height: 30px;
	display: flex;
	align-items: center;
	justify-content: center;
	transition: background-color 0.3s, transform 0.3s;
}

body.dark-mode .close-button {
	background-color: #555;
	color: #ffcccc;
}

.close-button:hover {
	background-color: #f44336;
	transform: scale(1.2) rotate(90deg);
	color: white;
}

body.dark-mode .close-button:hover {
	background-color: #ff6666;
	color: white;
	transform: scale(1.2) rotate(90deg);
}

/* Container */
.container {
	background-color: #ffffff;
	padding: 40px 30px;
	border-radius: 12px;
	box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
	max-width: 850px;
	width: 100%;
	text-align: center;
	position: relative;
	transition: background-color 0.3s, box-shadow 0.3s;
	margin-top: 20px;
}

body.dark-mode .container {
	background-color: #1a202c;
	box-shadow: 0 10px 25px rgba(255, 255, 255, 0.1);
}

/* Dark Mode Toggle */
.dark-mode-toggle {
	justify-content: flex-start;
	padding: 0 10px;
	gap: 10px;
	cursor: default;
}

/* Modal */
.modal {
	display: none;
	position: fixed;
	left: 0;
	top: 0;
	width: 100%;
	height: 100%;
	background: rgba(0, 0, 0, 0.5);
	z-index: 1000;
	justify-content: center;
	align-items: center;
	opacity: 0;
	transition: opacity 0.3s ease-in-out;
}

.modal-content {
	background: white;
	color: black;
	padding: 30px;
	/* NÃ¥got mer luft fÃ¶r lÃ¤sbarhet */
	border-radius: 8px;
	box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
	text-align: left;
	/* Ã„ndrat frÃ¥n center till left */
	max-width: 600px;
	width: 90%;
	/* Lite bredare pÃ¥ mobiler */
	max-height: 80vh;
	/* SÃ¤kerstÃ¤ller att den inte tÃ¤cker hela skÃ¤rmen pÃ¥ hÃ¶jden */
	overflow-y: auto;
	/* GÃ¶r innehÃ¥llet rullbart om det Ã¤r lÃ¥ngt */
	transform: translateY(-20px);
	transition: transform 0.3s ease-in-out;
}

/* Specifik styling fÃ¶r element inuti modalen */
.modal-content h2 {
	margin-top: 0;
	margin-bottom: 20px;
	font-size: 1.5rem;
}

.modal-content p {
	margin-bottom: 15px;
	line-height: 1.6;
}

.modal-content ul {
	margin-left: 20px;
	/* Ger punktlistan ett korrekt indrag */
	margin-bottom: 15px;
}

.modal-content li {
	margin-bottom: 10px;
}

body.dark-mode .modal-content {
	background-color: #1a202c;
	color: #edf2f7;
	border: 1px solid #2d3748;
	/* Lade till en tunn kant fÃ¶r definition */
}

.modal.show {
	display: flex;
	opacity: 1;
}

.modal.show .modal-content {
	transform: translateY(0);
}

/* Page Title */
.page-title {
	text-align: center;
	color: #333333;
	font-size: 28px;
	margin-bottom: 20px;
	line-height: 1.4;
	padding-top: 10px;
	position: relative;
	z-index: 1;
	transition: color 0.3s ease, background-color 0.3s ease;
}

body.dark-mode .page-title {
	color: #ffffff;
}

/* Score, Start Over, and Dark Mode Toggle Container */
.score-container {
	position: fixed;
	top: 20px;
	right: 40px;
	display: flex;
	flex-direction: column;
	align-items: stretch;
	width: 150px;
	z-index: 1001;
	gap: 10px;
	transition: background-color 0.3s ease, box-shadow 0.3s ease;
}

/* Sentence Styling */
.sentence {
	background-color: #f7fafc;
	padding: 20px;
	padding-bottom: 5px;
	border-radius: 8px;
	box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
	position: relative;
	transition: background-color 0.3s, border 0.3s;
	border-left: 6px solid transparent;
	text-align: left;
	/* Removed invalid data-state property */
}

body.dark-mode .sentence {
	background-color: #2d3748;
	box-shadow: 0 4px 10px rgba(255, 255, 255, 0.05);
}

.sentence.correct {
	border-left: 6px solid #38a169;
	background-color: #cdffcd;
	transition: border 0.3s, background-color 0.3s;
}

body.dark-mode .sentence.correct {
	border-left: 6px solid #38a169;
	background-color: #22543d;
}

.sentence.incorrect {
	border-left: 6px solid #e53e3e;
	background-color: #FFADB0;
	transition: border 0.3s, background-color 0.3s;
}

body.dark-mode .sentence.incorrect {
	border-left: 6px solid #e53e3e;
	background-color: #742a2a;
}

.sentence p {
	font-size: 1.1rem;
	margin-bottom: 10px;
	transition: color 0.3s;
}

body.dark-mode .sentence p {
	color: #edf2f7;
}

/* Select Element Styling */
.sentence select {
	padding: 4px 4px;
	font-size: inherit;
	border: 1px solid #cbd5e0;
	border-radius: 6px;
	background-color: #edf2f7;
	cursor: pointer;
	transition: border-color 0.3s, background-color 0.3s;
	width: auto;
	appearance: auto;
	-webkit-appearance: auto;
	-moz-appearance: auto;
	background-image: initial;
	margin-left: 10px;
	/* Adjust this value as needed */
	margin-right: 10px;
	/* Adjust this value as needed */
}

body.dark-mode .sentence select {
	background-color: #4a5568;
	color: #edf2f7;
	border: 1px solid #718096;
}

.sentence select:focus {
	border-color: #3182ce;
	outline: none;
	box-shadow: 0 0 0 2px rgba(49, 130, 206, 0.2);
}

body.dark-mode .sentence select:focus {
	border-color: #63b3ed;
	box-shadow: 0 0 0 2px rgba(99, 179, 237, 0.2);
}

/* Sentences */
.sentences {
	display: grid;
	grid-template-columns: 1fr;
	gap: 20px;
}

/* Slider Container */
.switch {
	position: relative;
	width: 40px;
	height: 20px;
	display: inline-block;
}

/* Hide Default Checkbox */
.switch input {
	display: none;
}

/* Slider Appearance */
.slider {
	position: absolute;
	cursor: pointer;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background-color: #ccc;
	transition: 0.4s;
	border-radius: 20px;
}

.slider::before {
	position: absolute;
	content: "";
	height: 14px;
	width: 14px;
	left: 3px;
	bottom: 3px;
	background-color: white;
	transition: 0.4s;
	border-radius: 50%;
}

/* Slider Active State */
.switch input:checked+.slider {
	background-color: #007BFF;
}

.switch input:checked+.slider::before {
	transform: translateX(20px);
}

/* Start Over Button */
.start-over {
	background-color: #007BFF;
	color: white;
	cursor: pointer;
	border: none;
	display: flex;
	align-items: center;
	justify-content: center;
	transition: background-color 0.3s ease;
}

.start-over:hover {
	background-color: #0056b3;
	color: white;
}

/* Word Styling */
.word {
	position: relative;
	cursor: pointer;
	color: #2d3748;
	transition: color 0.3s, background-color 0.3s;
	display: inline-block;
	border-radius: 4px;
}

body.dark-mode .word {
	color: #edf2f7;
}

.word::after {
	content: '';
	position: absolute;
	left: 50%;
	bottom: -2px;
	width: 100%;
	height: 3px;
	background-color: currentColor;
	transform: translateX(-50%) scaleX(0);
	transform-origin: center;
	transition: transform 0.3s ease;
}

.word:hover::after,
.word:focus::after {
	transform: translateX(-50%) scaleX(1);
}

.word:hover,
.word:focus {
	background-color: rgba(45, 55, 72, 0.1);
}

body.dark-mode .word:hover,
body.dark-mode .word:focus {
	background-color: rgba(226, 232, 240, 0.1);
}

/* Unified Button Styling */
.score,
.dark-mode-toggle,
.start-over {
	width: 100%;
	height: 40px;
	padding: 0 10px;
	box-sizing: border-box;
	font-size: 16px;
	text-align: center;
	background-color: #fff;
	color: #333;
	border-radius: 5px;
	box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
	display: flex;
	align-items: center;
	justify-content: center;
	transition: background-color 0.3s, color 0.3s;
	cursor: pointer;
	border: none;
}

.answer-input {
	padding: 4px 8px;
	padding-right: 85px;
	/* Ã–kat fÃ¶r att ge knapparna rejÃ¤lt med plats */
	font-size: 1rem;
	border: 2px solid #cbd5e0;
	border-radius: 6px;
	background-color: #fff;
	width: 220px;
	/* Ã–kat frÃ¥n 140px fÃ¶r att rymma bÃ¥de text och knappar */
	transition: all 0.2s;
	outline: none;
	margin: 0 5px;
	display: inline-block;
	vertical-align: middle;
}

body.dark-mode .answer-input {
	background-color: #4a5568;
	color: #fff;
	border-color: #718096;
}

/* Standard placeholder-fÃ¤rg (light mode) */
.answer-input::placeholder {
	color: #a0aec0;
	opacity: 1;
	/* Firefox behÃ¶ver detta */
}

/* Placeholder-fÃ¤rg fÃ¶r dark mode */
body.dark-mode .answer-input::placeholder {
	color: #cbd5e0;
	/* En ljusare grÃ¥ som syns bra mot den mÃ¶rka bakgrunden */
	opacity: 0.7;
}

/* Focus-effekt fÃ¶r Light Mode */
.answer-input:focus {
	border-color: #3182ce;
	/* En tydlig blÃ¥ fÃ¤rg */
	box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.3);
	/* Mjuk blÃ¥ gloria */
	background-color: #fff;
}

/* Focus-effekt fÃ¶r Dark Mode */
body.dark-mode .answer-input:focus {
	border-color: #63b3ed;
	/* Ljusare blÃ¥ fÃ¶r bÃ¤ttre kontrast */
	box-shadow: 0 0 0 3px rgba(99, 179, 237, 0.3);
	background-color: #2d3748;
	/* NÃ¥got mÃ¶rkare bakgrund vid fokus */
}

/* BehÃ¥ll rÃ¤tt/fel-fÃ¤rg Ã¤ven vid fokus om du vill prioritera feedback */
.sentence.correct .answer-input:focus {
	border-color: #38a169;
	box-shadow: 0 0 0 3px rgba(56, 161, 105, 0.3);
}

.sentence.incorrect .answer-input:focus {
	border-color: #e53e3e;
	box-shadow: 0 0 0 3px rgba(229, 62, 62, 0.3);
}

/* NÃ¤r fÃ¤ltet Ã¤r i en korrekt mening, gÃ¶r ramen tydligare */
.sentence.correct .answer-input {
	border-color: #38a169;
}

.sentence.incorrect .answer-input {
	border-color: #e53e3e;
}

.adj-badge {
    display: inline-block;
    padding: 2px 8px;
    background-color: #e2e8f0;
    color: #4a5568;
    border: 1.5px solid #cbd5e0;
    border-radius: 6px;
    font-size: 0.9rem;
    font-weight: bold;
    margin-left: 10px;
    vertical-align: middle; /* Justerad fÃ¶r bÃ¤ttre linjering med fÃ¤ltet */
}

/* Dark mode variant */
body.dark-mode .adj-badge {
	background-color: #2d3748;
	color: #edf2f7;
	border: 1.5px solid #718096;
}

/* BehÃ¥llare fÃ¶r input och knappar */
.input-wrapper {
    display: inline-flex;
    position: relative;
    align-items: center;
    vertical-align: middle;
    background-color: #fff;
    border: 2px solid #cbd5e0;
    border-radius: 6px;
    transition: all 0.2s;
    width: 220px;
	margin: 0 5px;
}

body.dark-mode .input-wrapper {
    background-color: #4a5568;
    border-color: #718096;
}

/* Fokus-effekt pÃ¥ hela behÃ¥llaren nÃ¤r man skriver */
.input-wrapper:focus-within {
    border-color: #3182ce;
    box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.3);
}

body.dark-mode .input-wrapper:focus-within {
    border-color: #63b3ed;
    box-shadow: 0 0 0 3px rgba(99, 179, 237, 0.3);
}

/* Hantera rÃ¤tt/fel fÃ¤rger pÃ¥ behÃ¥llaren */
.sentence.correct .input-wrapper {
    border-color: #38a169;
}
.sentence.incorrect .input-wrapper {
    border-color: #e53e3e;
}

.answer-input {
    border: none !important;
    background: transparent !important;
    box-shadow: none !important;
    padding: 6px 65px 6px 10px; /* Gott om plats till hÃ¶ger fÃ¶r Ã¥Ã¤Ã¶ */
    font-size: 1rem;
    width: 100%;
    outline: none;
    color: inherit;
    display: block;
}

/* De smÃ¥ knapparna */
.char-btn {
    background: #edf2f7;
    border: 1px solid #cbd5e0;
    border-radius: 4px;
    width: 22px;
    height: 22px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 0.85rem;
    color: #4a5568;
}

body.dark-mode .char-btn {
    background: #2d3748;
    color: #edf2f7;
    border-color: #718096;
}

.char-btn:hover {
	background: #e2e8f0;
	border-color: #a0aec0;
}

/* Dark mode fÃ¶r knapparna */
body.dark-mode .char-btn {
	background: #2d3748;
	color: #edf2f7;
	border-color: #718096;
}

body.dark-mode .char-btn:hover {
	background: #4a5568;
}

.btn-container {
    position: absolute;
    right: 5px;
    display: flex;
    gap: 3px;
    pointer-events: auto;
    z-index: 2;
}

/* ðŸš« Block entire site on small screens */
@media (max-width: 700px) {

	body>*:not(#mobileBlockModal) {
		display: none !important;
	}

	#mobileBlockModal {
		display: flex !important;
		position: fixed;
		inset: 0;
		z-index: 9999;
		opacity: 1;
	}
}
</style>

</head>

<body>

    <!-- Menu Items for Desktop -->
    <div class="score-container">
        <!-- Score Display for Desktop -->
        <div class="score">Score:&nbsp;<span class="score-display">0</span>&nbsp;/&nbsp;<span class="score-max"></span></div>
        <!-- Dark Mode Toggle for Desktop -->
        <div class="dark-mode-toggle">
            <label class="switch">
                <input type="checkbox" id="darkModeSwitch">
                <span class="slider"></span>
            </label>
            <span>Dark mode</span>
        </div>
        <!-- Info Button for Desktop -->
        <button class="start-over" id="info-button" onclick="openModal('infoModal')">
            <i class="fas fa-info-circle" style="margin-right: 8px;"></i> Info
        </button>
        <!-- Go to harder version of the exercise (no gender indicated) -->
        <button class="start-over" onclick="goToEasyVersion()">
            <i class="fas fa-arrow-up-right-from-square" style="margin-right: 8px;"></i> Easy level
        </button>
        <button class="start-over" onclick="goToMediumVersion()">
            <i class="fas fa-arrow-up-right-from-square" style="margin-right: 8px;"></i> Medium level
        </button>
        <!-- Start Over Button for Desktop -->
        <button class="start-over" onclick="startOver()">
            <i class="fas fa-rotate-left" style="margin-right: 8px;"></i> Start over
        </button>
    </div>

    <!-- Page Title -->
    <h1 class="page-title">Adjective Agreement (indefinite non-regular): hard level</h1>
    <p>Read the "Info" to understand what this exercise is about.</p>

    <!-- Main Content Container -->
    <div class="container">
        <div class="sentences" id="sentences"></div>
    </div>
    <div class="modal" id="infoModal" role="dialog" aria-modal="true" aria-labelledby="infoModalTitle">
        <div class="modal-content">
            <button class="close-button" type="button" onclick="closeModal('infoModal')" aria-label="Close modal">&times;</button>
            <h2 id="infoModalTitle">Information</h2>
            <p>About 15% of Swedish adjectives are non-regular (i.e. irregular, inflexible or defective), meaning they do not follow the straightforward inflection pattern, which is <strong>basic (en gender) form</strong>, <strong>neuter +t</strong>, and <strong>plural +a</strong>. However, once you have mastered these 15%, you have effectively mastered all adjectives! Provide the correct adjective form to ensure it agrees with the noun it describes.</p>
			<p><strong>Please note</strong>: The text field will turn red as soon as you begin typing; this is normal and indicates the answer is incomplete. It will turn green the moment the correct form is entered. If your keyboard lacks the characters Ã¥, Ã¤, or Ã¶, you can insert them by clicking the buttons to the right of each text box.
			</p>
			<h2 id="infoModalTitle">A defining feature of this level</h2>
			<p>No translations provided, you are expected to know the gender of the head noun, and you must manually enter the correct adjective form (and article when the head noun is in the singular). <strong>There are two easier versions</strong> of this exercise available (see the menu).
        </div>
    </div>

    <!-- Congratulations Modal -->
    <div class="modal" id="congratulationsModal" role="dialog" aria-modal="true" aria-labelledby="congratulationsModalTitle">
        <div class="modal-content">
            <button class="close-button" type="button" onclick="closeModal('congratulationsModal')" aria-label="Close modal">&times;</button>
            <h2 id="congratulationsModalTitle">Congratulations!</h2>
            <p>You have answered all the questions correctly! Did you manage to do it without making any mistakes?</p>
        </div>
    </div>
	
<div class="modal" id="mobileBlockModal" role="dialog" aria-modal="true">
    <div class="modal-content" style="text-align:center;">
        <h2>Not available on mobile</h2>
        <p>
            This page â€” an exercise on Swedish adjectives â€” is not designed for mobile phones,
            mainly because many of the interactive features do not work well on small touchscreens.
        </p>
    </div>
</div>		

    <script>

const sentences = [

{
    parts: [
        "Vi gick uppfÃ¶r",
        { answer: "en brant", adj: "brant" },
        "backe."
    ]
},
{
    parts: [
        "KlÃ¤ttrarna kom till",
        { answer: "ett brant", adj: "brant" },
        "omrÃ¥de."
    ]
},
{
    parts: [
        "PÃ¥ berget fanns riktigt",
        { answer: "branta", adj: "brant" },
        "stÃ¤llen."
    ]
},
{
    parts: [
        "PÃ¥ skolans bibliotek satt",
        { answer: "en tyst", adj: "tyst" },
        "elev."
    ]
},
{
    parts: [
        "Hon avgav",
        { answer: "ett tyst", adj: "tyst" },
        "lÃ¶fte."
    ]
},
{
    parts: [
        "I klassrummet satt",
        { answer: "tysta", adj: "tyst" },
        "elever."
    ]
},
{
    parts: [
        "Jag mÃ¶tte",
        { answer: "en trÃ¶tt", adj: "trÃ¶tt" },
        "resenÃ¤r."
    ]
},
{
    parts: [
        "Hon hade",
        { answer: "ett trÃ¶tt", adj: "trÃ¶tt" },
        "ansikte."
    ]
},
{
    parts: [
        "LÃ¤ngs hela fronten sÃ¥g vi",
        { answer: "trÃ¶tta", adj: "trÃ¶tt" },
        "soldater."
    ]
},
{
    parts: [
        "Han kÃ¶r runt i",
        { answer: "en svart", adj: "svart" },
        "bil."
    ]
},
{
    parts: [
        "Hon kÃ¶pte",
        { answer: "ett svart", adj: "svart" },
        "paraply."
    ]
},
{
    parts: [
        "HÃ¤r hittar du ett stort urval av",
        { answer: "svarta", adj: "svart" },
        "pÃ¤rlor."
    ]
},
{
    parts: [
        "PÃ¥ husets baksida fanns",
        { answer: "en Ã¶ppen", adj: "Ã¶ppen" },
        "dÃ¶rr."
    ]
},
{
    parts: [
        "Vi hade utsikt Ã¶ver dalen och",
        { answer: "ett Ã¶ppet", adj: "Ã¶ppen" },
        "omrÃ¥de."
    ]
},
{
    parts: [
        "Det var helt omÃ¶jligt att hitta",
        { answer: "Ã¶ppna", adj: "Ã¶ppen" },
        "restauranger."
    ]
},
{
    parts: [
        "Det hÃ¤r ansvaret krÃ¤ver",
        { answer: "en vuxen", adj: "vuxen" },
        "person."
    ]
},
{
    parts: [
        "Jag anser att Vespa Ã¤r",
        { answer: "ett vuxet", adj: "vuxen" },
        "mÃ¤rke."
    ]
},
{
    parts: [
        "Hur undervisar man",
        { answer: "vuxna", adj: "vuxen" },
        "elever?"
    ]
},
{
    parts: [
        "Hon fick",
        { answer: "en galen", adj: "galen" },
        "idÃ©."
    ]
},
{
    parts: [
        "Han beskrev",
        { answer: "ett galet", adj: "galen" },
        "scenario."
    ]
},
{
    parts: [
        "De hade varit med om",
        { answer: "galna", adj: "galen" },
        "saker."
    ]
},
{
    parts: [
        "SnÃ¤lla du, det dÃ¤r Ã¤r",
        { answer: "en absurd", adj: "absurd" },
        "tanke."
    ]
},
{
    parts: [
        "Jag tycker att det Ã¤r",
        { answer: "ett absurt", adj: "absurd" },
        "pÃ¥stÃ¥ende."
    ]
},
{
    parts: [
        "Man blir avtrubbad av kunder som sÃ¤ger",
        { answer: "absurda", adj: "absurd" },
        "saker."
    ]
},
{
    parts: [
        "I sagan finns det",
        { answer: "en ond", adj: "ond" },
        "drottning."
    ]
},
{
    parts: [
        "MÃ¥nga tror att slaveriet Ã¤r",
        { answer: "ett ont", adj: "ond" },
        "minne av det fÃ¶rflutna."
    ]
},
{
    parts: [
        "Filmen skildrar",
        { answer: "onda", adj: "ond" },
        "handlingar."
    ]
},
{
    parts: [
        "Vi sÃ¥g",
        { answer: "en vild", adj: "vild" },
        "hÃ¤st."
    ]
},
{
    parts: [
        "Konsertens fÃ¶rsta sats har",
        { answer: "ett vilt", adj: "vild" },
        "tema."
    ]
},
{
    parts: [
        "PÃ¥ safarin sÃ¥g vi",
        { answer: "vilda", adj: "vild" },
        "elefanter."
    ]
},
{
    parts: [
        "Reportern kontaktade",
        { answer: "en sÃ¤ker", adj: "sÃ¤ker" },
        "kÃ¤lla."
    ]
},
{
    parts: [
        "Ã„r polisman",
        { answer: "ett sÃ¤kert", adj: "sÃ¤ker" },
        "yrke?"
    ]
},
{
    parts: [
        "De valde",
        { answer: "sÃ¤kra", adj: "sÃ¤ker" },
        "vÃ¤gar."
    ]
},
{
    parts: [
        "I sin bok skildrar han",
        { answer: "en bitter", adj: "bitter" },
        "konflikt."
    ]
},
{
    parts: [
        "Hon bjÃ¶d honom pÃ¥",
        { answer: "ett bittert", adj: "bitter" },
        "te."
    ]
},
{
    parts: [
        "Hon bjÃ¶d honom pÃ¥",
        { answer: "ett bittert", adj: "bitter" },
        "te."
    ]
},
{
    parts: [
        "Vi hyrde",
        { answer: "en usel", adj: "usel" },
        "stuga."
    ]
},
{
    parts: [
        "Han gjorde",
        { answer: "ett uselt", adj: "usel" },
        "arbete."
    ]
},
{
    parts: [
        "HÃ¤r ser vi prov pÃ¥ ledarskap i",
        { answer: "usla", adj: "usel" },
        "tider."
    ]
},
{
    parts: [
        "De hittade",
        { answer: "en dÃ¶d", adj: "dÃ¶d" },
        "fÃ¥gel."
    ]
},
{
    parts: [
        "Hon visste hur",
        { answer: "ett dÃ¶tt", adj: "dÃ¶d" },
        "ansikte ser ut."
    ]
},
{
    parts: [
        "Museet visade",
        { answer: "dÃ¶da", adj: "dÃ¶d" },
        "hÃ¤star."
    ]
},
{
    parts: [
        "Hon Ã¤r",
        { answer: "en god", adj: "god" },
        "vÃ¤n."
    ]
},
{
    parts: [
        "Han utfÃ¶rde",
        { answer: "ett gott", adj: "god" },
        "arbete."
    ]
},
{
    parts: [
        "De gjorde",
        { answer: "goda", adj: "god" },
        "gÃ¤rningar."
    ]
},
{
    parts: [
        "Han kÃ¶pte",
        { answer: "en rÃ¶d", adj: "rÃ¶d" },
        "bil."
    ]
},
{
    parts: [
        "Hon hittade",
        { answer: "ett rÃ¶tt", adj: "rÃ¶d" },
        "Ã¤pple."
    ]
},
{
    parts: [
        "Vi kÃ¶pte",
        { answer: "rÃ¶da", adj: "rÃ¶d" },
        "rosor."
    ]
},
{
    parts: [
        "Hon bar",
        { answer: "en blÃ¥", adj: "blÃ¥" },
        "jacka."
    ]
},
{
    parts: [
        "Han blev skrÃ¤md av",
        { answer: "ett blÃ¥tt", adj: "blÃ¥" },
        "spÃ¶ke."
    ]
},
{
    parts: [
        "De kÃ¶pte",
        { answer: "blÃ¥a", adj: "blÃ¥" },
        "kuddar."
    ]
},
{
    parts: [
        "Han blev",
        { answer: "en fri", adj: "fri" },
        "man."
    ]
},
{
    parts: [
        "Hon lever idag i",
        { answer: "ett fritt", adj: "fri" },
        "samhÃ¤lle."
    ]
},
{
    parts: [
        "Slavar i Sverige blev",
        { answer: "fria", adj: "fri" },
        "mÃ¤nniskor Ã¥r 1335."
    ]
},
{
    parts: [
        "De Ã¥t",
        { answer: "en rÃ¥", adj: "rÃ¥" },
        "biff."
    ]
},
{
    parts: [
        "Han Ã¥t",
        { answer: "ett rÃ¥tt", adj: "rÃ¥" },
        "hjÃ¤rta."
    ]
},
{
    parts: [
        "Jag kÃ¶pte",
        { answer: "rÃ¥a", adj: "rÃ¥" },
        "havskrÃ¤ftor igÃ¥r."
    ]
},
{
    parts: [
        "Han gjorde",
        { answer: "en korkad", adj: "korkad" },
        "grej."
    ]
},
{
    parts: [
        "Det var",
        { answer: "ett korkat", adj: "korkad" },
        "pÃ¥stÃ¥ende."
    ]
},
{
    parts: [
        "FÃ¶relÃ¤sningen var en kavalkad av",
        { answer: "korkade", adj: "korkad" },
        "pÃ¥stÃ¥enden."
    ]
},
{
    parts: [
        "Polisen stoppade",
        { answer: "en berusad", adj: "berusad" },
        "busschauffÃ¶r."
    ]
},
{
    parts: [
        "I tavlan \"Bacchus triumf\" syns",
        { answer: "ett berusat", adj: "berusad" },
        "ansikte i detalj."
    ]
},
{
    parts: [
        "Vakten avvisade",
        { answer: "berusade", adj: "berusad" },
        "gÃ¤ster."
    ]
},
{
    parts: [
        "FÃ¶r mig Ã¤r",
        { answer: "en bildad", adj: "bildad" },
        "person flersprÃ¥kig."
    ]
},
{
    parts: [
        "Ã„ven de svagaste fÃ¥r stÃ¶d i",
        { answer: "ett bildat", adj: "bildad" },
        "samhÃ¤lle."
    ]
},
{
    parts: [
        "Jorden Ã¤r rund, det vet",
        { answer: "bildade", adj: "bildad" },
        "mÃ¤nniskor."
    ]
},
{
    parts: [
        "Vi sÃ¥g",
        { answer: "en liten", adj: "liten" },
        "flicka."
    ]
},
{
    parts: [
        "Hon kÃ¶pte",
        { answer: "ett litet", adj: "liten" },
        "smycke."
    ]
},
{
    parts: [
        "Vi kÃ¶pte",
        { answer: "smÃ¥", adj: "liten" },
        "plantor i vÃ¥ras."
    ]
},
{
    parts: [
        "Det satt",
        { answer: "en ledsen", adj: "ledsen" },
        "pojke pÃ¥ parkbÃ¤nken."
    ]
},
{
    parts: [
        "Flickan ritade",
        { answer: "ett ledset", adj: "ledsen" },
        "ansikte."
    ]
},
{
    parts: [
        "HÃ¤r har vi ledsen musik fÃ¶r",
        { answer: "ledsna", adj: "ledsen" },
        "mÃ¤nniskor."
    ]
},
{
    parts: [
        "Hon hjÃ¤lpte",
        { answer: "en gammal", adj: "gammal" },
        "dam."
    ]
},
{
    parts: [
        "Vi hittade",
        { answer: "ett gammalt", adj: "gammal" },
        "kafÃ©."
    ]
},
{
    parts: [
        "Vi skapar nytt liv i",
        { answer: "gamla", adj: "gammal" },
        "byggnader."
    ]
}

];

    let score = 0;

    // Fisher-Yates shuffle algorithm to shuffle an array.
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }


function capitalize(word) {
    return word.charAt(0).toUpperCase() + word.slice(1);
}


    // Function to generate HTML for a single sentence
function generateSentenceHTML(sentence) {
    let badgeHTML = "";
    const htmlParts = [];

    sentence.parts.forEach(part => {
        if (typeof part === "object") {
            const correctAnswer = part.answer.toLowerCase();
            badgeHTML = `<span class="adj-badge">${part.adj}</span>`;

            htmlParts.push(`
                <span class="input-wrapper">
                    <input type="text"
                           class="answer-input"
                           data-correct="${correctAnswer}"
                           oninput="evaluateInputAnswer(this)"
                           placeholder="write..."
                           autocomplete="off">
                    <span class="btn-container">
                        <button type="button" class="char-btn" tabindex="-1" onclick="insertChar(this, 'Ã¥')">Ã¥</button>
                        <button type="button" class="char-btn" tabindex="-1" onclick="insertChar(this, 'Ã¤')">Ã¤</button>
                        <button type="button" class="char-btn" tabindex="-1" onclick="insertChar(this, 'Ã¶')">Ã¶</button>
                    </span>
                </span>
            `);
        } else {
            htmlParts.push(part);
        }
    });

    // LÃ¤gg badgen efter sista textdelen (dÃ¤r punkt/frÃ¥getecken normalt finns)
    for (let i = htmlParts.length - 1; i >= 0; i--) {
        if (typeof htmlParts[i] === "string" && !htmlParts[i].includes("input-wrapper")) {
            htmlParts[i] = `${htmlParts[i]} ${badgeHTML}`;
            break;
        }
    }

    // Bygg meningen
    const sentenceHTML = htmlParts.join(" ");

    return `<div class="sentence" data-state="none"><p>${sentenceHTML}</p></div>`;
}



function insertChar(btn, char) {
    // Hitta inputfÃ¤ltet som hÃ¶r till den klickade knappen
    const input = btn.closest('.input-wrapper').querySelector('.answer-input');
    
    // HÃ¤mta markÃ¶rens position
    const start = input.selectionStart;
    const end = input.selectionEnd;
    const text = input.value;

    // SÃ¤tt in tecknet pÃ¥ markÃ¶rens plats
    input.value = text.slice(0, start) + char + text.slice(end);

    // SÃ¤tt tillbaka markÃ¶ren efter det nya tecknet
    input.selectionStart = input.selectionEnd = start + 1;

    // SÃ¤tt fokus pÃ¥ fÃ¤ltet igen
    input.focus();

    // Trigga rÃ¤ttningslogiken manuellt
    evaluateInputAnswer(input);
}

    // Render sentences in a shuffled order.
    function renderSentences() {
        const shuffledSentences = shuffleArray([...sentences]);
        const sentencesHTML = shuffledSentences.map((sentence, index) => generateSentenceHTML(sentence, index)).join('');
        document.getElementById('sentences').innerHTML = sentencesHTML;
    }

    // Evaluates the user's answer and updates the score and UI accordingly.
function evaluateInputAnswer(inputElement) {
    const correctAnswer = inputElement.getAttribute('data-correct').toLowerCase().trim();
    const userValue = inputElement.value.toLowerCase().trim();
    const parent = inputElement.closest('.sentence');
    
    // Kontrollera om raden var korrekt INNAN Ã¤ndringen
    const wasCorrect = parent.classList.contains('correct');
    
    // Ta bort gamla klasser
    parent.classList.remove('correct', 'incorrect');
    
    let newState = 'none';

    if (userValue === "") {
        newState = 'none';
    } else if (userValue === correctAnswer) {
        newState = 'correct';
        parent.classList.add('correct');
    } else {
        newState = 'incorrect';
        parent.classList.add('incorrect');
    }

    // POÃ„NGLOGIK:
    // Gick den frÃ¥n "inte rÃ¤tt" till "rÃ¤tt"? -> +1
    if (newState === 'correct' && !wasCorrect) {
        updateScore(1);
    } 
    // Gick den frÃ¥n "rÃ¤tt" till "inte rÃ¤tt" (fel eller tomt)? -> -1
    else if (newState !== 'correct' && wasCorrect) {
        updateScore(-1);
    }

    parent.setAttribute('data-state', newState);

    if (newState === 'correct') {
        checkAllCorrect();
    }
}


    // Updates the score display based on value change.
// Updates the score display based on value change.
function updateScore(value) {
    score += value;

    const maxScore = sentences.length;

    // FÃ¶rhindra att poÃ¤ngen gÃ¥r utanfÃ¶r logiska grÃ¤nser (0 till max)
    if (score > maxScore) score = maxScore;
    if (score < 0) score = 0;

    document.querySelectorAll('.score-display').forEach((element) => {
        element.textContent = score;
    });

    checkForMaxScore(score);
}

    // Check if the score has reached max and opens the congratulations modal if so.
    function checkForMaxScore(currentScore) {
        if (currentScore >= sentences.length) {
            openModal('congratulationsModal');
        }
    }

    // Checks if all sentences are correctly answered.
    function checkAllCorrect() {
        const allCorrect = Array.from(document.querySelectorAll('.sentence')).every(sentence => sentence.classList.contains('correct'));
        if (allCorrect) {
            openModal('congratulationsModal');
        }
    }

    // Opens a modal by its ID.
    function openModal(modalId) {
        const modal = document.getElementById(modalId);
        if (modal) {
            modal.style.display = 'flex';
            modal.classList.add('show');
        }
    }

    // Closes a modal by its ID.
    function closeModal(modalId) {
        const modal = document.getElementById(modalId);
        if (modal) {
            modal.style.display = 'none';
            modal.classList.remove('show');
        }
    }

    // Close modal when clicking outside of the modal content
    window.addEventListener('click', (event) => {
        const infoModal = document.getElementById('infoModal');
        const congratulationsModal = document.getElementById('congratulationsModal');

        if (event.target === infoModal) {
            closeModal('infoModal');
        } else if (event.target === congratulationsModal) {
            closeModal('congratulationsModal');
        }
    });

    // Function to toggle mobile menu
    function toggleMenu() {
        const menuOverlay = document.getElementById('menuOverlay');
        menuOverlay.classList.toggle('active');
    }

    // Function to toggle dark mode
function toggleDarkMode() {
    document.body.classList.toggle('dark-mode');

    // Spara instÃ¤llningen i localStorage
    const isDarkModeEnabled = document.body.classList.contains('dark-mode');
    localStorage.setItem('darkMode', isDarkModeEnabled ? 'enabled' : 'disabled');
    
    // Uppdatera checkboxen om den finns
    const darkModeToggle = document.getElementById('darkModeSwitch');
    if (darkModeToggle) {
        darkModeToggle.checked = isDarkModeEnabled;
    }
}

function goToEasyVersion() {
    window.location.href = "https://learnswedish.github.io/html/adjective-non-regular-easy.html";
}
function goToMediumVersion() {
    window.location.href = "https://learnswedish.github.io/html/adjective-non-regular-medium.html";
}

    // Open the Info modal and close the menu
    function showInfo() {
        openModal('infoModal');
        toggleMenu(); // StÃ¤ng menyn efter att ha visat info
    }

    // Start over and close the menu
    function startOverAndCloseMenu() {
        startOver();
        toggleMenu(); // StÃ¤ng menyn efter att ha startat om
    }

    // Initialize the dark mode toggle with stored preference
function initializeModalsAndDarkMode() {
    const darkModeToggle = document.getElementById('darkModeSwitch');
    const isDarkModeEnabled = localStorage.getItem('darkMode') === 'enabled';
    
    // Applicera lÃ¤get direkt vid start
    if (isDarkModeEnabled) {
        document.body.classList.add('dark-mode');
        if (darkModeToggle) darkModeToggle.checked = true;
    }

    // LÃ¤gg till eventlyssnare
    if (darkModeToggle) {
        darkModeToggle.addEventListener('change', function () {
            toggleDarkMode();
        });
    }
}

    // Function to update the maximum score in the HTML
    function updateMaxScore() {
        const maxScore = sentences.length;
        document.querySelectorAll('.score-max').forEach((element) => {
            element.textContent = maxScore;
        });
    }

    // Resets the quiz and score, then re-renders sentences.
    function startOver() {
        renderSentences();
        resetScore();
        closeModal('congratulationsModal');
    }

    // Resets the score to zero.
    function resetScore() {
        score = 0;
        document.querySelectorAll('.score-display').forEach((element) => {
            element.textContent = score;
        });

        // Ã…terstÃ¤ll alla meningars tillstÃ¥nd
        document.querySelectorAll('.sentence').forEach(sentence => {
            sentence.classList.remove('correct', 'incorrect');
            sentence.setAttribute('data-state', 'none');
        });
    }

    // Initialize the application once the DOM is fully loaded.
document.addEventListener('DOMContentLoaded', () => {
    const isMobile = window.matchMedia("(max-width: 700px)").matches;

    if (isMobile) {
        const mobileModal = document.getElementById('mobileBlockModal');
        if (mobileModal) {
            mobileModal.style.display = 'flex';
        }
        return; // KÃ¶r inte resten av scriptet om det Ã¤r mobil
    }

    renderSentences();
    initializeModalsAndDarkMode();
    resetScore();
    updateMaxScore();
});
    </script>

</body>

</html>
